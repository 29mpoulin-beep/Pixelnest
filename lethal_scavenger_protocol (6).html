<html lang="en"><head><style>
        @import url(https://fonts.googleapis.com/css?family=Google+Sans+Text);
        html {
          font-family: 'Google Sans Text', 'Google Sans';
          font-size: 14px;
          color-scheme: light dark;
          background: light-dark(white, black);
          color: light-dark(black, white);
        }
        </style>
        
        <script type="importmap">{"imports":{"@modelcontextprotocol/sdk/":"https://esm.sh/@modelcontextprotocol/sdk/dist/esm/","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/es2022/":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/es2022/dist/esm/","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/client/index?target=es2022":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/dist/esm/client/index?target=es2022","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/types?target=es2022":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/dist/esm/types?target=es2022","react":"https://aistudiocdn.com/react@^19.2.0","react-dom/":"https://aistudiocdn.com/react-dom@^19.2.0/","react/":"https://aistudiocdn.com/react@^19.2.0/","@google/genai":"https://aistudiocdn.com/@google/genai@^1.30.0","lucide-react":"https://aistudiocdn.com/lucide-react@^0.555.0","three":"https://unpkg.com/three@0.160.0/build/three.module.js","peerjs":"https://esm.sh/peerjs@1.5.4?bundle-deps","@/index":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@/types":"data:application/javascript;base64,ZXhwb3J0IHZhciBHYW1lU3RhdGU7CihmdW5jdGlvbiAoR2FtZVN0YXRlKSB7CiAgICBHYW1lU3RhdGVbIk1FTlUiXSA9ICJNRU5VIjsKICAgIEdhbWVTdGF0ZVsiTE9CQlkiXSA9ICJMT0JCWSI7CiAgICBHYW1lU3RhdGVbIlNISVAiXSA9ICJTSElQIjsKICAgIEdhbWVTdGF0ZVsiRVhQTE9SSU5HIl0gPSAiRVhQTE9SSU5HIjsKICAgIEdhbWVTdGF0ZVsiRU5DT1VOVEVSIl0gPSAiRU5DT1VOVEVSIjsKICAgIEdhbWVTdGF0ZVsiR0FNRV9PVkVSIl0gPSAiR0FNRV9PVkVSIjsKICAgIEdhbWVTdGF0ZVsiVklDVE9SWSJdID0gIlZJQ1RPUlkiOwp9KShHYW1lU3RhdGUgfHwgKEdhbWVTdGF0ZSA9IHt9KSk7Cg==","@/services/gameMaster":"data:application/javascript;base64,aW1wb3J0IHsgR29vZ2xlR2VuQUksIFR5cGUgfSBmcm9tICJAZ29vZ2xlL2dlbmFpIjsKLy8gSW5pdGlhbGl6ZSBHZW1pbmkgc2FmZWx5Ci8vIExhenkgaW5pdGlhbGl6YXRpb24gdG8gcHJldmVudCB0b3AtbGV2ZWwgY3Jhc2hlcwpjb25zdCBnZXRBSUNsaWVudCA9ICgpID0+IHsKICAgIC8vIFNhZmUgYWNjZXNzIHRvIHByb2Nlc3MuZW52LCBmYWxsaW5nIGJhY2sgdG8gd2luZG93LnByb2Nlc3MgaWYgbmVjZXNzYXJ5CiAgICBjb25zdCBlbnYgPSAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnID8gcHJvY2Vzcy5lbnYgOiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cucHJvY2Vzcz8uZW52IDoge30pKSB8fCB7fTsKICAgIGNvbnN0IGFwaUtleSA9IGVudi5BUElfS0VZIHx8ICcnOwogICAgaWYgKCFhcGlLZXkpCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICByZXR1cm4gbmV3IEdvb2dsZUdlbkFJKHsgYXBpS2V5IH0pOwp9Owpjb25zdCBtb2RlbElkID0gJ2dlbWluaS0yLjUtZmxhc2gnOwovLyAtLS0gRkFMTEJBQ0sgREFUQSAtLS0KY29uc3QgRkFMTEJBQ0tfUk9PTVMgPSBbCiAgICB7IG5hbWU6ICJNYWludGVuYW5jZSBTZWN0b3IgNCIsIGRlc2NyaXB0aW9uOiAiUGlwZXMgbGVha2luZyBzdGVhbSBldmVyeXdoZXJlLiBUaGUgYWlyIHRhc3RlcyBjb3BwZXIuIiwgYXRtb3NwaGVyZTogInN0ZWFteSIsIGRhbmdlckxldmVsOiAzIH0sCiAgICB7IG5hbWU6ICJTdG9yYWdlIFVuaXQgQiIsIGRlc2NyaXB0aW9uOiAiUm93cyBvZiBlbXB0eSBzaGVsdmVzLiBTb21ldGhpbmcgaXMgc2NyYXRjaGluZyBpbnNpZGUgdGhlIHdhbGxzLiIsIGF0bW9zcGhlcmU6ICJzaWxlbnQiLCBkYW5nZXJMZXZlbDogNCB9LAogICAgeyBuYW1lOiAiTWFpbiBUdXJiaW5lIEhhbGwiLCBkZXNjcmlwdGlvbjogIk1hc3NpdmUgbWFjaGluZXJ5IGxpZXMgZG9ybWFudCBpbiB0aGUgZGFyay4gRWNob2VzIGFyZSBsb3VkIGhlcmUuIiwgYXRtb3NwaGVyZTogImluZHVzdHJpYWwiLCBkYW5nZXJMZXZlbDogNiB9LAogICAgeyBuYW1lOiAiRmxvb2RlZCBCYXNlbWVudCIsIGRlc2NyaXB0aW9uOiAiQmxhY2sgd2F0ZXIgY292ZXJzIHRoZSBmbG9vci4gRWxlY3RyaWNhbCB3aXJlcyBoYW5nIGRhbmdlcm91c2x5IGNsb3NlLiIsIGF0bW9zcGhlcmU6ICJmbG9vZGVkIiwgZGFuZ2VyTGV2ZWw6IDcgfQpdOwovLyAtLS0gU0NSQVAgR0VORVJBVElPTiAtLS0KY29uc3Qgc2NyYXBTY2hlbWEgPSB7CiAgICB0eXBlOiBUeXBlLk9CSkVDVCwKICAgIHByb3BlcnRpZXM6IHsKICAgICAgICBuYW1lOiB7IHR5cGU6IFR5cGUuU1RSSU5HLCBkZXNjcmlwdGlvbjogIk5hbWUgb2YgdGhlIGluZHVzdHJpYWwgc2NyYXAgaXRlbSAoZS5nLiwgJ1YtVHlwZSBFbmdpbmUnLCAnTGFyZ2UgQXhsZScsICdCcm9rZW4gQm90dGxlJykuIiB9LAogICAgICAgIHZhbHVlOiB7IHR5cGU6IFR5cGUuSU5URUdFUiwgZGVzY3JpcHRpb246ICJDcmVkaXQgdmFsdWUgb2YgdGhlIGl0ZW0sIGJldHdlZW4gMTUgYW5kIDIwMC4iIH0sCiAgICAgICAgd2VpZ2h0OiB7IHR5cGU6IFR5cGUuSU5URUdFUiwgZGVzY3JpcHRpb246ICJXZWlnaHQgb2YgdGhlIGl0ZW0gaW4gcG91bmRzIChsYnMpLCB0eXBpY2FsbHkgYmV0d2VlbiA1IGFuZCA4MC4iIH0sCiAgICAgICAgZGVzY3JpcHRpb246IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiAiU2hvcnQgdmlzdWFsIGRlc2NyaXB0aW9uIG9mIHRoZSBydXN0eS9icm9rZW4gb2JqZWN0LiIgfSwKICAgICAgICByYXJpdHk6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGVudW06IFsiY29tbW9uIiwgInJhcmUiLCAibGVnZW5kYXJ5Il0gfQogICAgfSwKICAgIHJlcXVpcmVkOiBbIm5hbWUiLCAidmFsdWUiLCAid2VpZ2h0IiwgImRlc2NyaXB0aW9uIiwgInJhcml0eSJdCn07CmV4cG9ydCBjb25zdCBnZW5lcmF0ZVNjcmFwID0gYXN5bmMgKGRpZmZpY3VsdHlNdWx0aXBsaWVyKSA9PiB7CiAgICB0cnkgewogICAgICAgIGNvbnN0IGFpID0gZ2V0QUlDbGllbnQoKTsKICAgICAgICBpZiAoIWFpKQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIEFQSSBLZXkiKTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFpLm1vZGVscy5nZW5lcmF0ZUNvbnRlbnQoewogICAgICAgICAgICBtb2RlbDogbW9kZWxJZCwKICAgICAgICAgICAgY29udGVudHM6IGBHZW5lcmF0ZSBhIHJhbmRvbSBwaWVjZSBvZiBpbmR1c3RyaWFsIHNjcmFwIGZvdW5kIGluIGEgaG9ycm9yIHNjaS1maSBmYWNpbGl0eS4gCiAgICAgICAgICAgICAgICAgSXQgc2hvdWxkIGZlZWwgbGlrZSBhICdMZXRoYWwgQ29tcGFueScgaXRlbS4gCiAgICAgICAgICAgICAgICAgTXVsdGlwbGllcjogJHtkaWZmaWN1bHR5TXVsdGlwbGllcn0uYCwKICAgICAgICAgICAgY29uZmlnOiB7CiAgICAgICAgICAgICAgICByZXNwb25zZU1pbWVUeXBlOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICByZXNwb25zZVNjaGVtYTogc2NyYXBTY2hlbWEsCiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMS4xLCAvLyBIaWdoIHZhcmlldHkKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZS50ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQpOwogICAgICAgIH0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIHRleHQgcmV0dXJuZWQiKTsKICAgIH0KICAgIGNhdGNoIChlKSB7CiAgICAgICAgLy8gU2lsZW50IEZhbGxiYWNrCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbmFtZTogIlJ1c3RlZCBHZWFyIiwKICAgICAgICAgICAgdmFsdWU6IDI1LAogICAgICAgICAgICB3ZWlnaHQ6IDEyLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogIkEgaGVhdnksIG9pbC1zdGFpbmVkIGdlYXIgZnJvbSB1bmtub3duIG1hY2hpbmVyeS4iLAogICAgICAgICAgICByYXJpdHk6ICJjb21tb24iCiAgICAgICAgfTsKICAgIH0KfTsKLy8gLS0tIFJPT00gR0VORVJBVElPTiAtLS0KY29uc3Qgcm9vbVNjaGVtYSA9IHsKICAgIHR5cGU6IFR5cGUuT0JKRUNULAogICAgcHJvcGVydGllczogewogICAgICAgIG5hbWU6IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiAiSW5kdXN0cmlhbCByb29tIG5hbWUgKGUuZy4sICdNYWluIEJvaWxlcicsICdTdG9yYWdlIEInLCAnQ29ycmlkb3IgOScpLiIgfSwKICAgICAgICBkZXNjcmlwdGlvbjogeyB0eXBlOiBUeXBlLlNUUklORywgZGVzY3JpcHRpb246ICJBdG1vc3BoZXJpYyBob3Jyb3IgZGVzY3JpcHRpb24gb2YgdGhlIHJvb20uIE1lbnRpb24gbGlnaHRpbmcsIHNvdW5kcywgYW5kIHNtZWxscy4iIH0sCiAgICAgICAgYXRtb3NwaGVyZTogeyB0eXBlOiBUeXBlLlNUUklORywgZW51bTogWyJmb2dneSIsICJwaXRjaF9ibGFjayIsICJmbG9vZGVkIiwgInN0ZWFteSIsICJzaWxlbnQiXSB9LAogICAgICAgIGRhbmdlckxldmVsOiB7IHR5cGU6IFR5cGUuSU5URUdFUiwgZGVzY3JpcHRpb246ICIxLTEwIHNjYWxlIG9mIGhvdyBkYW5nZXJvdXMgaXQgZmVlbHMuIiB9CiAgICB9LAogICAgcmVxdWlyZWQ6IFsibmFtZSIsICJkZXNjcmlwdGlvbiIsICJhdG1vc3BoZXJlIiwgImRhbmdlckxldmVsIl0KfTsKZXhwb3J0IGNvbnN0IGdlbmVyYXRlUm9vbSA9IGFzeW5jIChkZXB0aCwgbWFwTmFtZSkgPT4gewogICAgdHJ5IHsKICAgICAgICBjb25zdCBhaSA9IGdldEFJQ2xpZW50KCk7CiAgICAgICAgaWYgKCFhaSkKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJObyBBUEkgS2V5Iik7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHsKICAgICAgICAgICAgbW9kZWw6IG1vZGVsSWQsCiAgICAgICAgICAgIGNvbnRlbnRzOiBgRGVzY3JpYmUgYSBzcGVjaWZpYyBzZWN0b3IgaW4gdGhlICcke21hcE5hbWV9JyBlbnZpcm9ubWVudC4gRGVwdGggbGV2ZWw6ICR7ZGVwdGh9LiAKICAgICAgICAgICAgICAgICBNYWtlIGl0IHNjYXJ5LCBhdG1vc3BoZXJpYywgYW5kIGZpdHRpbmcgZm9yIHRoZSBsb2NhdGlvbiAoZS5nLiwgTWluZXMgc2hvdWxkIGJlIHJvY2t5L2NsYXVzdHJvcGhvYmljLCBNYW5zaW9uIHNob3VsZCBiZSBkZWNheWluZyBlbGVnYW5jZSkuYCwKICAgICAgICAgICAgY29uZmlnOiB7CiAgICAgICAgICAgICAgICByZXNwb25zZU1pbWVUeXBlOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICByZXNwb25zZVNjaGVtYTogcm9vbVNjaGVtYSwKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZS50ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQpOwogICAgICAgIH0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIHRleHQgcmV0dXJuZWQiKTsKICAgIH0KICAgIGNhdGNoIChlKSB7CiAgICAgICAgLy8gUm9idXN0IEZhbGxiYWNrOiBSYW5kb20gZnJvbSBsaXN0CiAgICAgICAgY29uc3QgZmFsbGJhY2sgPSBGQUxMQkFDS19ST09NU1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBGQUxMQkFDS19ST09NUy5sZW5ndGgpXTsKICAgICAgICByZXR1cm4gZmFsbGJhY2s7CiAgICB9Cn07Ci8vIC0tLSBFTkNPVU5URVIgR0VORVJBVElPTiAtLS0KY29uc3QgZW5jb3VudGVyU2NoZW1hID0gewogICAgdHlwZTogVHlwZS5PQkpFQ1QsCiAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgZW50aXR5TmFtZTogeyB0eXBlOiBUeXBlLlNUUklORywgZGVzY3JpcHRpb246ICJOYW1lIG9mIHRoZSBtb25zdGVyL2hhemFyZCAoZS5nLiwgJ0JyYWNrZW4nLCAnVGh1bXBlcicsICdDb2lsLUhlYWQnKS4iIH0sCiAgICAgICAgZGVzY3JpcHRpb246IHsgdHlwZTogVHlwZS5TVFJJTkcsIGRlc2NyaXB0aW9uOiAiVGVycmlmeWluZyBkZXNjcmlwdGlvbiBvZiB0aGUgZW50aXR5IGFwcGVhcmluZyBvciBhdHRhY2tpbmcuIiB9LAogICAgICAgIGFjdGlvblJlcXVpcmVkOiB7IHR5cGU6IFR5cGUuU1RSSU5HLCBkZXNjcmlwdGlvbjogIldoYXQgdGhlIHBsYXllciBtdXN0IGRvIChlLmcuLCAnUnVuJywgJ0Rvbid0IExvb2snLCAnU3RhbmQgU3RpbGwnKS4iIH0sCiAgICAgICAgZGFtYWdlUG90ZW50aWFsOiB7IHR5cGU6IFR5cGUuSU5URUdFUiwgZGVzY3JpcHRpb246ICJEYW1hZ2UgMTAtMTAwLiIgfQogICAgfSwKICAgIHJlcXVpcmVkOiBbImVudGl0eU5hbWUiLCAiZGVzY3JpcHRpb24iLCAiYWN0aW9uUmVxdWlyZWQiLCAiZGFtYWdlUG90ZW50aWFsIl0KfTsKZXhwb3J0IGNvbnN0IGdlbmVyYXRlRW5jb3VudGVyID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgICBjb25zdCBhaSA9IGdldEFJQ2xpZW50KCk7CiAgICAgICAgaWYgKCFhaSkKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJObyBBUEkgS2V5Iik7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhaS5tb2RlbHMuZ2VuZXJhdGVDb250ZW50KHsKICAgICAgICAgICAgbW9kZWw6IG1vZGVsSWQsCiAgICAgICAgICAgIGNvbnRlbnRzOiBgR2VuZXJhdGUgYSBzdWRkZW4gaG9ycm9yIGdhbWUgbW9uc3RlciBlbmNvdW50ZXIuIFRoZSBwbGF5ZXIgaXMgdnVsbmVyYWJsZS5gLAogICAgICAgICAgICBjb25maWc6IHsKICAgICAgICAgICAgICAgIHJlc3BvbnNlTWltZVR5cGU6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgICAgIHJlc3BvbnNlU2NoZW1hOiBlbmNvdW50ZXJTY2hlbWEsCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAocmVzcG9uc2UudGV4dCkgewogICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJObyB0ZXh0IHJldHVybmVkIik7CiAgICB9CiAgICBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGVudGl0eU5hbWU6ICJTaGFkb3cgRmlndXJlIiwKICAgICAgICAgICAgZGVzY3JpcHRpb246ICJBIHNpbGhvdWV0dGUgc3RhbmRzIGF0IHRoZSBlbmQgb2YgdGhlIGhhbGwuIEl0IGJlZ2lucyB0byBzcHJpbnQgdG93YXJkcyB5b3UuIiwKICAgICAgICAgICAgYWN0aW9uUmVxdWlyZWQ6ICJSdW4gaW1tZWRpYXRlbHkuIiwKICAgICAgICAgICAgZGFtYWdlUG90ZW50aWFsOiA0MAogICAgICAgIH07CiAgICB9Cn07Cg==","@/components/Layout":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmV4cG9ydCBjb25zdCBMYXlvdXQgPSAoeyBjaGlsZHJlbiwgY2xhc3NOYW1lID0gJycsIGludGVuc2l0eSA9ICdsb3cnIH0pID0+IHsKICAgIHJldHVybiAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiBgZml4ZWQgaW5zZXQtMCB3LWZ1bGwgaC1mdWxsIGJnLWJsYWNrIG92ZXJmbG93LWhpZGRlbiBmb250LXZ0MzIzIGZsZXggZmxleC1jb2wgJHtjbGFzc05hbWV9YCwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgb3BhY2l0eS1bMC4xMl0gcG9pbnRlci1ldmVudHMtbm9uZSB6LTAgbWl4LWJsZW5kLW92ZXJsYXkiLCBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogYHVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB2aWV3Qm94PScwIDAgMjAwIDIwMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyUzRSUzQ2ZpbHRlciBpZD0nbm9pc2VGaWx0ZXInJTNFJTNDZmVUdXJidWxlbmNlIHR5cGU9J2ZyYWN0YWxOb2lzZScgYmFzZUZyZXF1ZW5jeT0nMC44JyBudW1PY3RhdmVzPSczJyBzdGl0Y2hUaWxlcz0nc3RpdGNoJy8lM0UlM0MvZmlsdGVyJTNFJTNDcmVjdCB3aWR0aD0nMTAwJTI1JyBoZWlnaHQ9JzEwMCUyNScgZmlsdGVyPSd1cmwoJTIzbm9pc2VGaWx0ZXIpJy8lM0UlM0Mvc3ZnJTNFIilgCiAgICAgICAgICAgICAgICB9IH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgcG9pbnRlci1ldmVudHMtbm9uZSB6LTEwIGJnLVtyYWRpYWwtZ3JhZGllbnQoY2lyY2xlX2F0X2NlbnRlcix0cmFuc3BhcmVudF80MCUscmdiYSgwLDAsMCwwLjkpXzkwJSldIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIHBvaW50ZXItZXZlbnRzLW5vbmUgei01MCBvcGFjaXR5LTMwIG1peC1ibGVuZC1zY3JlZW4iLCBzdHlsZTogewogICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoOTBkZWcsIHJnYmEoMjU1LDAsMCwwLjA1KSwgcmdiYSgwLDI1NSwwLDAuMDUpLCByZ2JhKDAsMCwyNTUsMC4wNSkpJywKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxLjAyKScKICAgICAgICAgICAgICAgIH0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAicmVsYXRpdmUgei0yMCBmbGV4LTEgdy1mdWxsIGZsZXggZmxleC1jb2wgbWluLWgtMCIsIGNoaWxkcmVuOiBjaGlsZHJlbiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIHBvaW50ZXItZXZlbnRzLW5vbmUgei01MCBzY2FubGluZXMgb3BhY2l0eS0zMCBtaXgtYmxlbmQtb3ZlcmxheSIgfSldIH0pKTsKfTsK","@/components/Terminal":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIG1lbW8gfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IFNvdW5kRlggfSBmcm9tICdAL3NlcnZpY2VzL2F1ZGlvRW5naW5lJzsKZXhwb3J0IGNvbnN0IFRlcm1pbmFsID0gbWVtbygoeyBzdGF0cywgbG9ncywgb25Db21tYW5kLCBvbkxhdW5jaCwgb25TZWxsLCBpc0hvc3QgPSBmYWxzZSwgb25FeGl0IH0pID0+IHsKICAgIGNvbnN0IFtpbnB1dCwgc2V0SW5wdXRdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW2lzQm9vdGluZywgc2V0SXNCb290aW5nXSA9IHVzZVN0YXRlKHRydWUpOwogICAgY29uc3QgW2Jvb3RTdGVwLCBzZXRCb290U3RlcF0gPSB1c2VTdGF0ZSgwKTsKICAgIGNvbnN0IGJvdHRvbVJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKG51bGwpOwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICAvLyBCb290IHNlcXVlbmNlCiAgICAgICAgU291bmRGWC5wbGF5VGVybWluYWxCb290KCk7CiAgICAgICAgY29uc3Qgc2VxdWVuY2UgPSBbCiAgICAgICAgICAgICgpID0+IHNldEJvb3RTdGVwKDEpLAogICAgICAgICAgICAoKSA9PiBzZXRCb290U3RlcCgyKSwKICAgICAgICAgICAgKCkgPT4gc2V0Qm9vdFN0ZXAoMyksCiAgICAgICAgICAgICgpID0+IHNldEJvb3RTdGVwKDQpLAogICAgICAgICAgICAoKSA9PiBzZXRJc0Jvb3RpbmcoZmFsc2UpCiAgICAgICAgXTsKICAgICAgICBsZXQgZGVsYXkgPSAwOwogICAgICAgIHNlcXVlbmNlLmZvckVhY2goKGZuLCBpKSA9PiB7CiAgICAgICAgICAgIGRlbGF5ICs9IChpID09PSAwID8gNTAwIDogTWF0aC5yYW5kb20oKSAqIDQwMCArIDIwMCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZm4sIGRlbGF5KTsKICAgICAgICB9KTsKICAgIH0sIFtdKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKCFpc0Jvb3RpbmcpIHsKICAgICAgICAgICAgYm90dG9tUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pOwogICAgICAgICAgICBpZiAobG9ncy5sZW5ndGggPiAwKQogICAgICAgICAgICAgICAgU291bmRGWC5wbGF5S2V5KCk7CiAgICAgICAgfQogICAgfSwgW2xvZ3MsIGlzQm9vdGluZ10pOwogICAgY29uc3QgaGFuZGxlSW5wdXQgPSAoZSkgPT4gewogICAgICAgIHNldElucHV0KGUudGFyZ2V0LnZhbHVlKTsKICAgICAgICBTb3VuZEZYLnBsYXlLZXkoKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVDb250YWluZXJDbGljayA9ICgpID0+IHsKICAgICAgICBpbnB1dFJlZi5jdXJyZW50Py5mb2N1cygpOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IChlKSA9PiB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGlmICghaW5wdXQudHJpbSgpKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgY29uc3QgY21kID0gaW5wdXQudHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgaWYgKGNtZCA9PT0gJ2V4aXQnIHx8IGNtZCA9PT0gJ3F1aXQnKSB7CiAgICAgICAgICAgIGlmIChvbkV4aXQpIHsKICAgICAgICAgICAgICAgIFNvdW5kRlgucGxheVN1Y2Nlc3MoKTsKICAgICAgICAgICAgICAgIG9uRXhpdCgpOwogICAgICAgICAgICAgICAgc2V0SW5wdXQoJycpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChjbWQgPT09ICdsYW5kJyB8fCBjbWQgPT09ICdzdGFydCcpIHsKICAgICAgICAgICAgaWYgKGlzSG9zdCkgewogICAgICAgICAgICAgICAgU291bmRGWC5wbGF5U3VjY2VzcygpOwogICAgICAgICAgICAgICAgb25Db21tYW5kKCJTWVNURU06IElOSVRJQVRJTkcgTEFORElORyBTRVFVRU5DRS4uLiIpOwogICAgICAgICAgICAgICAgLy8gU21hbGwgZGVsYXkgdG8gbGV0IHRoZSBtZXNzYWdlIHByaW50IGJlZm9yZSBzd2l0Y2hpbmcgdmlldwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBvbkxhdW5jaCgpLCA4MDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgU291bmRGWC5wbGF5RXJyb3IoKTsKICAgICAgICAgICAgICAgIG9uQ29tbWFuZCgiQUNDRVNTX0RFTklFRF9PVkVSUklERSIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gJ3NlbGwnKSB7CiAgICAgICAgICAgIFNvdW5kRlgucGxheVN1Y2Nlc3MoKTsKICAgICAgICAgICAgb25TZWxsKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBvbkNvbW1hbmQoY21kKTsKICAgICAgICAgICAgU291bmRGWC5wbGF5U3VjY2VzcygpOwogICAgICAgIH0KICAgICAgICBzZXRJbnB1dCgnJyk7CiAgICB9OwogICAgY29uc3QgaW52ZW50b3J5Q291bnRzID0gc3RhdHMuaW52ZW50b3J5LnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7CiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5uYW1lKSB7CiAgICAgICAgICAgIGFjY1tpdGVtLm5hbWVdID0gKGFjY1tpdGVtLm5hbWVdIHx8IDApICsgMTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGFjYzsKICAgIH0sIHt9KTsKICAgIGNvbnN0IHRvdGFsQ2FyZ29WYWx1ZSA9IHN0YXRzLmludmVudG9yeS5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgKGl0ZW0gPyBpdGVtLnZhbHVlIDogMCksIDApOwogICAgaWYgKGlzQm9vdGluZykgewogICAgICAgIHJldHVybiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLWZ1bGwgdy1mdWxsIGJnLWJsYWNrIHRleHQtZ3JlZW4tNjAwIGZvbnQtdnQzMjMgcC0xMCB0ZXh0LXhsIHNwYWNlLXktMiBzZWxlY3Qtbm9uZSBvdmVyZmxvdy1oaWRkZW4iLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidy1mdWxsIG1heC13LTJ4bCIsIGNoaWxkcmVuOiBbYm9vdFN0ZXAgPj0gMCAmJiBfanN4KCJkaXYiLCB7IGNoaWxkcmVuOiAiQklPUyBDSEVDSy4uLiBPSyIgfSksIGJvb3RTdGVwID49IDEgJiYgX2pzeCgiZGl2IiwgeyBjaGlsZHJlbjogIkxPQURJTkcgS0VSTkVMIE1PRFVMRVMuLi4gT0siIH0pLCBib290U3RlcCA+PSAyICYmIF9qc3goImRpdiIsIHsgY2hpbGRyZW46ICJNT1VOVElORyBGSUxFIFNZU1RFTS4uLiBPSyIgfSksIGJvb3RTdGVwID49IDMgJiYgX2pzeCgiZGl2IiwgeyBjaGlsZHJlbjogIkVTVEFCTElTSElORyBTQVRFTExJVEUgVVBMSU5LLi4uIE9LIiB9KSwgYm9vdFN0ZXAgPj0gNCAmJiBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFuaW1hdGUtcHVsc2UgdGV4dC1ncmVlbi00MDAgbXQtNCIsIGNoaWxkcmVuOiAiSU5JVElBTElaSU5HIExFVEhBTF9PUyB2Mi43Li4uIiB9KV0gfSkgfSkpOwogICAgfQogICAgcmV0dXJuIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgaC1mdWxsIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgbWQ6cC04IHctZnVsbCBiZy1ibGFjay85MCIsIG9uQ2xpY2s6IGhhbmRsZUNvbnRhaW5lckNsaWNrLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAicmVsYXRpdmUgdy1mdWxsIG1heC13LTZ4bCBhc3BlY3QtdmlkZW8gYmctWyMxMTFdIHJvdW5kZWQtM3hsIHAtNiBib3JkZXItOCBib3JkZXItWyMyMjJdIHNoYWRvdy1bMF8wXzUwcHhfcmdiYSgwLDAsMCwxKSxpbnNldF8wXzBfMjBweF9yZ2JhKDAsMCwwLDAuOCldIGZsZXggZmxleC1jb2wgb3ZlcmZsb3ctaGlkZGVuIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIHRvcC0wIGxlZnQtMCB3LWZ1bGwgaC04IGJnLWdyYWRpZW50LXRvLWIgZnJvbS13aGl0ZS8xMCB0by10cmFuc3BhcmVudCByb3VuZGVkLXQtMnhsIHBvaW50ZXItZXZlbnRzLW5vbmUgei0yMCIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgtMSBiZy1ibGFjayByb3VuZGVkLWxnIGJvcmRlci0yIGJvcmRlci1ncmVlbi05MDAvNTAgcmVsYXRpdmUgb3ZlcmZsb3ctaGlkZGVuIGZsZXggZmxleC1jb2wgc2hhZG93LVtpbnNldF8wXzBfNTBweF9yZ2JhKDAsMjU1LDAsMC4xKV0iLCBjaGlsZHJlbjogW29uRXhpdCAmJiAoX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBvbkV4aXQsIGNsYXNzTmFtZTogImFic29sdXRlIHRvcC00IHJpZ2h0LTQgdGV4dC1ncmVlbi04MDAgaG92ZXI6dGV4dC1ncmVlbi01MDAgei01MCBmb250LWJvbGQgYm9yZGVyIGJvcmRlci1ncmVlbi05MDAgYmctYmxhY2sgcHgtMyBweS0xIGhvdmVyOmJnLWdyZWVuLTkwMC8yMCIsIGNoaWxkcmVuOiAiUE9XRVIgT0ZGIiB9KSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgtMSBmbGV4IG92ZXJmbG93LWhpZGRlbiBwLTIgbWQ6cC00IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIGNydC1mbGlja2VyIHByLTQgZm9udC12dDMyMyB0ZXh0LXhsIG1kOnRleHQtMnhsIHRleHQtZ3JlZW4tNTAwIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJtYi02IGJvcmRlci1iIGJvcmRlci1ncmVlbi04MDAgcGItMiIsIGNoaWxkcmVuOiBbX2pzeCgiaDEiLCB7IGNsYXNzTmFtZTogInRleHQtNHhsIHRleHQtZ2xvdyBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IiwgY2hpbGRyZW46ICJMRVRIQUwgU0NBVkVOR0VSIE9TIHYyLjcuMCIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIG10LTIgdGV4dC1ncmVlbi03MDAgdGV4dC1sZyIsIGNoaWxkcmVuOiBbX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogc3RhdHMuc2NyYXBWYWx1ZSA+PSBzdGF0cy5xdW90YSA/ICJ0ZXh0LWdyZWVuLTMwMCBhbmltYXRlLXB1bHNlIiA6ICJ0ZXh0LXJlZC00MDAiLCBjaGlsZHJlbjogWyJRVU9UQTogIiwgc3RhdHMuc2NyYXBWYWx1ZSwgIiAvICIsIHN0YXRzLnF1b3RhXSB9KSwgX2pzeHMoInNwYW4iLCB7IGNoaWxkcmVuOiBbIkRBWTogIiwgTWF0aC5taW4oc3RhdHMuZGF5LCAzKSwgIi8zIl0gfSksIF9qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXllbGxvdy01MDAiLCBjaGlsZHJlbjogWyJTSEFSRUQgQ1JFRElUUzogIiwgc3RhdHMuc2NyYXBWYWx1ZV0gfSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0yIG1iLTQiLCBjaGlsZHJlbjogW2xvZ3MubWFwKChsb2cpID0+IChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6IGAke2xvZy5jb2xvciA/IGxvZy5jb2xvciA6ICd0ZXh0LWdyZWVuLTUwMCd9YCwgY2hpbGRyZW46IFtfanN4cygic3BhbiIsIHsgY2xhc3NOYW1lOiAib3BhY2l0eS01MCB0ZXh0LXNtIG1yLTIiLCBjaGlsZHJlbjogWyJbIiwgbG9nLnNlbmRlciwgIl0iXSB9KSwgX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46IGxvZy50ZXh0IH0pXSB9LCBsb2cuaWQpKSksIF9qc3goImRpdiIsIHsgcmVmOiBib3R0b21SZWYgfSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidy03MiBib3JkZXItbCBib3JkZXItZ3JlZW4tOTAwIGJnLWJsYWNrLzQwIHAtNCBmb250LXZ0MzIzIHRleHQtZ3JlZW4tNjAwIG92ZXJmbG93LXktYXV0byBoaWRkZW4gbWQ6ZmxleCBmbGV4LWNvbCIsIGNoaWxkcmVuOiBbX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQteGwgZm9udC1ib2xkIHRleHQtZ3JlZW4tNDAwIGJvcmRlci1iIGJvcmRlci1ncmVlbi04MDAgcGItMSBtYi0yIiwgY2hpbGRyZW46ICJDQVJHTyBNQU5JRkVTVCIgfSksIHN0YXRzLmludmVudG9yeS5sZW5ndGggPT09IDAgPyAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXNtIGl0YWxpYyBvcGFjaXR5LTUwIGZsZXgtMSIsIGNoaWxkcmVuOiAiQ0FSR08gQkFZIEVNUFRZIiB9KSkgOiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJzcGFjZS15LTEgdGV4dC1sZyBmbGV4LTEiLCBjaGlsZHJlbjogT2JqZWN0LmVudHJpZXMoaW52ZW50b3J5Q291bnRzKS5tYXAoKFtuYW1lLCBjb3VudF0pID0+IChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktYmV0d2VlbiBib3JkZXItYiBib3JkZXItZ3JlZW4tOTAwLzMwIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0cnVuY2F0ZSIsIGNoaWxkcmVuOiBuYW1lIH0pLCBfanN4cygic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1ncmVlbi00MDAiLCBjaGlsZHJlbjogWyJ4IiwgY291bnRdIH0pXSB9LCBuYW1lKSkpIH0pKSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYm9yZGVyLXQtMiBib3JkZXItZ3JlZW4tODAwIG10LTQgcHQtMiB0ZXh0LXllbGxvdy01MDAgZm9udC1ib2xkIHRleHQteGwgdGV4dC1yaWdodCIsIGNoaWxkcmVuOiBbIlZBTDogJCIsIHRvdGFsQ2FyZ29WYWx1ZV0gfSldIH0pXSB9KSwgX2pzeHMoImZvcm0iLCB7IG9uU3VibWl0OiBoYW5kbGVTdWJtaXQsIGNsYXNzTmFtZTogImJnLWdyZWVuLTkwMC8xMCBwLTQgYm9yZGVyLXQgYm9yZGVyLWdyZWVuLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC1ncmVlbi00MDAgZm9udC1ib2xkIHRleHQtMnhsIGFuaW1hdGUtcHVsc2UiLCBjaGlsZHJlbjogJz4nIH0pLCBfanN4KCJpbnB1dCIsIHsgcmVmOiBpbnB1dFJlZiwgdHlwZTogInRleHQiLCB2YWx1ZTogaW5wdXQsIG9uQ2hhbmdlOiBoYW5kbGVJbnB1dCwgY2xhc3NOYW1lOiAiZmxleC0xIGJnLXRyYW5zcGFyZW50IGJvcmRlci1ub25lIG91dGxpbmUtbm9uZSB0ZXh0LWdyZWVuLTQwMCBmb250LXZ0MzIzIHRleHQtMnhsIHVwcGVyY2FzZSBwbGFjZWhvbGRlci1ncmVlbi05MDAvNTAiLCBwbGFjZWhvbGRlcjogIkVOVEVSIENPTU1BTkQuLi4iLCBhdXRvRm9jdXM6IHRydWUsIHNwZWxsQ2hlY2s6IGZhbHNlIH0pXSB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIGJnLWdyYWRpZW50LXRvLXRyIGZyb20tdHJhbnNwYXJlbnQgdmlhLXdoaXRlLzUgdG8tdHJhbnNwYXJlbnQgcG9pbnRlci1ldmVudHMtbm9uZSB6LTEwIG9wYWNpdHktMzAiIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgc2NhbmxpbmVzIG9wYWNpdHktMzAgcG9pbnRlci1ldmVudHMtbm9uZSB6LTEwIiB9KV0gfSldIH0pIH0pKTsKfSk7Cg==","@/components/Exploration":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMsIEZyYWdtZW50IGFzIF9GcmFnbWVudCB9IGZyb20gInJlYWN0L2pzeC1ydW50aW1lIjsKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JzsKaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnOwppbXBvcnQgeyBTb3VuZEZYIH0gZnJvbSAnQC9zZXJ2aWNlcy9hdWRpb0VuZ2luZSc7CmltcG9ydCB7IGdlbmVyYXRlU2NyYXAgfSBmcm9tICdAL3NlcnZpY2VzL2dhbWVNYXN0ZXInOwppbXBvcnQgeyBjcmVhdGVTdWl0TWVzaCwgZ2VuZXJhdGVUZXh0dXJlLCBnZXRTY3JhcE1lc2gsIGNyZWF0ZVByb3BNZXNoIH0gZnJvbSAnQC9zZXJ2aWNlcy9tb2RlbEZhY3RvcnknOwppbXBvcnQgeyBIZWFydCwgWmFwLCBDaGV2cm9uTGVmdCwgQ2hldnJvblJpZ2h0LCBDaGVja1NxdWFyZSwgU2NhbiwgTWljLCBTZXR0aW5ncywgU3VuLCBNYXhpbWl6ZSB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7Ci8vIFJlbW92ZWQgbWVtbyB0byBlbnN1cmUgaW1tZWRpYXRlIFVJIHVwZGF0ZXMgZm9yIHNldHRpbmdzCmNvbnN0IEhVRCA9ICh7IGxvY2FsSGVhbHRoLCBsb2NhbFN0YW1pbmEsIGxvY2FsQmF0dGVyeSwgaXNFeGhhdXN0ZWQsIGh1ZE1lc3NhZ2UsIGRhbWFnZUZsYXNoLCBpc0RlYWQsIHBsYXllck5hbWUsIHJvb21Db2RlLCBjaGF0TWVzc2FnZXMsIHNwZWN0YXRlVGFyZ2V0SW5kZXgsIGFsaXZlUGxheWVycywgb25TcGVjdGF0ZUNoYW5nZSwgcXVvdGEsIHNjcmFwVmFsdWUsIGhvbGRpbmdWYWx1ZSwgc2NhbkNvb2xkb3duLCBjdXJyZW50Tm9pc2VMZXZlbCwgc2hvd1NldHRpbmdzLCBzZXRTaG93U2V0dGluZ3MsIGJyaWdodG5lc3MsIHNldEJyaWdodG5lc3MgfSkgPT4gewogICAgY29uc3Qgc3BlY3RhdGVkUGxheWVyID0gYWxpdmVQbGF5ZXJzLmxlbmd0aCA+IDAgPyBhbGl2ZVBsYXllcnNbTWF0aC5hYnMoc3BlY3RhdGVUYXJnZXRJbmRleCkgJSBhbGl2ZVBsYXllcnMubGVuZ3RoXSA6IG51bGw7CiAgICBjb25zdCBxdW90YU1ldCA9IHNjcmFwVmFsdWUgPj0gcXVvdGE7CiAgICBjb25zdCBjYW5TY2FuID0gc2NhbkNvb2xkb3duIDw9IDA7CiAgICByZXR1cm4gKF9qc3hzKF9GcmFnbWVudCwgeyBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBwb2ludGVyLWV2ZW50cy1ub25lIHotNDAgYmctcmVkLTYwMCB0cmFuc2l0aW9uLW9wYWNpdHkgZHVyYXRpb24tMTUwIiwgc3R5bGU6IHsgb3BhY2l0eTogZGFtYWdlRmxhc2ggKiAwLjYgfSB9KSwgc2hvd1NldHRpbmdzICYmIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibGFjay83MCBiYWNrZHJvcC1ibHVyLXNtIHBvaW50ZXItZXZlbnRzLWF1dG8iLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctYmxhY2sgYm9yZGVyLTIgYm9yZGVyLWdyZWVuLTUwMCBwLTggdy05NiBtYXgtdy1mdWxsIHNoYWRvdy1bMF8wXzUwcHhfcmdiYSgwLDI1NSwwLDAuMildIiwgb25Nb3VzZURvd246IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLCBjaGlsZHJlbjogW19qc3hzKCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JlZW4tNTAwIG1iLTYgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgYm9yZGVyLWIgYm9yZGVyLWdyZWVuLTkwMCBwYi0yIiwgY2hpbGRyZW46IFtfanN4KFNldHRpbmdzLCB7fSksICIgU1lTVEVNIENPTkZJRyJdIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJzcGFjZS15LTYiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeHMoImxhYmVsIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWdyZWVuLTQwMCBmb250LWJvbGQgbWItMiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeChTdW4sIHsgc2l6ZTogMTggfSksICIgVklTT1IgQlJJR0hUTkVTUyJdIH0pLCBfanN4KCJpbnB1dCIsIHsgdHlwZTogInJhbmdlIiwgbWluOiAiMC41IiwgbWF4OiAiNC4wIiwgc3RlcDogIjAuMSIsIHZhbHVlOiBicmlnaHRuZXNzLCBvbkNoYW5nZTogKGUpID0+IHNldEJyaWdodG5lc3MocGFyc2VGbG9hdChlLnRhcmdldC52YWx1ZSkpLCBjbGFzc05hbWU6ICJ3LWZ1bGwgYWNjZW50LWdyZWVuLTUwMCBjdXJzb3ItcG9pbnRlciBoLTIgYmctZ3JlZW4tOTAwIHJvdW5kZWQtbGcgYXBwZWFyYW5jZS1ub25lIiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyB0ZXh0LWdyZWVuLTcwMCBtdC0xIGZvbnQtbW9ubyIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46ICJMT1cgUE9XRVIiIH0pLCBfanN4cygic3BhbiIsIHsgY2hpbGRyZW46IFtNYXRoLnJvdW5kKGJyaWdodG5lc3MgKiAxMDApLCAiJSJdIH0pLCBfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogIk9WRVJEUklWRSIgfSldIH0pXSB9KSwgX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBjbGFzc05hbWU6ICJ3LWZ1bGwgcHktMyBiZy1ncmVlbi05MDAvMTAgYm9yZGVyIGJvcmRlci1ncmVlbi04MDAgdGV4dC1ncmVlbi01MDAgZm9udC1ib2xkIGhvdmVyOmJnLWdyZWVuLTUwMC8yMCBob3Zlcjp0ZXh0LWdyZWVuLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeChNYXhpbWl6ZSwgeyBzaXplOiAxOCB9KSwgIiBUT0dHTEUgRlVMTFNDUkVFTiJdIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFNob3dTZXR0aW5ncyhmYWxzZSksIGNsYXNzTmFtZTogInctZnVsbCBweS0zIGJnLWdyZWVuLTkwMC8zMCBib3JkZXIgYm9yZGVyLWdyZWVuLTYwMCB0ZXh0LWdyZWVuLTQwMCBmb250LWJvbGQgaG92ZXI6YmctZ3JlZW4tNTAwIGhvdmVyOnRleHQtYmxhY2sgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogIlJFU1VNRSBNSVNTSU9OIiB9KV0gfSldIH0pIH0pKSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCB6LTMwIHBvaW50ZXItZXZlbnRzLW5vbmUgcC00IG1kOnAtOCBmbGV4IGZsZXgtY29sIGp1c3RpZnktYmV0d2VlbiBzZWxlY3Qtbm9uZSIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJsYWNrLzgwIHAtNSBib3JkZXItbC00IGJvcmRlci1ncmVlbi05MDAgc2hhZG93LVswXzBfMjBweF8jMDAwXSBiYWNrZHJvcC1ibHVyLXNtIHRyYW5zZm9ybSBza2V3LXgtWzVkZWddIG9yaWdpbi10b3AtbGVmdCIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTN4bCBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IHRleHQtZ2xvdyB0cmFuc2Zvcm0gc2tldy14LVstNWRlZ10iLCBjaGlsZHJlbjogcGxheWVyTmFtZS50b1VwcGVyQ2FzZSgpIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIG9wYWNpdHktODAgdXBwZXJjYXNlIG10LTEgdHJhbnNmb3JtIHNrZXcteC1bLTVkZWddIiwgY2hpbGRyZW46IFsiU3RhdHVzOiAiLCBpc0RlYWQgPyAnU0lHTkFMIExPU1QnIDogJ0FDVElWRScsICIgLy8gVml0YWxzOiAiLCBsb2NhbEhlYWx0aCwgIiUiXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTQgaXRlbXMtc3RhcnQiLCBjaGlsZHJlbjogWyFpc0RlYWQgJiYgKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctYmxhY2svODAgcC00IGJvcmRlci1yLTQgYm9yZGVyLWdyZWVuLTkwMC82MCBiYWNrZHJvcC1ibHVyLXNtIHNoYWRvdy1bMF8wXzE1cHhfcmdiYSgwLDAsMCwwLjgpXSB0cmFuc2Zvcm0gc2tldy14LVstNWRlZ10gb3JpZ2luLXRvcC1yaWdodCBoaWRkZW4gbWQ6YmxvY2siLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidHJhbnNmb3JtIHNrZXcteC1bNWRlZ10iLCBjaGlsZHJlbjogW19qc3hzKCJoMyIsIHsgY2xhc3NOYW1lOiAidGV4dC1ncmVlbi02MDAgZm9udC1ib2xkIHRleHQtc20gYm9yZGVyLWIgYm9yZGVyLWdyZWVuLTkwMC81MCBtYi0yIHRleHQtcmlnaHQgdHJhY2tpbmctWzAuMmVtXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWVuZCBnYXAtMiIsIGNoaWxkcmVuOiBbIk1JU1NJT04gT0JKRUNUSVZFUyAiLCBfanN4KENoZWNrU3F1YXJlLCB7IHNpemU6IDE0IH0pXSB9KSwgX2pzeHMoInVsIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXJpZ2h0IHNwYWNlLXktMSBmb250LXZ0MzIzIHRleHQteGwiLCBjaGlsZHJlbjogW19qc3hzKCJsaSIsIHsgY2xhc3NOYW1lOiBxdW90YU1ldCA/ICJ0ZXh0LWdyZWVuLTcwMCBsaW5lLXRocm91Z2ggZGVjb3JhdGlvbi0yIiA6ICJ0ZXh0LWdyZWVuLTQwMCIsIGNoaWxkcmVuOiBbIlx1MjAyMiBNRUVUIFFVT1RBICgkIiwgc2NyYXBWYWx1ZSwgIi8kIiwgcXVvdGEsICIpIl0gfSksIF9qc3goImxpIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWdyZWVuLTUwMC84MCIsIGNoaWxkcmVuOiAiXHUyMDIyIEVYUExPUkUgU0VDVE9SIiB9KSwgaG9sZGluZ1ZhbHVlID4gMCAmJiAoX2pzeHMoImxpIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXllbGxvdy01MDAgYW5pbWF0ZS1wdWxzZSBmb250LWJvbGQgdGV4dC1nbG93IiwgY2hpbGRyZW46IFsiXHUyMDIyIFJFVFVSTiBDQVJHTyAoJCIsIGhvbGRpbmdWYWx1ZSwgIikiXSB9KSldIH0pXSB9KSB9KSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4geyBzZXRTaG93U2V0dGluZ3MoIXNob3dTZXR0aW5ncyk7IGlmIChkb2N1bWVudC5wb2ludGVyTG9ja0VsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKCk7IH0sIGNsYXNzTmFtZTogImJnLWJsYWNrLzgwIHAtMyBib3JkZXIgYm9yZGVyLWdyZWVuLTkwMCB0ZXh0LWdyZWVuLTYwMCBob3Zlcjp0ZXh0LWdyZWVuLTQwMCBob3Zlcjpib3JkZXItZ3JlZW4tNTAwIHRyYW5zaXRpb24tY29sb3JzIHBvaW50ZXItZXZlbnRzLWF1dG8gYmFja2Ryb3AtYmx1ci1zbSIsIGNoaWxkcmVuOiBfanN4KFNldHRpbmdzLCB7IHNpemU6IDI0IH0pIH0pXSB9KSwgaXNEZWFkICYmIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctYmxhY2svOTUgcC0xMCBib3JkZXItNCBib3JkZXItcmVkLTkwMCBzaGFkb3ctMnhsIHRleHQtY2VudGVyIHBvaW50ZXItZXZlbnRzLWF1dG8gYmFja2Ryb3AtYmx1ci1tZCIsIGNoaWxkcmVuOiBbX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtNnhsIGZvbnQtYm9sZCB0ZXh0LXJlZC02MDAgbWItNCBhbmltYXRlLXB1bHNlIHVwcGVyY2FzZSB0cmFja2luZy10aWdodGVyIiwgY2hpbGRyZW46ICJCaW9sb2dpY2FsIFNpZ25hbCBMb3N0IiB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTYgYmctcmVkLTk1MC8yMCBwLTQgYm9yZGVyIGJvcmRlci1yZWQtOTAwLzQwIiwgY2hpbGRyZW46IFtfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IG9uU3BlY3RhdGVDaGFuZ2UoLTEpLCBjbGFzc05hbWU6ICJob3Zlcjp0ZXh0LXdoaXRlIHRyYW5zaXRpb24tY29sb3JzIHBvaW50ZXItZXZlbnRzLWF1dG8gcC0yIiwgY2hpbGRyZW46IF9qc3goQ2hldnJvbkxlZnQsIHsgc2l6ZTogNDggfSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIG1pbi13LVsyNDBweF0iLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyB0ZXh0LXJlZC01MDAgdXBwZXJjYXNlIHRyYWNraW5nLVswLjNlbV0gZm9udC1ib2xkIG1iLTEiLCBjaGlsZHJlbjogIk9ic2VydmF0aW9uIExpbmsiIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIHVwcGVyY2FzZSIsIGNoaWxkcmVuOiBzcGVjdGF0ZWRQbGF5ZXI/Lm5hbWUgfHwgIlJFQk9PVElORy4uLiIgfSldIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IG9uU3BlY3RhdGVDaGFuZ2UoMSksIGNsYXNzTmFtZTogImhvdmVyOnRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnMgcG9pbnRlci1ldmVudHMtYXV0byBwLTIiLCBjaGlsZHJlbjogX2pzeChDaGV2cm9uUmlnaHQsIHsgc2l6ZTogNDggfSkgfSldIH0pXSB9KSB9KSldIH0pLCAhaXNEZWFkICYmIGh1ZE1lc3NhZ2UgJiYgKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgdG9wLTEvMiBsZWZ0LTEvMiAtdHJhbnNsYXRlLXgtMS8yIC10cmFuc2xhdGUteS0xLzIgdGV4dC13aGl0ZSB0ZXh0LTR4bCBmb250LWJvbGQgdHJhY2tpbmctWzAuMjVlbV0gYmctYmxhY2svOTAgcHgtMTAgcHktNiBib3JkZXItMiBib3JkZXItZ3JlZW4tNTAwLzIwIHNoYWRvdy0yeGwgYW5pbWF0ZS1wdWxzZSB1cHBlcmNhc2UgdGV4dC1jZW50ZXIgYmFja2Ryb3AtYmx1ci1zbSB6LTQwIiwgY2hpbGRyZW46IGh1ZE1lc3NhZ2UgfSkpLCAhaXNEZWFkICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSB0b3AtMi8zIGxlZnQtMS8yIC10cmFuc2xhdGUteC0xLzIgb3BhY2l0eS02MCIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiBgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwICR7Y2FuU2NhbiA/ICd0ZXh0LWdyZWVuLTUwMCcgOiAndGV4dC1yZWQtOTAwJ31gLCBjaGlsZHJlbjogW19qc3goU2NhbiwgeyBzaXplOiBjYW5TY2FuID8gMjQgOiAxOCwgY2xhc3NOYW1lOiBjYW5TY2FuID8gJ2FuaW1hdGUtcHVsc2UnIDogJycgfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQteHMgZm9udC1ib2xkIHRyYWNraW5nLXdpZGVzdCIsIGNoaWxkcmVuOiBjYW5TY2FuID8gJ1NDQU5ORVIgUkVBRFkgW1JNQl0nIDogJ1JFQ0hBUkdJTkcuLi4nIH0pXSB9KSwgIWNhblNjYW4gJiYgKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy1mdWxsIGgtMSBiZy1yZWQtOTAwLzUwIG10LTEiLCBjaGlsZHJlbjogX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJoLWZ1bGwgYmctcmVkLTYwMCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0xMDAiLCBzdHlsZTogeyB3aWR0aDogYCR7KDEgLSBzY2FuQ29vbGRvd24gLyA1KSAqIDEwMH0lYCB9IH0pIH0pKV0gfSkpLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1lbmQiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJsYWNrLzgwIHAtNiBtZDpwLTggYm9yZGVyLTIgYm9yZGVyLWdyZWVuLTkwMC80MCByb3VuZGVkLXRyLTN4bCBiYWNrZHJvcC1ibHVyLW1kIHNwYWNlLXktNCBtZDpzcGFjZS15LTYgc2hhZG93LTJ4bCB0cmFuc2Zvcm0gb3JpZ2luLWJvdHRvbS1sZWZ0IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCBtZDpnYXAtNiIsIGNoaWxkcmVuOiBbX2pzeChIZWFydCwgeyBzaXplOiAzMiwgY2xhc3NOYW1lOiBsb2NhbEhlYWx0aCA8IDMwID8gJ3RleHQtcmVkLTUwMCBhbmltYXRlLXB1bHNlJyA6ICd0ZXh0LXJlZC02MDAnIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ3LTQ4IG1kOnctNjQgaC02IGJnLXJlZC05NTAvMjAgYm9yZGVyIGJvcmRlci1yZWQtOTAwLzQwIHNoYWRvdy1pbm5lciBvdmVyZmxvdy1oaWRkZW4gcmVsYXRpdmUiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiaC1mdWxsIGJnLXJlZC02MDAgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIHNoYWRvdy1bMF8wXzE1cHhfI2YwMF0iLCBzdHlsZTogeyB3aWR0aDogYCR7TWF0aC5tYXgoMCwgbG9jYWxIZWFsdGgpfSVgIH0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBiZy1ncmFkaWVudC10by1yIGZyb20tdHJhbnNwYXJlbnQgdmlhLXdoaXRlLzEwIHRvLXRyYW5zcGFyZW50IiB9KV0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCBtZDpnYXAtNiIsIGNoaWxkcmVuOiBbX2pzeChaYXAsIHsgc2l6ZTogMzIsIGNsYXNzTmFtZTogaXNFeGhhdXN0ZWQgPyAndGV4dC15ZWxsb3ctODAwIGFuaW1hdGUtcHVsc2UnIDogJ3RleHQteWVsbG93LTUwMCcgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInctNDggbWQ6dy02NCBoLTYgYmcteWVsbG93LTk1MC8yMCBib3JkZXIgYm9yZGVyLXllbGxvdy05MDAvNDAgc2hhZG93LWlubmVyIG92ZXJmbG93LWhpZGRlbiByZWxhdGl2ZSIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6IGBoLWZ1bGwgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIHNoYWRvdy1bMF8wXzE1cHhfI2ZmMF0gJHtpc0V4aGF1c3RlZCA/ICdiZy15ZWxsb3ctOTAwJyA6ICdiZy15ZWxsb3ctNTAwJ31gLCBzdHlsZTogeyB3aWR0aDogYCR7bG9jYWxTdGFtaW5hfSVgIH0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBiZy1ncmFkaWVudC10by1yIGZyb20tdHJhbnNwYXJlbnQgdmlhLXdoaXRlLzEwIHRvLXRyYW5zcGFyZW50IiB9KV0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCBtZDpnYXAtNiIsIGNoaWxkcmVuOiBbX2pzeChNaWMsIHsgc2l6ZTogMzIsIGNsYXNzTmFtZTogY3VycmVudE5vaXNlTGV2ZWwgPiAwLjIgPyAndGV4dC1ncmVlbi0zMDAgYW5pbWF0ZS1wdWxzZScgOiAndGV4dC1ncmVlbi03MDAnIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ3LTQ4IG1kOnctNjQgaC02IGJnLWdyZWVuLTk1MC8yMCBib3JkZXIgYm9yZGVyLWdyZWVuLTkwMC80MCBzaGFkb3ctaW5uZXIgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogYGgtZnVsbCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi03NSBzaGFkb3ctWzBfMF8xMHB4XyMwZjBdIGJnLWdyZWVuLTUwMGAsIHN0eWxlOiB7IHdpZHRoOiBgJHtNYXRoLm1pbigxMDAsIGN1cnJlbnROb2lzZUxldmVsICogMTAwKX0lYCB9IH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgYmctZ3JhZGllbnQtdG8tciBmcm9tLXRyYW5zcGFyZW50IHZpYS13aGl0ZS8xMCB0by10cmFuc3BhcmVudCIgfSksIGN1cnJlbnROb2lzZUxldmVsID4gMC41ICYmIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgcmlnaHQtMiB0b3AtMCBib3R0b20tMCBmbGV4IGl0ZW1zLWNlbnRlciB0ZXh0LXhzIHRleHQtcmVkLTUwMCBmb250LWJvbGQgYW5pbWF0ZS1wdWxzZSIsIGNoaWxkcmVuOiAiTk9JU0UgSEFaQVJEIiB9KV0gfSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidy04MCBiZy1ibGFjay83MCBwLTUgYm9yZGVyLWwtMiBib3JkZXItZ3JlZW4tOTAwLzQwIHRleHQtbGcgYmFja2Ryb3AtYmx1ci1zbSBoaWRkZW4gbGc6YmxvY2siLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtZ3JlZW4tOTAwIG1iLTMgYm9yZGVyLWIgYm9yZGVyLWdyZWVuLTkwMC8yMCBwYi0xIGZsZXgganVzdGlmeS1iZXR3ZWVuIGZvbnQtbW9ubyB0ZXh0LXhzIiwgY2hpbGRyZW46IFtfanN4cygic3BhbiIsIHsgY2hpbGRyZW46IFsiRlJFUTogIiwgcm9vbUNvZGVdIH0pLCBfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogIkxJTks6IFNUQUJMRSIgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInNwYWNlLXktMSIsIGNoaWxkcmVuOiBjaGF0TWVzc2FnZXMuc2xpY2UoLTMpLm1hcCgobSkgPT4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInRydW5jYXRlIHRleHQtc20iLCBjaGlsZHJlbjogW19qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6IGAke20uaXNTeXN0ZW0gPyAndGV4dC15ZWxsb3ctNzAwJyA6ICd0ZXh0LWdyZWVuLTcwMCd9IGZvbnQtYm9sZGAsIGNoaWxkcmVuOiBbbS5zZW5kZXIsICI6Il0gfSksIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtZ3JlZW4tNDAwLzgwIG1sLTIiLCBjaGlsZHJlbjogbS50ZXh0IH0pXSB9LCBtLmlkKSkpIH0pXSB9KV0gfSldIH0pXSB9KSk7Cn07CmNvbnN0IFRJTEVfU0laRSA9IDU7CmNvbnN0IE1BUF9TSVpFID0gNjA7CmNvbnN0IGdlbmVyYXRlTGV2ZWwgPSAoKSA9PiB7CiAgICAvLyAwID0gVm9pZCwgMSA9IEZsb29yLCAyID0gV2FsbAogICAgY29uc3QgdGlsZXMgPSBBcnJheShNQVBfU0laRSkuZmlsbCgwKS5tYXAoKCkgPT4gQXJyYXkoTUFQX1NJWkUpLmZpbGwoMCkpOwogICAgY29uc3QgcHJvcHMgPSBbXTsKICAgIGNvbnN0IHZhbGlkRmxvb3JzID0gW107CiAgICBjb25zdCByb29tcyA9IFtdOwogICAgLy8gMS4gR2VuZXJhdGUgUm9vbXMKICAgIGNvbnN0IG51bVJvb21zID0gMTQ7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVJvb21zOyBpKyspIHsKICAgICAgICBjb25zdCB3ID0gNiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDgpOyAvLyA2LTEzIHdpZHRoCiAgICAgICAgY29uc3QgaCA9IDYgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KTsgLy8gNi0xMyBoZWlnaHQKICAgICAgICAvLyBLZWVwIHdpdGhpbiBib3VuZHMgd2l0aCBwYWRkaW5nCiAgICAgICAgY29uc3QgeCA9IDQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoTUFQX1NJWkUgLSB3IC0gOCkpOwogICAgICAgIGNvbnN0IHkgPSA0ICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKE1BUF9TSVpFIC0gaCAtIDgpKTsKICAgICAgICAvLyBTaW1wbGUgY29sbGlzaW9uIGNoZWNrCiAgICAgICAgbGV0IG92ZXJsYXAgPSBmYWxzZTsKICAgICAgICBmb3IgKGNvbnN0IHIgb2Ygcm9vbXMpIHsKICAgICAgICAgICAgaWYgKHggPCByLnggKyByLncgKyAyICYmIHggKyB3ICsgMiA+IHIueCAmJgogICAgICAgICAgICAgICAgeSA8IHIueSArIHIuaCArIDIgJiYgeSArIGggKyAyID4gci55KSB7CiAgICAgICAgICAgICAgICBvdmVybGFwID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghb3ZlcmxhcCkgewogICAgICAgICAgICByb29tcy5wdXNoKHsgeCwgeSwgdywgaCB9KTsKICAgICAgICAgICAgLy8gRmlsbCBSb29tIEZsb29ycwogICAgICAgICAgICBmb3IgKGxldCBpeCA9IHg7IGl4IDwgeCArIHc7IGl4KyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGl5ID0geTsgaXkgPCB5ICsgaDsgaXkrKykgewogICAgICAgICAgICAgICAgICAgIHRpbGVzW2l4XVtpeV0gPSAxOwogICAgICAgICAgICAgICAgICAgIC8vIEFkZCBwcm9wcyBpbnNpZGUgcm9vbXMKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuOTUgJiYgaXggPiB4ICsgMSAmJiBpeCA8IHggKyB3IC0gMSAmJiBpeSA+IHkgKyAxICYmIGl5IDwgeSArIGggLSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBNYXRoLnJhbmRvbSgpID4gMC42ID8gJ2NyYXRlJyA6IChNYXRoLnJhbmRvbSgpID4gMC41ID8gJ2JhcnJlbCcgOiAncGlsbGFyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzLnB1c2goeyB4OiBpeCwgeTogaXksIHR5cGU6IHR5cGUsIHJvdDogTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBBZGQgQ2VudHJhbCBMaWdodAogICAgICAgICAgICBwcm9wcy5wdXNoKHsgeDogTWF0aC5mbG9vcih4ICsgdyAvIDIpLCB5OiBNYXRoLmZsb29yKHkgKyBoIC8gMiksIHR5cGU6ICdsaWdodCcsIHJvdDogMCB9KTsKICAgICAgICB9CiAgICB9CiAgICAvLyAyLiBDb25uZWN0IFJvb21zIChHdWFyYW50ZWVkIFBhdGgpCiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJvb21zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgcjEgPSByb29tc1tpIC0gMV07CiAgICAgICAgY29uc3QgcjIgPSByb29tc1tpXTsKICAgICAgICBjb25zdCBjMSA9IHsgeDogTWF0aC5mbG9vcihyMS54ICsgcjEudyAvIDIpLCB5OiBNYXRoLmZsb29yKHIxLnkgKyByMS5oIC8gMikgfTsKICAgICAgICBjb25zdCBjMiA9IHsgeDogTWF0aC5mbG9vcihyMi54ICsgcjIudyAvIDIpLCB5OiBNYXRoLmZsb29yKHIyLnkgKyByMi5oIC8gMikgfTsKICAgICAgICBjb25zdCBzdGFydFggPSBNYXRoLm1pbihjMS54LCBjMi54KTsKICAgICAgICBjb25zdCBlbmRYID0gTWF0aC5tYXgoYzEueCwgYzIueCk7CiAgICAgICAgZm9yIChsZXQgeCA9IHN0YXJ0WDsgeCA8PSBlbmRYOyB4KyspIHsKICAgICAgICAgICAgdGlsZXNbeF1bYzEueV0gPSAxOwogICAgICAgICAgICB0aWxlc1t4XVtjMS55ICsgMV0gPSAxOwogICAgICAgICAgICBpZiAoeCAlIDYgPT09IDApCiAgICAgICAgICAgICAgICBwcm9wcy5wdXNoKHsgeDogeCwgeTogYzEueSwgdHlwZTogJ2xpZ2h0Jywgcm90OiAwIH0pOwogICAgICAgIH0KICAgICAgICBjb25zdCBzdGFydFkgPSBNYXRoLm1pbihjMS55LCBjMi55KTsKICAgICAgICBjb25zdCBlbmRZID0gTWF0aC5tYXgoYzEueSwgYzIueSk7CiAgICAgICAgZm9yIChsZXQgeSA9IHN0YXJ0WTsgeSA8PSBlbmRZOyB5KyspIHsKICAgICAgICAgICAgdGlsZXNbYzIueF1beV0gPSAxOwogICAgICAgICAgICB0aWxlc1tjMi54ICsgMV1beV0gPSAxOwogICAgICAgICAgICBpZiAoeSAlIDYgPT09IDApCiAgICAgICAgICAgICAgICBwcm9wcy5wdXNoKHsgeDogYzIueCwgeTogeSwgdHlwZTogJ2xpZ2h0Jywgcm90OiAwIH0pOwogICAgICAgIH0KICAgIH0KICAgIC8vIDMuIEdlbmVyYXRlIFdhbGxzCiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IE1BUF9TSVpFOyB4KyspIHsKICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IE1BUF9TSVpFOyB5KyspIHsKICAgICAgICAgICAgaWYgKHRpbGVzW3hdW3ldID09PSAxKSB7CiAgICAgICAgICAgICAgICB2YWxpZEZsb29ycy5wdXNoKHsgeCwgeSB9KTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGR4ID0gLTE7IGR4IDw9IDE7IGR4KyspIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBkeSA9IC0xOyBkeSA8PSAxOyBkeSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4ICsgZHggPj0gMCAmJiB4ICsgZHggPCBNQVBfU0laRSAmJiB5ICsgZHkgPj0gMCAmJiB5ICsgZHkgPCBNQVBfU0laRSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGVzW3ggKyBkeF1beSArIGR5XSA9PT0gMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlc1t4ICsgZHhdW3kgKyBkeV0gPSAyOyAvLyBNYWtlIHdhbGwKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIC8vIDQuIFByb3BzIGluIGNvcnJpZG9ycwogICAgdmFsaWRGbG9vcnMuZm9yRWFjaCh0ID0+IHsKICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuOTgpIHsKICAgICAgICAgICAgY29uc3QgdHlwZSA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyAncGlwZScgOiAndmVudCc7CiAgICAgICAgICAgIHByb3BzLnB1c2goeyB4OiB0LngsIHk6IHQueSwgdHlwZTogdHlwZSwgcm90OiB0eXBlID09PSAncGlwZScgPyBNYXRoLlBJIC8gMiA6IDAgfSk7CiAgICAgICAgfQogICAgfSk7CiAgICByZXR1cm4geyB0aWxlcywgc3RhcnRQb3M6IHJvb21zWzBdID8geyB4OiByb29tc1swXS54ICsgMiwgeTogcm9vbXNbMF0ueSArIDIgfSA6IHZhbGlkRmxvb3JzWzBdLCB2YWxpZEZsb29ycywgcHJvcHMgfTsKfTsKZXhwb3J0IGNvbnN0IEV4cGxvcmF0aW9uID0gKHByb3BzKSA9PiB7CiAgICBjb25zdCBtb3VudFJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IFtodWRNZXNzYWdlLCBzZXRIdWRNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFtsb2NhbEhlYWx0aCwgc2V0TG9jYWxIZWFsdGhdID0gdXNlU3RhdGUocHJvcHMuc3RhdHMuaGVhbHRoKTsKICAgIGNvbnN0IFtsb2NhbFN0YW1pbmEsIHNldExvY2FsU3RhbWluYV0gPSB1c2VTdGF0ZSgxMDApOwogICAgY29uc3QgW2xvY2FsQmF0dGVyeSwgc2V0TG9jYWxCYXR0ZXJ5XSA9IHVzZVN0YXRlKHByb3BzLnN0YXRzLmJhdHRlcnkpOwogICAgY29uc3QgW2lzRXhoYXVzdGVkLCBzZXRJc0V4aGF1c3RlZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbZGFtYWdlRmxhc2gsIHNldERhbWFnZUZsYXNoXSA9IHVzZVN0YXRlKDApOwogICAgY29uc3QgW2lzU2FmZSwgc2V0SXNTYWZlXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IFtpc0RlYWQsIHNldElzRGVhZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbc3BlY3RhdGVUYXJnZXRJbmRleCwgc2V0U3BlY3RhdGVUYXJnZXRJbmRleF0gPSB1c2VTdGF0ZSgwKTsKICAgIGNvbnN0IHNwZWN0YXRlVGFyZ2V0SW5kZXhSZWYgPSB1c2VSZWYoMCk7CiAgICBjb25zdCBbY3VycmVudE5vaXNlTGV2ZWwsIHNldEN1cnJlbnROb2lzZUxldmVsXSA9IHVzZVN0YXRlKDApOwogICAgY29uc3QgW3Nob3dTZXR0aW5ncywgc2V0U2hvd1NldHRpbmdzXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IFticmlnaHRuZXNzLCBzZXRCcmlnaHRuZXNzXSA9IHVzZVN0YXRlKDIuNSk7CiAgICBjb25zdCBicmlnaHRuZXNzUmVmID0gdXNlUmVmKGJyaWdodG5lc3MpOwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBicmlnaHRuZXNzUmVmLmN1cnJlbnQgPSBicmlnaHRuZXNzOwogICAgICAgIGlmIChzY2VuZVJlZi5jdXJyZW50KSB7CiAgICAgICAgICAgIGNvbnN0IGFtYiA9IHNjZW5lUmVmLmN1cnJlbnQuY2hpbGRyZW4uZmluZChjID0+IGMudHlwZSA9PT0gJ0FtYmllbnRMaWdodCcpOwogICAgICAgICAgICBpZiAoYW1iKQogICAgICAgICAgICAgICAgYW1iLmludGVuc2l0eSA9IDEuMCAqIGJyaWdodG5lc3M7CiAgICAgICAgfQogICAgfSwgW2JyaWdodG5lc3NdKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgc3BlY3RhdGVUYXJnZXRJbmRleFJlZi5jdXJyZW50ID0gc3BlY3RhdGVUYXJnZXRJbmRleDsKICAgIH0sIFtzcGVjdGF0ZVRhcmdldEluZGV4XSk7CiAgICBjb25zdCBbY3VycmVudEhvbGRpbmdWYWx1ZSwgc2V0Q3VycmVudEhvbGRpbmdWYWx1ZV0gPSB1c2VTdGF0ZSgwKTsKICAgIGNvbnN0IFtzY2FuQ29vbGRvd24sIHNldFNjYW5Db29sZG93bl0gPSB1c2VTdGF0ZSgwKTsKICAgIGNvbnN0IGhlYWx0aFJlZiA9IHVzZVJlZihwcm9wcy5zdGF0cy5oZWFsdGgpOwogICAgY29uc3Qgc3RhbWluYVJlZiA9IHVzZVJlZigxMDApOwogICAgY29uc3QgYmF0dGVyeVJlZiA9IHVzZVJlZihwcm9wcy5zdGF0cy5iYXR0ZXJ5KTsKICAgIGNvbnN0IGlzRXhoYXVzdGVkUmVmID0gdXNlUmVmKGZhbHNlKTsKICAgIGNvbnN0IGlzRGVhZExvY2FsUmVmID0gdXNlUmVmKGZhbHNlKTsKICAgIGNvbnN0IGlzRmxhc2hsaWdodE9uUmVmID0gdXNlUmVmKHRydWUpOwogICAgY29uc3Qgc2NhbkNvb2xkb3duUmVmID0gdXNlUmVmKDApOwogICAgY29uc3QgaXNTY2FubmluZ1JlZiA9IHVzZVJlZihmYWxzZSk7CiAgICBjb25zdCBzY2FuU3RhcnRUaW1lUmVmID0gdXNlUmVmKDApOwogICAgY29uc3QgbGFzdE5ldHdvcmtSZXBvcnRUaW1lID0gdXNlUmVmKDApOwogICAgY29uc3QgaHVkTWVzc2FnZVJlZiA9IHVzZVJlZignJyk7CiAgICBjb25zdCBzY2VuZVJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IGNhbWVyYVJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IHBsYXllclJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IHNwb3RMaWdodFJlZiA9IHVzZVJlZihudWxsKTsKICAgIC8vIHBvaW50TGlnaHQgcmVtb3ZlZCBmcm9tIHJlZnMgZm9yIG9wdGltaXphdGlvbgogICAgY29uc3QgbWFwUmVmID0gdXNlUmVmKG51bGwpOwogICAgY29uc3QgZW5lbXlNZXNoZXNSZWYgPSB1c2VSZWYoW10pOwogICAgY29uc3Qgc2NyYXBNZXNoZXNSZWYgPSB1c2VSZWYoW10pOwogICAgY29uc3QgcGVlck1lc2hlc1JlZiA9IHVzZVJlZihuZXcgTWFwKCkpOwogICAgY29uc3QgcmVtb3RlUGxheWVyQXVkaW9TdGF0ZSA9IHVzZVJlZihuZXcgTWFwKCkpOwogICAgY29uc3QgZW52TGlnaHRzUmVmID0gdXNlUmVmKFtdKTsgLy8gRHluYW1pYyBMaWdodCBDdWxsaW5nCiAgICBjb25zdCB2ZWMzUG9vbCA9IHVzZVJlZih7CiAgICAgICAgZGlyOiBuZXcgVEhSRUUuVmVjdG9yMygpLAogICAgICAgIG1vdmVTdGVwOiBuZXcgVEhSRUUuVmVjdG9yMygpLAogICAgICAgIG5leHRQb3M6IG5ldyBUSFJFRS5WZWN0b3IzKCksCiAgICAgICAgYXhpczogbmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCksCiAgICAgICAgdGVtcDogbmV3IFRIUkVFLlZlY3RvcjMoKSwKICAgICAgICB0ZW1wMjogbmV3IFRIUkVFLlZlY3RvcjMoKQogICAgfSk7CiAgICBjb25zdCBtb3ZlU3RhdGUgPSB1c2VSZWYoeyBmb3J3YXJkOiBmYWxzZSwgYmFja3dhcmQ6IGZhbHNlLCBsZWZ0OiBmYWxzZSwgcmlnaHQ6IGZhbHNlLCBqdW1wOiBmYWxzZSwgc3ByaW50OiBmYWxzZSB9KTsKICAgIGNvbnN0IHZlbG9jaXR5ID0gdXNlUmVmKG5ldyBUSFJFRS5WZWN0b3IzKCkpOwogICAgY29uc3QgaXNHcm91bmRlZCA9IHVzZVJlZih0cnVlKTsKICAgIGNvbnN0IGludmVudG9yeVJlZiA9IHVzZVJlZihbXSk7CiAgICBjb25zdCBpbnRlcmFjdFJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IHlhd1JlZiA9IHVzZVJlZigwKTsKICAgIGNvbnN0IHBpdGNoUmVmID0gdXNlUmVmKDApOwogICAgY29uc3Qgbm9pc2VMZXZlbCA9IHVzZVJlZigwKTsKICAgIGNvbnN0IGxhc3ROb2lzZVRpbWUgPSB1c2VSZWYoMCk7CiAgICBjb25zdCBib2JiaW5nVGltZSA9IHVzZVJlZigwKTsKICAgIGNvbnN0IGZyYW1lQ291bnRSZWYgPSB1c2VSZWYoMCk7CiAgICBjb25zdCB0YWtlRGFtYWdlID0gKGFtb3VudCkgPT4gewogICAgICAgIGlmIChpc0RlYWRMb2NhbFJlZi5jdXJyZW50IHx8IGlzU2FmZSkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGhlYWx0aFJlZi5jdXJyZW50ID0gTWF0aC5tYXgoMCwgaGVhbHRoUmVmLmN1cnJlbnQgLSBhbW91bnQpOwogICAgICAgIGNvbnN0IHJvdW5kZWRIZWFsdGggPSBNYXRoLmZsb29yKGhlYWx0aFJlZi5jdXJyZW50KTsKICAgICAgICBpZiAocm91bmRlZEhlYWx0aCAhPT0gbG9jYWxIZWFsdGgpCiAgICAgICAgICAgIHNldExvY2FsSGVhbHRoKHJvdW5kZWRIZWFsdGgpOwogICAgICAgIHNldERhbWFnZUZsYXNoKDEuMCk7CiAgICAgICAgcHJvcHMub25SZXBvcnRIZWFsdGgoaGVhbHRoUmVmLmN1cnJlbnQpOwogICAgICAgIFNvdW5kRlgucGxheUVycm9yKCk7CiAgICAgICAgaWYgKGhlYWx0aFJlZi5jdXJyZW50IDw9IDApIHsKICAgICAgICAgICAgaXNEZWFkTG9jYWxSZWYuY3VycmVudCA9IHRydWU7CiAgICAgICAgICAgIHNldElzRGVhZCh0cnVlKTsKICAgICAgICAgICAgcHJvcHMub25EZWF0aCgpOwogICAgICAgICAgICBzZXRIdWRNZXNzYWdlKCJTSUdOQUwgTE9TVCIpOwogICAgICAgICAgICBTb3VuZEZYLnBsYXlBbGFybSgpOwogICAgICAgICAgICBpZiAoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50ID09PSBtb3VudFJlZi5jdXJyZW50KQogICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uID0gKHBvcykgPT4gewogICAgICAgIGlmICghbWFwUmVmLmN1cnJlbnQpCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAvLyBTaW1wbGUgcG9pbnQgY2hlY2sgZmlyc3QKICAgICAgICBjb25zdCBncmlkWCA9IE1hdGgucm91bmQoKHBvcy54IC8gVElMRV9TSVpFKSArIE1BUF9TSVpFIC8gMik7CiAgICAgICAgY29uc3QgZ3JpZFkgPSBNYXRoLnJvdW5kKChwb3MueiAvIFRJTEVfU0laRSkgKyBNQVBfU0laRSAvIDIpOwogICAgICAgIGlmIChncmlkWCA8IDAgfHwgZ3JpZFggPj0gTUFQX1NJWkUgfHwgZ3JpZFkgPCAwIHx8IGdyaWRZID49IE1BUF9TSVpFKQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICBpZiAobWFwUmVmLmN1cnJlbnQudGlsZXNbZ3JpZFhdW2dyaWRZXSAhPT0gMSkKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgLy8gQnVmZmVyIGNoZWNrIGZvciBjb3JuZXJzIHRvIHByZXZlbnQgd2FsbCBjbGlwcGluZwogICAgICAgIGNvbnN0IGJ1ZmZlciA9IDEuMDsKICAgICAgICBjb25zdCBjb3JuZXJzID0gWwogICAgICAgICAgICB7IHg6IHBvcy54ICsgYnVmZmVyLCB6OiBwb3MueiArIGJ1ZmZlciB9LAogICAgICAgICAgICB7IHg6IHBvcy54IC0gYnVmZmVyLCB6OiBwb3MueiArIGJ1ZmZlciB9LAogICAgICAgICAgICB7IHg6IHBvcy54ICsgYnVmZmVyLCB6OiBwb3MueiAtIGJ1ZmZlciB9LAogICAgICAgICAgICB7IHg6IHBvcy54IC0gYnVmZmVyLCB6OiBwb3MueiAtIGJ1ZmZlciB9CiAgICAgICAgXTsKICAgICAgICBmb3IgKGNvbnN0IHAgb2YgY29ybmVycykgewogICAgICAgICAgICBjb25zdCBjeCA9IE1hdGgucm91bmQoKHAueCAvIFRJTEVfU0laRSkgKyBNQVBfU0laRSAvIDIpOwogICAgICAgICAgICBjb25zdCBjeSA9IE1hdGgucm91bmQoKHAueiAvIFRJTEVfU0laRSkgKyBNQVBfU0laRSAvIDIpOwogICAgICAgICAgICBpZiAoY3ggPj0gMCAmJiBjeCA8IE1BUF9TSVpFICYmIGN5ID49IDAgJiYgY3kgPCBNQVBfU0laRSkgewogICAgICAgICAgICAgICAgaWYgKG1hcFJlZi5jdXJyZW50LnRpbGVzW2N4XVtjeV0gPT09IDIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEhpdCBhIHdhbGwKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgY29uc3QgcGVyZm9ybVNjYW4gPSAoKSA9PiB7CiAgICAgICAgaWYgKGlzRGVhZExvY2FsUmVmLmN1cnJlbnQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoc2NhbkNvb2xkb3duUmVmLmN1cnJlbnQgPiAwKSB7CiAgICAgICAgICAgIFNvdW5kRlgucGxheUVycm9yKCk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgU291bmRGWC5wbGF5U2NhbigpOwogICAgICAgIGlzU2Nhbm5pbmdSZWYuY3VycmVudCA9IHRydWU7CiAgICAgICAgc2NhblN0YXJ0VGltZVJlZi5jdXJyZW50ID0gRGF0ZS5ub3coKTsKICAgICAgICBzY2FuQ29vbGRvd25SZWYuY3VycmVudCA9IDU7CiAgICAgICAgc2V0U2NhbkNvb2xkb3duKDUpOwogICAgfTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgY29uc3QgaHVtID0gU291bmRGWC5zdGFydEFtYmllbnRIdW0oKTsKICAgICAgICBTb3VuZEZYLmluaXRNaWMoKTsKICAgICAgICBjb25zdCBhbWJpZW5jZUludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNykgewogICAgICAgICAgICAgICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCk7CiAgICAgICAgICAgICAgICBpZiAociA+IDAuNikKICAgICAgICAgICAgICAgICAgICBTb3VuZEZYLnBsYXlEcmlwKCk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgU291bmRGWC5wbGF5Q3JlYWsoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sIDQwMDApOwogICAgICAgIHJldHVybiAoKSA9PiB7CiAgICAgICAgICAgIGlmIChodW0pCiAgICAgICAgICAgICAgICBodW0uc3RvcCgpOwogICAgICAgICAgICBjbGVhckludGVydmFsKGFtYmllbmNlSW50ZXJ2YWwpOwogICAgICAgIH07CiAgICB9LCBbXSk7CiAgICBjb25zdCBoYW5kbGVJbnRlcmFjdCA9ICgpID0+IHsKICAgICAgICBpZiAoaW50ZXJhY3RSZWYuY3VycmVudCkgewogICAgICAgICAgICBjb25zdCBpZHggPSBzY3JhcE1lc2hlc1JlZi5jdXJyZW50LmZpbmRJbmRleChvID0+IG8udXNlckRhdGEuaWQgPT09IGludGVyYWN0UmVmLmN1cnJlbnQpOwogICAgICAgICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgY29uc3QgbyA9IHNjcmFwTWVzaGVzUmVmLmN1cnJlbnRbaWR4XTsKICAgICAgICAgICAgICAgIGludmVudG9yeVJlZi5jdXJyZW50LnB1c2goby51c2VyRGF0YS5kYXRhKTsKICAgICAgICAgICAgICAgIHNldEN1cnJlbnRIb2xkaW5nVmFsdWUocHJldiA9PiBwcmV2ICsgby51c2VyRGF0YS5kYXRhLnZhbHVlKTsKICAgICAgICAgICAgICAgIHByb3BzLm9uVXBkYXRlSW52ZW50b3J5KGludmVudG9yeVJlZi5jdXJyZW50KTsKICAgICAgICAgICAgICAgIHNjZW5lUmVmLmN1cnJlbnQ/LnJlbW92ZShvKTsKICAgICAgICAgICAgICAgIHNjcmFwTWVzaGVzUmVmLmN1cnJlbnQuc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgICAgICAgICBTb3VuZEZYLnBsYXlTdWNjZXNzKCk7CiAgICAgICAgICAgICAgICBpbnRlcmFjdFJlZi5jdXJyZW50ID0gbnVsbDsKICAgICAgICAgICAgICAgIGh1ZE1lc3NhZ2VSZWYuY3VycmVudCA9ICcnOwogICAgICAgICAgICAgICAgc2V0SHVkTWVzc2FnZSgnJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICBpZiAoIW1vdW50UmVmLmN1cnJlbnQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpOwogICAgICAgIHNjZW5lUmVmLmN1cnJlbnQgPSBzY2VuZTsKICAgICAgICBjb25zdCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMCk7CiAgICAgICAgLy8gQ2FtZXJhIGlzIE5PVCBhZGRlZCB0byBzY2VuZSBkaXJlY3RseSBhbnltb3JlLCBpdCdzIGFkZGVkIHRvIHBsYXllclJlZgogICAgICAgIGNhbWVyYVJlZi5jdXJyZW50ID0gY2FtZXJhOwogICAgICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IGZhbHNlLCBwb3dlclByZWZlcmVuY2U6ICdoaWdoLXBlcmZvcm1hbmNlJywgcHJlY2lzaW9uOiAnbWVkaXVtcCcgfSk7CiAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTsKICAgICAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKE1hdGgubWluKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLCAxLjApKTsgLy8gU3RyaWN0IDEuMHggY2FwIGZvciA2MEZQUwogICAgICAgIHJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gdHJ1ZTsKICAgICAgICByZW5kZXJlci5zaGFkb3dNYXAudHlwZSA9IFRIUkVFLkJhc2ljU2hhZG93TWFwOyAvLyBGYXN0ZXN0IHNoYWRvd3MsIGdpdmVzIHJldHJvIGxvb2sKICAgICAgICByZW5kZXJlci5vdXRwdXRDb2xvclNwYWNlID0gVEhSRUUuU1JHQkNvbG9yU3BhY2U7CiAgICAgICAgbW91bnRSZWYuY3VycmVudC5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTsKICAgICAgICBzY2VuZS5hZGQobmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDIyMjIyMiwgMS4wICogYnJpZ2h0bmVzc1JlZi5jdXJyZW50KSk7CiAgICAgICAgY29uc3QgbWFwRGF0YSA9IGdlbmVyYXRlTGV2ZWwoKTsKICAgICAgICBtYXBSZWYuY3VycmVudCA9IG1hcERhdGE7CiAgICAgICAgY29uc3Qgd2FsbE1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgICAgICAgICAgIG1hcDogZ2VuZXJhdGVUZXh0dXJlKCdjb25jcmV0ZScpLAogICAgICAgICAgICByb3VnaG5lc3M6IDAuOSwKICAgICAgICAgICAgYnVtcE1hcDogZ2VuZXJhdGVUZXh0dXJlKCdjb25jcmV0ZScpLAogICAgICAgICAgICBidW1wU2NhbGU6IDAuMSwKICAgICAgICAgICAgY29sb3I6IDB4ODg4ODg4CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgZmxvb3JNYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoewogICAgICAgICAgICBtYXA6IGdlbmVyYXRlVGV4dHVyZSgnZmxvb3InKSwKICAgICAgICAgICAgcm91Z2huZXNzOiAwLjcsCiAgICAgICAgICAgIG1ldGFsbmVzczogMC4zCiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgcGlwZU1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgICAgICAgICAgIG1hcDogZ2VuZXJhdGVUZXh0dXJlKCdydXN0JyksCiAgICAgICAgICAgIHJvdWdobmVzczogMC42LAogICAgICAgICAgICBtZXRhbG5lc3M6IDAuNwogICAgICAgIH0pOwogICAgICAgIC8vIC0tLSBPUFRJTUlaRUQgTUFQIFJFTkRFUklORyAoSU5TVEFOQ0VEKSAtLS0KICAgICAgICBjb25zdCBNQVhfSU5TVEFOQ0VTID0gTUFQX1NJWkUgKiBNQVBfU0laRTsKICAgICAgICBjb25zdCBmbG9vck1lc2ggPSBuZXcgVEhSRUUuSW5zdGFuY2VkTWVzaChuZXcgVEhSRUUuQm94R2VvbWV0cnkoVElMRV9TSVpFLCAwLjIsIFRJTEVfU0laRSksIGZsb29yTWF0LCBNQVhfSU5TVEFOQ0VTKTsKICAgICAgICBmbG9vck1lc2gucmVjZWl2ZVNoYWRvdyA9IHRydWU7CiAgICAgICAgY29uc3QgY2VpbGluZ01lc2ggPSBuZXcgVEhSRUUuSW5zdGFuY2VkTWVzaChuZXcgVEhSRUUuQm94R2VvbWV0cnkoVElMRV9TSVpFLCAwLjIsIFRJTEVfU0laRSksIHdhbGxNYXQsIE1BWF9JTlNUQU5DRVMpOwogICAgICAgIC8vIENlaWxpbmdzIGdlbmVyYWxseSBkb24ndCBuZWVkIHRvIGNhc3QvcmVjZWl2ZSBoaWdoIGZpZGVsaXR5IHNoYWRvd3MgaW4gdG9wLWRvd24gbG9naWMsIGJ1dCBoZXJlIGluc2lkZSByb29tcyB0aGV5IG1pZ2h0LgogICAgICAgIGNvbnN0IHdhbGxNZXNoID0gbmV3IFRIUkVFLkluc3RhbmNlZE1lc2gobmV3IFRIUkVFLkJveEdlb21ldHJ5KFRJTEVfU0laRSwgNiwgVElMRV9TSVpFKSwgd2FsbE1hdCwgTUFYX0lOU1RBTkNFUyk7CiAgICAgICAgd2FsbE1lc2guY2FzdFNoYWRvdyA9IHRydWU7CiAgICAgICAgd2FsbE1lc2gucmVjZWl2ZVNoYWRvdyA9IHRydWU7CiAgICAgICAgbGV0IGZsb29yQ291bnQgPSAwOwogICAgICAgIGxldCBjZWlsaW5nQ291bnQgPSAwOwogICAgICAgIGxldCB3YWxsQ291bnQgPSAwOwogICAgICAgIGNvbnN0IGR1bW15ID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7CiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCBNQVBfU0laRTsgeCsrKQogICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IE1BUF9TSVpFOyB5KyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IHBvc1ggPSAoeCAtIE1BUF9TSVpFIC8gMikgKiBUSUxFX1NJWkUsIHBvc1ogPSAoeSAtIE1BUF9TSVpFIC8gMikgKiBUSUxFX1NJWkU7CiAgICAgICAgICAgICAgICBpZiAobWFwRGF0YS50aWxlc1t4XVt5XSA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgIC8vIEZsb29yCiAgICAgICAgICAgICAgICAgICAgZHVtbXkucG9zaXRpb24uc2V0KHBvc1gsIDAsIHBvc1opOwogICAgICAgICAgICAgICAgICAgIGR1bW15LnJvdGF0aW9uLnNldCgwLCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICBkdW1teS51cGRhdGVNYXRyaXgoKTsKICAgICAgICAgICAgICAgICAgICBmbG9vck1lc2guc2V0TWF0cml4QXQoZmxvb3JDb3VudCsrLCBkdW1teS5tYXRyaXgpOwogICAgICAgICAgICAgICAgICAgIC8vIENlaWxpbmcKICAgICAgICAgICAgICAgICAgICBkdW1teS5wb3NpdGlvbi5zZXQocG9zWCwgNiwgcG9zWik7CiAgICAgICAgICAgICAgICAgICAgZHVtbXkudXBkYXRlTWF0cml4KCk7CiAgICAgICAgICAgICAgICAgICAgY2VpbGluZ01lc2guc2V0TWF0cml4QXQoY2VpbGluZ0NvdW50KyssIGR1bW15Lm1hdHJpeCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChtYXBEYXRhLnRpbGVzW3hdW3ldID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gV2FsbAogICAgICAgICAgICAgICAgICAgIGR1bW15LnBvc2l0aW9uLnNldChwb3NYLCAzLCBwb3NaKTsKICAgICAgICAgICAgICAgICAgICBkdW1teS5yb3RhdGlvbi5zZXQoMCwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgZHVtbXkudXBkYXRlTWF0cml4KCk7CiAgICAgICAgICAgICAgICAgICAgd2FsbE1lc2guc2V0TWF0cml4QXQod2FsbENvdW50KyssIGR1bW15Lm1hdHJpeCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCBwaXBlcyBzZXBhcmF0ZSBmb3Igbm93IGFzIHRoZXkgaGF2ZSByYW5kb20gcm90YXRpb24vb2Zmc2V0cwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaXBlID0gbmV3IFRIUkVFLk1lc2gobmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMC4zLCAwLjMsIDYsIDgpLCBwaXBlTWF0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcGlwZS5wb3NpdGlvbi5zZXQocG9zWCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIsIDMsIHBvc1ogKyAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBpcGUucG9zaXRpb24ueCAtIHBvc1gpID4gMS41KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZS5yb3RhdGlvbi56ID0gTWF0aC5QSSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmFkZChwaXBlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICBmbG9vck1lc2guY291bnQgPSBmbG9vckNvdW50OwogICAgICAgIGNlaWxpbmdNZXNoLmNvdW50ID0gY2VpbGluZ0NvdW50OwogICAgICAgIHdhbGxNZXNoLmNvdW50ID0gd2FsbENvdW50OwogICAgICAgIHNjZW5lLmFkZChmbG9vck1lc2gpOwogICAgICAgIHNjZW5lLmFkZChjZWlsaW5nTWVzaCk7CiAgICAgICAgc2NlbmUuYWRkKHdhbGxNZXNoKTsKICAgICAgICBtYXBEYXRhLnByb3BzLmZvckVhY2gocHJvcCA9PiB7CiAgICAgICAgICAgIGlmIChwcm9wLnR5cGUgPT09ICdsaWdodCcpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGwgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweGZmYWE1NSwgMS41LCAxMik7CiAgICAgICAgICAgICAgICBsLnBvc2l0aW9uLnNldCgocHJvcC54IC0gTUFQX1NJWkUgLyAyKSAqIFRJTEVfU0laRSwgNS41LCAocHJvcC55IC0gTUFQX1NJWkUgLyAyKSAqIFRJTEVfU0laRSk7CiAgICAgICAgICAgICAgICBzY2VuZS5hZGQobCk7CiAgICAgICAgICAgICAgICBlbnZMaWdodHNSZWYuY3VycmVudC5wdXNoKGwpOyAvLyBUcmFjayBmb3IgY3VsbGluZwogICAgICAgICAgICAgICAgY29uc3QgZml4dHVyZSA9IG5ldyBUSFJFRS5NZXNoKG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDAuNSwgMC41LCAwLjIpLCBuZXcgVEhSRUUuTWVzaEJhc2ljTWF0ZXJpYWwoeyBjb2xvcjogMHhmZmFhNTUgfSkpOwogICAgICAgICAgICAgICAgZml4dHVyZS5wb3NpdGlvbi5jb3B5KGwucG9zaXRpb24pOwogICAgICAgICAgICAgICAgc2NlbmUuYWRkKGZpeHR1cmUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IGNyZWF0ZVByb3BNZXNoKHByb3AudHlwZSk7CiAgICAgICAgICAgICAgICBtZXNoLnBvc2l0aW9uLnNldCgocHJvcC54IC0gTUFQX1NJWkUgLyAyKSAqIFRJTEVfU0laRSwgMC41LCAocHJvcC55IC0gTUFQX1NJWkUgLyAyKSAqIFRJTEVfU0laRSk7CiAgICAgICAgICAgICAgICBpZiAocHJvcC50eXBlID09PSAncGlsbGFyJykKICAgICAgICAgICAgICAgICAgICBtZXNoLnBvc2l0aW9uLnkgPSAzOwogICAgICAgICAgICAgICAgZWxzZSBpZiAocHJvcC50eXBlID09PSAndmVudCcpCiAgICAgICAgICAgICAgICAgICAgbWVzaC5wb3NpdGlvbi55ID0gMTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3AudHlwZSA9PT0gJ3BpcGUnKQogICAgICAgICAgICAgICAgICAgIG1lc2gucG9zaXRpb24ueSA9IDAuMzsKICAgICAgICAgICAgICAgIG1lc2gucm90YXRpb24ueSA9IHByb3Aucm90OwogICAgICAgICAgICAgICAgc2NlbmUuYWRkKG1lc2gpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc3Qgc3RhcnRYID0gKG1hcERhdGEuc3RhcnRQb3MueCAtIE1BUF9TSVpFIC8gMikgKiBUSUxFX1NJWkU7CiAgICAgICAgY29uc3Qgc3RhcnRaID0gKG1hcERhdGEuc3RhcnRQb3MueSAtIE1BUF9TSVpFIC8gMikgKiBUSUxFX1NJWkU7CiAgICAgICAgcGxheWVyUmVmLmN1cnJlbnQgPSBuZXcgVEhSRUUuR3JvdXAoKTsKICAgICAgICAvLyBTdGFydCBzbGlnaHRseSBhYm92ZSBmbG9vci4gRmxvb3IgaXMgYXQgMC4xLCBmZWV0IGFyZSBhdCAwLgogICAgICAgIHBsYXllclJlZi5jdXJyZW50LnBvc2l0aW9uLnNldChzdGFydFgsIDEuMCwgc3RhcnRaKTsKICAgICAgICBzY2VuZS5hZGQocGxheWVyUmVmLmN1cnJlbnQpOwogICAgICAgIC8vIEFUVEFDSCBDQU1FUkEgVE8gUExBWUVSIC0gQ1JJVElDQUwgRklYCiAgICAgICAgLy8gQ2FtZXJhIGJlY29tZXMgY2hpbGQgb2YgcGxheWVyIGdyb3VwLCBzaW11bGF0aW5nIEV5ZSBQb3NpdGlvbgogICAgICAgIHBsYXllclJlZi5jdXJyZW50LmFkZChjYW1lcmEpOwogICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMS42LCAwKTsgLy8gRXllIGhlaWdodAogICAgICAgIC8vIEFUVEFDSCBGTEFTSExJR0hUIFRPIENBTUVSQQogICAgICAgIGNvbnN0IGZsYXNoTGlnaHQgPSBuZXcgVEhSRUUuU3BvdExpZ2h0KDB4ZmZmZmVlLCAzMDAuMCwgODAsIE1hdGguUEkgLyA0LCAwLjUsIDEuNSk7CiAgICAgICAgZmxhc2hMaWdodC5jYXN0U2hhZG93ID0gdHJ1ZTsKICAgICAgICBmbGFzaExpZ2h0LnNoYWRvdy5tYXBTaXplLndpZHRoID0gMjU2OyAvLyBPcHRpbWl6YXRpb24KICAgICAgICBmbGFzaExpZ2h0LnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IDI1NjsgLy8gT3B0aW1pemF0aW9uCiAgICAgICAgZmxhc2hMaWdodC5zaGFkb3cuYmlhcyA9IC0wLjAwMDE7CiAgICAgICAgY29uc3QgbGlnaHRUYXJnZXQgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTsKICAgICAgICBsaWdodFRhcmdldC5wb3NpdGlvbi5zZXQoMCwgMCwgLTEwKTsKICAgICAgICBjYW1lcmEuYWRkKGZsYXNoTGlnaHQpOwogICAgICAgIGNhbWVyYS5hZGQobGlnaHRUYXJnZXQpOwogICAgICAgIGZsYXNoTGlnaHQudGFyZ2V0ID0gbGlnaHRUYXJnZXQ7CiAgICAgICAgc3BvdExpZ2h0UmVmLmN1cnJlbnQgPSBmbGFzaExpZ2h0OwogICAgICAgIC8vIERpc2FibGVkIGV4dHJhIHBvaW50IGxpZ2h0IGZvciBwZXJmb3JtYW5jZSwgYW1iaWVudCArIGZsYXNobGlnaHQgaXMgZW5vdWdoCiAgICAgICAgKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTsgaSsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBnZW5lcmF0ZWREYXRhID0gYXdhaXQgZ2VuZXJhdGVTY3JhcChwcm9wcy5zdGF0cy5kYXkpOwogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsgLi4uZ2VuZXJhdGVkRGF0YSwgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCkgfTsKICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBtYXBEYXRhLnZhbGlkRmxvb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1hcERhdGEudmFsaWRGbG9vcnMubGVuZ3RoKV07CiAgICAgICAgICAgICAgICBjb25zdCBnID0gZ2V0U2NyYXBNZXNoKGRhdGEpOwogICAgICAgICAgICAgICAgZy5wb3NpdGlvbi5zZXQoKHQueCAtIE1BUF9TSVpFIC8gMikgKiBUSUxFX1NJWkUsIDAuMiwgKHQueSAtIE1BUF9TSVpFIC8gMikgKiBUSUxFX1NJWkUpOwogICAgICAgICAgICAgICAgZy51c2VyRGF0YSA9IHsgdHlwZTogJ1NDUkFQJywgZGF0YSwgaWQ6IGRhdGEuaWQgfTsKICAgICAgICAgICAgICAgIGcucm90YXRpb24uc2V0KE1hdGgucmFuZG9tKCkgKiAwLjUsIE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMiwgTWF0aC5yYW5kb20oKSAqIDAuNSk7CiAgICAgICAgICAgICAgICBzY2VuZS5hZGQoZyk7CiAgICAgICAgICAgICAgICBzY3JhcE1lc2hlc1JlZi5jdXJyZW50LnB1c2goZyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KSgpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICBsZXQgdGlsZSwgc3Bhd25Qb3MgPSBuZXcgVEhSRUUuVmVjdG9yMygpLCBhdHRlbXB0cyA9IDA7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIHRpbGUgPSBtYXBEYXRhLnZhbGlkRmxvb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1hcERhdGEudmFsaWRGbG9vcnMubGVuZ3RoKV07CiAgICAgICAgICAgICAgICBzcGF3blBvcy5zZXQoKHRpbGUueCAtIE1BUF9TSVpFIC8gMikgKiBUSUxFX1NJWkUsIDAsICh0aWxlLnkgLSBNQVBfU0laRSAvIDIpICogVElMRV9TSVpFKTsKICAgICAgICAgICAgICAgIGF0dGVtcHRzKys7CiAgICAgICAgICAgIH0gd2hpbGUgKHNwYXduUG9zLmRpc3RhbmNlVG8obmV3IFRIUkVFLlZlY3RvcjMoc3RhcnRYLCAwLCBzdGFydFopKSA8IDI1ICYmIGF0dGVtcHRzIDwgNTApOwogICAgICAgICAgICBjb25zdCBlID0gY3JlYXRlU3VpdE1lc2goJ0NyYXdsZXInLCAnI2ZmMDAwMCcsICcjMDAwMDAwJyk7CiAgICAgICAgICAgIGUucG9zaXRpb24uY29weShzcGF3blBvcyk7CiAgICAgICAgICAgIGUudXNlckRhdGEgPSB7IHR5cGU6ICdFTkVNWScsIHN0YXRlOiAnSURMRScsIHNwZWVkOiA2LCBkYW1hZ2U6IDQwLCB0YXJnZXRQb3M6IGUucG9zaXRpb24uY2xvbmUoKSwgbmV4dEFjdGlvblRpbWU6IDAsIGF0dGFja1RpbWVyOiAwLCBsYXN0QXR0YWNrVGltZTogMCB9OwogICAgICAgICAgICBzY2VuZS5hZGQoZSk7CiAgICAgICAgICAgIGVuZW15TWVzaGVzUmVmLmN1cnJlbnQucHVzaChlKTsKICAgICAgICB9CiAgICAgICAgY29uc3Qgb25LZXlEb3duID0gKGUpID0+IHsKICAgICAgICAgICAgaWYgKGlzRGVhZExvY2FsUmVmLmN1cnJlbnQgfHwgaXNTYWZlKQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBzd2l0Y2ggKGUuY29kZSkgewogICAgICAgICAgICAgICAgY2FzZSAnS2V5Vyc6CiAgICAgICAgICAgICAgICAgICAgbW92ZVN0YXRlLmN1cnJlbnQuZm9yd2FyZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdLZXlTJzoKICAgICAgICAgICAgICAgICAgICBtb3ZlU3RhdGUuY3VycmVudC5iYWNrd2FyZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdLZXlBJzoKICAgICAgICAgICAgICAgICAgICBtb3ZlU3RhdGUuY3VycmVudC5sZWZ0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ0tleUQnOgogICAgICAgICAgICAgICAgICAgIG1vdmVTdGF0ZS5jdXJyZW50LnJpZ2h0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ1NwYWNlJzoKICAgICAgICAgICAgICAgICAgICBtb3ZlU3RhdGUuY3VycmVudC5qdW1wID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ1NoaWZ0TGVmdCc6CiAgICAgICAgICAgICAgICAgICAgbW92ZVN0YXRlLmN1cnJlbnQuc3ByaW50ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ0tleUUnOgogICAgICAgICAgICAgICAgICAgIGhhbmRsZUludGVyYWN0KCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdLZXlGJzoKICAgICAgICAgICAgICAgICAgICBpc0ZsYXNobGlnaHRPblJlZi5jdXJyZW50ID0gIWlzRmxhc2hsaWdodE9uUmVmLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICAgICAgU291bmRGWC5wbGF5S2V5KCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGNvbnN0IG9uS2V5VXAgPSAoZSkgPT4gewogICAgICAgICAgICBzd2l0Y2ggKGUuY29kZSkgewogICAgICAgICAgICAgICAgY2FzZSAnS2V5Vyc6CiAgICAgICAgICAgICAgICAgICAgbW92ZVN0YXRlLmN1cnJlbnQuZm9yd2FyZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnS2V5Uyc6CiAgICAgICAgICAgICAgICAgICAgbW92ZVN0YXRlLmN1cnJlbnQuYmFja3dhcmQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ0tleUEnOgogICAgICAgICAgICAgICAgICAgIG1vdmVTdGF0ZS5jdXJyZW50LmxlZnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ0tleUQnOgogICAgICAgICAgICAgICAgICAgIG1vdmVTdGF0ZS5jdXJyZW50LnJpZ2h0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdTaGlmdExlZnQnOgogICAgICAgICAgICAgICAgICAgIG1vdmVTdGF0ZS5jdXJyZW50LnNwcmludCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnU3BhY2UnOgogICAgICAgICAgICAgICAgICAgIG1vdmVTdGF0ZS5jdXJyZW50Lmp1bXAgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAoZSkgPT4geyBpZiAoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50ID09PSBtb3VudFJlZi5jdXJyZW50ICYmICFpc0RlYWRMb2NhbFJlZi5jdXJyZW50ICYmICFpc1NhZmUpIHsKICAgICAgICAgICAgeWF3UmVmLmN1cnJlbnQgLT0gZS5tb3ZlbWVudFggKiAwLjAwMjsKICAgICAgICAgICAgcGl0Y2hSZWYuY3VycmVudCA9IE1hdGgubWF4KC0xLjQsIE1hdGgubWluKDEuNCwgcGl0Y2hSZWYuY3VycmVudCAtIGUubW92ZW1lbnRZICogMC4wMDIpKTsKICAgICAgICB9IH07CiAgICAgICAgY29uc3Qgb25Nb3VzZURvd24gPSAoZSkgPT4gewogICAgICAgICAgICBpZiAoIWlzRGVhZExvY2FsUmVmLmN1cnJlbnQgJiYgIWlzU2FmZSAmJiBkb2N1bWVudC5wb2ludGVyTG9ja0VsZW1lbnQgPT09IG1vdW50UmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMikKICAgICAgICAgICAgICAgICAgICBwZXJmb3JtU2NhbigpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93bik7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgb25LZXlVcCk7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpOwogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duKTsKICAgICAgICBjb25zdCBlbCA9IG1vdW50UmVmLmN1cnJlbnQ7CiAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKCFpc0RlYWRMb2NhbFJlZi5jdXJyZW50ICYmICFpc1NhZmUgJiYgIXNob3dTZXR0aW5ncykgewogICAgICAgICAgICAgICAgICAgIGVsLnJlcXVlc3RQb2ludGVyTG9jaygpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgIGVsLmZvY3VzKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpOwogICAgICAgIH0KICAgICAgICBsZXQgYW5pbUlkID0gMDsKICAgICAgICBjb25zdCBjbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpOwogICAgICAgIGNvbnN0IHJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTsKICAgICAgICBjb25zdCBhbmltYXRlID0gKCkgPT4gewogICAgICAgICAgICBhbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7CiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5taW4oY2xvY2suZ2V0RGVsdGEoKSwgMC4xKTsKICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgZnJhbWVDb3VudFJlZi5jdXJyZW50Kys7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCcmlnaHRuZXNzID0gYnJpZ2h0bmVzc1JlZi5jdXJyZW50OwogICAgICAgICAgICBpZiAoZGFtYWdlRmxhc2ggPiAwKQogICAgICAgICAgICAgICAgc2V0RGFtYWdlRmxhc2gocHJldiA9PiBNYXRoLm1heCgwLCBwcmV2IC0gZGVsdGEgKiAxLjgpKTsKICAgICAgICAgICAgaWYgKHNjYW5Db29sZG93blJlZi5jdXJyZW50ID4gMCkgewogICAgICAgICAgICAgICAgc2NhbkNvb2xkb3duUmVmLmN1cnJlbnQgPSBNYXRoLm1heCgwLCBzY2FuQ29vbGRvd25SZWYuY3VycmVudCAtIGRlbHRhKTsKICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhzY2FuQ29vbGRvd25SZWYuY3VycmVudCAtIE1hdGguZmxvb3Ioc2NhbkNvb2xkb3duUmVmLmN1cnJlbnQpKSA8IDAuMSB8fCBzY2FuQ29vbGRvd25SZWYuY3VycmVudCA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0U2NhbkNvb2xkb3duKHNjYW5Db29sZG93blJlZi5jdXJyZW50KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocGxheWVyUmVmLmN1cnJlbnQgJiYgIWlzRGVhZExvY2FsUmVmLmN1cnJlbnQgJiYgIWlzU2FmZSkgewogICAgICAgICAgICAgICAgY29uc3QgaXNNb3ZpbmcgPSBtb3ZlU3RhdGUuY3VycmVudC5mb3J3YXJkIHx8IG1vdmVTdGF0ZS5jdXJyZW50LmJhY2t3YXJkIHx8IG1vdmVTdGF0ZS5jdXJyZW50LmxlZnQgfHwgbW92ZVN0YXRlLmN1cnJlbnQucmlnaHQ7CiAgICAgICAgICAgICAgICBpZiAoZnJhbWVDb3VudFJlZi5jdXJyZW50ICUgMyA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIFNvdW5kRlguc2V0TGlzdGVuZXJQb3NpdGlvbihwbGF5ZXJSZWYuY3VycmVudC5wb3NpdGlvbi54LCBwbGF5ZXJSZWYuY3VycmVudC5wb3NpdGlvbi55ICsgMS42LCBwbGF5ZXJSZWYuY3VycmVudC5wb3NpdGlvbi56LCB5YXdSZWYuY3VycmVudCwgcGl0Y2hSZWYuY3VycmVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBQRUVSIFJFTkRFUklORyBMT0dJQwogICAgICAgICAgICAgICAgcHJvcHMucGxheWVyVXBkYXRlc1JlZi5jdXJyZW50LmZvckVhY2gocCA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHAuaWQgPT09IHByb3BzLnBsYXllcklkKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaWYgKHAuaXNEZWFkIHx8IHAuaXNFeGl0ZWQgfHwgIXAucG9zaXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBlZXJNZXNoZXNSZWYuY3VycmVudC5oYXMocC5pZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IHBlZXJNZXNoZXNSZWYuY3VycmVudC5nZXQocC5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVSZWYuY3VycmVudD8ucmVtb3ZlKG9iai5ncm91cCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5mbGFzaGxpZ2h0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2VuZVJlZi5jdXJyZW50Py5yZW1vdmUob2JqLmZsYXNobGlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVlck1lc2hlc1JlZi5jdXJyZW50LmRlbGV0ZShwLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCBwZWVyT2JqID0gcGVlck1lc2hlc1JlZi5jdXJyZW50LmdldChwLmlkKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXBlZXJPYmopIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IGNyZWF0ZVN1aXRNZXNoKHAuaXNQaGFudG9tID8gJ1BoYW50b20nIDogJ1BsYXllcicsIHAuY29sb3IsIHAuc2Vjb25kYXJ5Q29sb3IsIHAuaXNQaGFudG9tLCBwLmJvZHlUeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVSZWYuY3VycmVudD8uYWRkKG1lc2gpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmbCA9IG5ldyBUSFJFRS5TcG90TGlnaHQoMHhmZmZmZWUsIDgwLjAsIDQwLCBNYXRoLlBJIC8gNiwgMC41LCAxLjUpOwogICAgICAgICAgICAgICAgICAgICAgICBmbC5jYXN0U2hhZG93ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZmwuc2hhZG93Lm1hcFNpemUud2lkdGggPSAyNTY7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsLnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IDI1NjsKICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVSZWYuY3VycmVudD8uYWRkKGZsKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVSZWYuY3VycmVudD8uYWRkKGZsLnRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJPYmogPSB7IGdyb3VwOiBtZXNoLCBwcmV2UG9zOiBuZXcgVEhSRUUuVmVjdG9yMyhwLnBvc2l0aW9uLngsIHAucG9zaXRpb24ueSwgcC5wb3NpdGlvbi56KSwgZmxhc2hsaWdodDogZmwgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcGVlck1lc2hlc1JlZi5jdXJyZW50LnNldChwLmlkLCBwZWVyT2JqKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBvcyA9IHZlYzNQb29sLmN1cnJlbnQudGVtcC5zZXQocC5wb3NpdGlvbi54LCBwLnBvc2l0aW9uLnksIHAucG9zaXRpb24ueik7CiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3RlIHBvc2l0aW9uIGlzIGZlZXQgcG9zaXRpb24gbm93LCBzbyBtZXNoIGdvZXMgZGlyZWN0bHkgdGhlcmUKICAgICAgICAgICAgICAgICAgICBwZWVyT2JqLmdyb3VwLnBvc2l0aW9uLmxlcnAoY3VycmVudFBvcywgMC4yKTsKICAgICAgICAgICAgICAgICAgICBwZWVyT2JqLmdyb3VwLnJvdGF0aW9uLnkgPSBwLnJvdGF0aW9uIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZFkgPSBwZWVyT2JqLmdyb3VwLnBvc2l0aW9uLnkgKyAxLjY7CiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIFJlbW90ZSBGbGFzaGxpZ2h0CiAgICAgICAgICAgICAgICAgICAgaWYgKHBlZXJPYmouZmxhc2hsaWdodCkgewogICAgICAgICAgICAgICAgICAgICAgICBwZWVyT2JqLmZsYXNobGlnaHQudmlzaWJsZSA9ICEhcC5pc0ZsYXNobGlnaHRPbjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAuaXNGbGFzaGxpZ2h0T24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJPYmouZmxhc2hsaWdodC5wb3NpdGlvbi5zZXQocGVlck9iai5ncm91cC5wb3NpdGlvbi54LCBoZWFkWSwgcGVlck9iai5ncm91cC5wb3NpdGlvbi56KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBZYXcgPSBwLnJvdGF0aW9uIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwUGl0Y2ggPSBwLnJvdGF0aW9uUGl0Y2ggfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvb2tYID0gLU1hdGguc2luKHBZYXcpICogTWF0aC5jb3MocFBpdGNoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvb2tZID0gTWF0aC5zaW4ocFBpdGNoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvb2taID0gLU1hdGguY29zKHBZYXcpICogTWF0aC5jb3MocFBpdGNoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlZXJPYmouZmxhc2hsaWdodC50YXJnZXQucG9zaXRpb24uc2V0KHBlZXJPYmouZ3JvdXAucG9zaXRpb24ueCArIGxvb2tYICogNSwgaGVhZFkgKyBsb29rWSAqIDUsIHBlZXJPYmouZ3JvdXAucG9zaXRpb24ueiArIGxvb2taICogNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWVyT2JqLmZsYXNobGlnaHQudGFyZ2V0LnVwZGF0ZU1hdHJpeFdvcmxkKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZWVyT2JqLmZsYXNobGlnaHQuaW50ZW5zaXR5ID0gMjUwICogY3VycmVudEJyaWdodG5lc3M7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IGF1ZGlvU3RhdGUgPSByZW1vdGVQbGF5ZXJBdWRpb1N0YXRlLmN1cnJlbnQuZ2V0KHAuaWQpOwogICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW9TdGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBhdWRpb1N0YXRlID0geyBsYXN0UG9zOiBjdXJyZW50UG9zLmNsb25lKCksIGxhc3RTdGVwVGltZTogbm93IH07CiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVBsYXllckF1ZGlvU3RhdGUuY3VycmVudC5zZXQocC5pZCwgYXVkaW9TdGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3RNb3ZlZCA9IGN1cnJlbnRQb3MuZGlzdGFuY2VUbyhhdWRpb1N0YXRlLmxhc3RQb3MpOwogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0TW92ZWQgPiAwLjUgJiYgbm93IC0gYXVkaW9TdGF0ZS5sYXN0U3RlcFRpbWUgPiA0MDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgU291bmRGWC5wbGF5M0RTdGVwKGN1cnJlbnRQb3MueCwgY3VycmVudFBvcy55LCBjdXJyZW50UG9zLnosIDEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9TdGF0ZS5sYXN0U3RlcFRpbWUgPSBub3c7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGF1ZGlvU3RhdGUubGFzdFBvcy5jb3B5KGN1cnJlbnRQb3MpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyAtLS0gRFlOQU1JQyBMSUdIVCBDVUxMSU5HIC0tLQogICAgICAgICAgICAgICAgaWYgKGZyYW1lQ291bnRSZWYuY3VycmVudCAlIDE1ID09PSAwKSB7IC8vIENoZWNrIGV2ZXJ5IDE1IGZyYW1lcyB0byByZWR1Y2Ugb3ZlcmhlYWQKICAgICAgICAgICAgICAgICAgICBjb25zdCBwUG9zID0gcGxheWVyUmVmLmN1cnJlbnQucG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgZW52TGlnaHRzUmVmLmN1cnJlbnQuZm9yRWFjaChsaWdodCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBkaXN0YW5jZSBjaGVjawogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0U3EgPSAobGlnaHQucG9zaXRpb24ueCAtIHBQb3MueCkgKiogMiArIChsaWdodC5wb3NpdGlvbi56IC0gcFBvcy56KSAqKiAyOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBWaXNpYmxlIGlmIHdpdGhpbiB+MjUgdW5pdHMgKDI1KjI1ID0gNjI1KQogICAgICAgICAgICAgICAgICAgICAgICBsaWdodC52aXNpYmxlID0gZGlzdFNxIDwgNjI1OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGZyYW1lQ291bnRSZWYuY3VycmVudCAlIDEwID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWljTGV2ZWwgPSBTb3VuZEZYLmdldE5vaXNlTGV2ZWwoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobWljTGV2ZWwgLSBub2lzZUxldmVsLmN1cnJlbnQpID4gMC4wNSkgewogICAgICAgICAgICAgICAgICAgICAgICBub2lzZUxldmVsLmN1cnJlbnQgPSBtaWNMZXZlbDsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudE5vaXNlTGV2ZWwobWljTGV2ZWwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCBiYXR0ZXJ5RHJhaW4gPSAwOwogICAgICAgICAgICAgICAgaWYgKGlzRmxhc2hsaWdodE9uUmVmLmN1cnJlbnQgJiYgYmF0dGVyeVJlZi5jdXJyZW50ID4gMCkKICAgICAgICAgICAgICAgICAgICBiYXR0ZXJ5RHJhaW4gKz0gZGVsdGEgKiAyLjA7CiAgICAgICAgICAgICAgICBpZiAoaXNNb3ZpbmcpCiAgICAgICAgICAgICAgICAgICAgYmF0dGVyeURyYWluICs9IGRlbHRhICogMC41OwogICAgICAgICAgICAgICAgYmF0dGVyeVJlZi5jdXJyZW50ID0gTWF0aC5tYXgoMCwgYmF0dGVyeVJlZi5jdXJyZW50IC0gYmF0dGVyeURyYWluKTsKICAgICAgICAgICAgICAgIGlmIChzcG90TGlnaHRSZWYuY3VycmVudCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc1Bvd2VyID0gYmF0dGVyeVJlZi5jdXJyZW50ID4gMDsKICAgICAgICAgICAgICAgICAgICBzcG90TGlnaHRSZWYuY3VycmVudC5pbnRlbnNpdHkgPSAoaXNGbGFzaGxpZ2h0T25SZWYuY3VycmVudCAmJiBoYXNQb3dlcikgPyAzMDAuMCAqIGN1cnJlbnRCcmlnaHRuZXNzIDogMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IHJvdW5kZWRCYXR0ZXJ5ID0gTWF0aC5mbG9vcihiYXR0ZXJ5UmVmLmN1cnJlbnQpOwogICAgICAgICAgICAgICAgaWYgKHJvdW5kZWRCYXR0ZXJ5ICE9PSBsb2NhbEJhdHRlcnkpIHsKICAgICAgICAgICAgICAgICAgICBzZXRMb2NhbEJhdHRlcnkocm91bmRlZEJhdHRlcnkpOwogICAgICAgICAgICAgICAgICAgIHByb3BzLm9uUmVwb3J0QmF0dGVyeShyb3VuZGVkQmF0dGVyeSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoc3RhbWluYVJlZi5jdXJyZW50IDw9IDApIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRXhoYXVzdGVkUmVmLmN1cnJlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgIHNldElzRXhoYXVzdGVkKHRydWUpOwogICAgICAgICAgICAgICAgICAgIGlzRXhoYXVzdGVkUmVmLmN1cnJlbnQgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHN0YW1pbmFSZWYuY3VycmVudCA+PSAxNSkgewogICAgICAgICAgICAgICAgICAgIGlmIChpc0V4aGF1c3RlZFJlZi5jdXJyZW50KQogICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0V4aGF1c3RlZChmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgaXNFeGhhdXN0ZWRSZWYuY3VycmVudCA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgaXNTcHJpbnRpbmcgPSBpc01vdmluZyAmJiBtb3ZlU3RhdGUuY3VycmVudC5zcHJpbnQgJiYgc3RhbWluYVJlZi5jdXJyZW50ID4gMC4xICYmICFpc0V4aGF1c3RlZFJlZi5jdXJyZW50OwogICAgICAgICAgICAgICAgaWYgKGlzU3ByaW50aW5nKQogICAgICAgICAgICAgICAgICAgIHN0YW1pbmFSZWYuY3VycmVudCA9IE1hdGgubWF4KDAsIHN0YW1pbmFSZWYuY3VycmVudCAtIGRlbHRhICogNDUpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHN0YW1pbmFSZWYuY3VycmVudCA9IE1hdGgubWluKDEwMCwgc3RhbWluYVJlZi5jdXJyZW50ICsgZGVsdGEgKiAyNSk7CiAgICAgICAgICAgICAgICBjb25zdCByb3VuZGVkU3RhbSA9IE1hdGguZmxvb3Ioc3RhbWluYVJlZi5jdXJyZW50KTsKICAgICAgICAgICAgICAgIGlmIChyb3VuZGVkU3RhbSAhPT0gbG9jYWxTdGFtaW5hKQogICAgICAgICAgICAgICAgICAgIHNldExvY2FsU3RhbWluYShyb3VuZGVkU3RhbSk7CiAgICAgICAgICAgICAgICBpZiAoaXNNb3ZpbmcgJiYgaXNHcm91bmRlZC5jdXJyZW50ICYmIG5vdyAtIGxhc3ROb2lzZVRpbWUuY3VycmVudCA+IChpc1NwcmludGluZyA/IDIyMCA6IDQ1MCkpIHsKICAgICAgICAgICAgICAgICAgICBTb3VuZEZYLnBsYXlTdGVwKGlzU3ByaW50aW5nID8gMjAgOiAxMCk7CiAgICAgICAgICAgICAgICAgICAgbGFzdE5vaXNlVGltZS5jdXJyZW50ID0gbm93OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSBpc1NwcmludGluZyA/IDEzIDogODsKICAgICAgICAgICAgICAgIGNvbnN0IGRpciA9IHZlYzNQb29sLmN1cnJlbnQuZGlyLnNldCgwLCAwLCAwKTsKICAgICAgICAgICAgICAgIGRpci56ID0gTnVtYmVyKG1vdmVTdGF0ZS5jdXJyZW50LmJhY2t3YXJkKSAtIE51bWJlcihtb3ZlU3RhdGUuY3VycmVudC5mb3J3YXJkKTsKICAgICAgICAgICAgICAgIGRpci54ID0gTnVtYmVyKG1vdmVTdGF0ZS5jdXJyZW50LnJpZ2h0KSAtIE51bWJlcihtb3ZlU3RhdGUuY3VycmVudC5sZWZ0KTsKICAgICAgICAgICAgICAgIGlmIChkaXIubGVuZ3RoU3EoKSA+IDApCiAgICAgICAgICAgICAgICAgICAgZGlyLmFwcGx5QXhpc0FuZ2xlKHZlYzNQb29sLmN1cnJlbnQuYXhpcywgeWF3UmVmLmN1cnJlbnQpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgICAgdmVsb2NpdHkuY3VycmVudC55IC09IDM1ICogZGVsdGE7CiAgICAgICAgICAgICAgICBpZiAobW92ZVN0YXRlLmN1cnJlbnQuanVtcCAmJiBpc0dyb3VuZGVkLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgICAgICB2ZWxvY2l0eS5jdXJyZW50LnkgPSAxMjsKICAgICAgICAgICAgICAgICAgICBpc0dyb3VuZGVkLmN1cnJlbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBTb3VuZEZYLnBsYXlKdW1wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gdmVjM1Bvb2wuY3VycmVudC5tb3ZlU3RlcC5jb3B5KGRpcikubXVsdGlwbHlTY2FsYXIoc3BlZWQgKiBkZWx0YSk7CiAgICAgICAgICAgICAgICBjb25zdCBuZXh0WCA9IHZlYzNQb29sLmN1cnJlbnQubmV4dFBvcy5jb3B5KHBsYXllclJlZi5jdXJyZW50LnBvc2l0aW9uKS5hZGQodmVjM1Bvb2wuY3VycmVudC50ZW1wLnNldChzdGVwLngsIDAsIDApKTsKICAgICAgICAgICAgICAgIGlmICghY2hlY2tDb2xsaXNpb24obmV4dFgpKQogICAgICAgICAgICAgICAgICAgIHBsYXllclJlZi5jdXJyZW50LnBvc2l0aW9uLnggPSBuZXh0WC54OwogICAgICAgICAgICAgICAgY29uc3QgbmV4dFogPSB2ZWMzUG9vbC5jdXJyZW50Lm5leHRQb3MuY29weShwbGF5ZXJSZWYuY3VycmVudC5wb3NpdGlvbikuYWRkKHZlYzNQb29sLmN1cnJlbnQudGVtcC5zZXQoMCwgMCwgc3RlcC56KSk7CiAgICAgICAgICAgICAgICBpZiAoIWNoZWNrQ29sbGlzaW9uKG5leHRaKSkKICAgICAgICAgICAgICAgICAgICBwbGF5ZXJSZWYuY3VycmVudC5wb3NpdGlvbi56ID0gbmV4dFouejsKICAgICAgICAgICAgICAgIHBsYXllclJlZi5jdXJyZW50LnBvc2l0aW9uLnkgKz0gdmVsb2NpdHkuY3VycmVudC55ICogZGVsdGE7CiAgICAgICAgICAgICAgICAvLyBGRUVUIENPTExJU0lPTiBQSFlTSUNTIChHcm91bmQgTGV2ZWwgaXMgMC4yLCB0b3Agb2YgZmxvb3IpCiAgICAgICAgICAgICAgICBpZiAocGxheWVyUmVmLmN1cnJlbnQucG9zaXRpb24ueSA8IDAuMikgewogICAgICAgICAgICAgICAgICAgIGlmICghaXNHcm91bmRlZC5jdXJyZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzR3JvdW5kZWQuY3VycmVudCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIFNvdW5kRlgucGxheUxhbmQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcGxheWVyUmVmLmN1cnJlbnQucG9zaXRpb24ueSA9IDAuMjsKICAgICAgICAgICAgICAgICAgICB2ZWxvY2l0eS5jdXJyZW50LnkgPSAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGlzTW92aW5nICYmIGlzR3JvdW5kZWQuY3VycmVudCkgewogICAgICAgICAgICAgICAgICAgIGJvYmJpbmdUaW1lLmN1cnJlbnQgKz0gZGVsdGEgKiAoaXNTcHJpbnRpbmcgPyAyMCA6IDE0KTsKICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcmVsYXRpdmUgY2FtZXJhIHBvc2l0aW9uIChFeWUgaGVpZ2h0IDEuNiArIGJvYikKICAgICAgICAgICAgICAgICAgICBjYW1lcmFSZWYuY3VycmVudC5wb3NpdGlvbi55ID0gMS42ICsgTWF0aC5zaW4oYm9iYmluZ1RpbWUuY3VycmVudCkgKiAwLjE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYW1lcmFSZWYuY3VycmVudC5wb3NpdGlvbi55ID0gVEhSRUUuTWF0aFV0aWxzLmxlcnAoY2FtZXJhUmVmLmN1cnJlbnQucG9zaXRpb24ueSwgMS42LCBkZWx0YSAqIDEwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhbWVyYVJlZi5jdXJyZW50LnJvdGF0aW9uLm9yZGVyID0gJ1lYWic7CiAgICAgICAgICAgICAgICBjYW1lcmFSZWYuY3VycmVudC5yb3RhdGlvbi55ID0geWF3UmVmLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICBjYW1lcmFSZWYuY3VycmVudC5yb3RhdGlvbi54ID0gcGl0Y2hSZWYuY3VycmVudDsKICAgICAgICAgICAgICAgIC8vIFJlcG9ydCBGRUVUIHBvc2l0aW9uIHRvIG5ldHdvcmsKICAgICAgICAgICAgICAgIGlmIChub3cgLSBsYXN0TmV0d29ya1JlcG9ydFRpbWUuY3VycmVudCA+IDMzKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvcHMub25SZXBvcnRQb3NpdGlvbihwbGF5ZXJSZWYuY3VycmVudC5wb3NpdGlvbi54LCBwbGF5ZXJSZWYuY3VycmVudC5wb3NpdGlvbi55LCBwbGF5ZXJSZWYuY3VycmVudC5wb3NpdGlvbi56LCB5YXdSZWYuY3VycmVudCwgcGl0Y2hSZWYuY3VycmVudCwgbm9pc2VMZXZlbC5jdXJyZW50LCBpc0ZsYXNobGlnaHRPblJlZi5jdXJyZW50KTsKICAgICAgICAgICAgICAgICAgICBsYXN0TmV0d29ya1JlcG9ydFRpbWUuY3VycmVudCA9IG5vdzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChmcmFtZUNvdW50UmVmLmN1cnJlbnQgJSA1ID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgcmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobmV3IFRIUkVFLlZlY3RvcjIoMCwgMCksIGNhbWVyYVJlZi5jdXJyZW50KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlcnNlY3RzID0gcmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoc2NyYXBNZXNoZXNSZWYuY3VycmVudCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdHMubGVuZ3RoID4gMCAmJiBpbnRlcnNlY3RzWzBdLmRpc3RhbmNlIDwgMykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmogPSBpbnRlcnNlY3RzWzBdLm9iamVjdC5wYXJlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmogJiYgb2JqLnVzZXJEYXRhLnR5cGUgPT09ICdTQ1JBUCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcmFjdFJlZi5jdXJyZW50ICE9PSBvYmoudXNlckRhdGEuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdFJlZi5jdXJyZW50ID0gb2JqLnVzZXJEYXRhLmlkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IGBbRV0gVEFLRSAke29iai51c2VyRGF0YS5kYXRhLm5hbWUudG9VcHBlckNhc2UoKX0gKCQke29iai51c2VyRGF0YS5kYXRhLnZhbHVlfSlgOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh1ZE1lc3NhZ2VSZWYuY3VycmVudCA9IG1zZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRIdWRNZXNzYWdlKG1zZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcmFjdFJlZi5jdXJyZW50IHx8IGh1ZE1lc3NhZ2VSZWYuY3VycmVudCAhPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVyYWN0UmVmLmN1cnJlbnQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHVkTWVzc2FnZVJlZi5jdXJyZW50ID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRIdWRNZXNzYWdlKCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChpc0RlYWRMb2NhbFJlZi5jdXJyZW50KSB7CiAgICAgICAgICAgICAgICBjb25zdCBhbGl2ZSA9IHByb3BzLnBsYXllclVwZGF0ZXNSZWYuY3VycmVudC5maWx0ZXIocCA9PiAhcC5pc0RlYWQgJiYgcC5pZCAhPT0gcHJvcHMucGxheWVySWQpOwogICAgICAgICAgICAgICAgaWYgKGFsaXZlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBhbGl2ZVtNYXRoLmFicyhzcGVjdGF0ZVRhcmdldEluZGV4UmVmLmN1cnJlbnQpICUgYWxpdmUubGVuZ3RoXTsKICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldC5wb3NpdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBTcGVjdGF0ZSBjYW1lcmEgbWF0aCB1cGRhdGVkIGZvciBGZWV0IHBvc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYVJlZi5jdXJyZW50LnBvc2l0aW9uLnNldCh0YXJnZXQucG9zaXRpb24ueCwgdGFyZ2V0LnBvc2l0aW9uLnkgKyAxLjYsIHRhcmdldC5wb3NpdGlvbi56KTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhUmVmLmN1cnJlbnQubG9va0F0KHRhcmdldC5wb3NpdGlvbi54IC0gTWF0aC5zaW4odGFyZ2V0LnJvdGF0aW9uIHx8IDApICogNSwgdGFyZ2V0LnBvc2l0aW9uLnkgKyAxLjYsIHRhcmdldC5wb3NpdGlvbi56IC0gTWF0aC5jb3ModGFyZ2V0LnJvdGF0aW9uIHx8IDApICogNSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc1NjYW5uaW5nUmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTaW5jZVNjYW4gPSAobm93IC0gc2NhblN0YXJ0VGltZVJlZi5jdXJyZW50KSAvIDEwMDA7CiAgICAgICAgICAgICAgICBpZiAodGltZVNpbmNlU2NhbiA+IDIuNSkKICAgICAgICAgICAgICAgICAgICBpc1NjYW5uaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHNjcmFwTWVzaGVzUmVmLmN1cnJlbnQuZm9yRWFjaChtZXNoID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gbWVzaC5wb3NpdGlvbi5kaXN0YW5jZVRvKHBsYXllclJlZi5jdXJyZW50LnBvc2l0aW9uKTsKICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IDMwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhdmUgPSBNYXRoLm1heCgwLCAxIC0gTWF0aC5hYnMoZGlzdCAvIDEwIC0gdGltZVNpbmNlU2NhbiAqIDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdmUgPiAwLjgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoLnNjYWxlLnNldFNjYWxhcigxICsgd2F2ZSAqIDAuMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2guc2NhbGUuc2V0U2NhbGFyKDEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHBQb3MgPSBwbGF5ZXJSZWYuY3VycmVudCA/IHBsYXllclJlZi5jdXJyZW50LnBvc2l0aW9uIDogbmV3IFRIUkVFLlZlY3RvcjMoKTsKICAgICAgICAgICAgZW5lbXlNZXNoZXNSZWYuY3VycmVudC5mb3JFYWNoKGVuZW15ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBlbmVteS5wb3NpdGlvbi5kaXN0YW5jZVRvKHBQb3MpOwogICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGVuZW15LnVzZXJEYXRhLnR5cGUgfHwgJ0NyYXdsZXInOwogICAgICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSBlbmVteS51c2VyRGF0YS5zcGVlZCB8fCA0OwogICAgICAgICAgICAgICAgaWYgKGRpc3QgPCAyMCAmJiBNYXRoLnJhbmRvbSgpID4gMC45OSkKICAgICAgICAgICAgICAgICAgICBTb3VuZEZYLnBsYXlFbmVteUdyb3dsKGRpc3QpOwogICAgICAgICAgICAgICAgbGV0IGlzQWdncm8gPSBkaXN0IDwgMTU7CiAgICAgICAgICAgICAgICBpZiAobm9pc2VMZXZlbC5jdXJyZW50ID4gMC40ICYmIGRpc3QgPCAzMCkKICAgICAgICAgICAgICAgICAgICBpc0FnZ3JvID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGlmIChpc0FnZ3JvICYmICFpc0RlYWRMb2NhbFJlZi5jdXJyZW50ICYmICFpc1NhZmUpIHsKICAgICAgICAgICAgICAgICAgICBlbmVteS5sb29rQXQocFBvcyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyID0gdmVjM1Bvb2wuY3VycmVudC50ZW1wLnN1YlZlY3RvcnMocFBvcywgZW5lbXkucG9zaXRpb24pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgICAgICAgIGVuZW15LnBvc2l0aW9uLmFkZChkaXIubXVsdGlwbHlTY2FsYXIoc3BlZWQgKiBkZWx0YSkpOwogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgMS41KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3cgLSAoZW5lbXkudXNlckRhdGEubGFzdEF0dGFja1RpbWUgfHwgMCkgPiAxMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWtlRGFtYWdlKGVuZW15LnVzZXJEYXRhLmRhbWFnZSB8fCAyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmVteS51c2VyRGF0YS5sYXN0QXR0YWNrVGltZSA9IG5vdzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChub3cgPiAoZW5lbXkudXNlckRhdGEubmV4dEFjdGlvblRpbWUgfHwgMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2FuZGVyVGFyZ2V0ID0gdmVjM1Bvb2wuY3VycmVudC50ZW1wMi5zZXQoZW5lbXkucG9zaXRpb24ueCArIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIwLCBlbmVteS5wb3NpdGlvbi55LCBlbmVteS5wb3NpdGlvbi56ICsgKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMjApOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrQ29sbGlzaW9uKHdhbmRlclRhcmdldCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmVteS51c2VyRGF0YS50YXJnZXRQb3MgPSB3YW5kZXJUYXJnZXQuY2xvbmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZW5lbXkudXNlckRhdGEubmV4dEFjdGlvblRpbWUgPSBub3cgKyAyMDAwICsgTWF0aC5yYW5kb20oKSAqIDMwMDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChlbmVteS51c2VyRGF0YS50YXJnZXRQb3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyID0gdmVjM1Bvb2wuY3VycmVudC50ZW1wLnN1YlZlY3RvcnMoZW5lbXkudXNlckRhdGEudGFyZ2V0UG9zLCBlbmVteS5wb3NpdGlvbikubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15LnBvc2l0aW9uLmFkZChkaXIubXVsdGlwbHlTY2FsYXIoKHNwZWVkICogMC41KSAqIGRlbHRhKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZW15Lmxvb2tBdChlbmVteS51c2VyRGF0YS50YXJnZXRQb3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTsKICAgICAgICB9OwogICAgICAgIGFuaW1hdGUoKTsKICAgICAgICByZXR1cm4gKCkgPT4gewogICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltSWQpOwogICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93bik7CiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uS2V5VXApOwogICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7CiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duKTsKICAgICAgICAgICAgaWYgKG1vdW50UmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIG1vdW50UmVmLmN1cnJlbnQucmVtb3ZlQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7CiAgICAgICAgICAgICAgICByZW5kZXJlci5kaXNwb3NlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfSwgW10pOwogICAgY29uc3QgYWxpdmVQbGF5ZXJzID0gdXNlTWVtbygoKSA9PiBwcm9wcy5vdGhlclBsYXllcnMuZmlsdGVyKHAgPT4gIXAuaXNEZWFkKSwgW3Byb3BzLm90aGVyUGxheWVyc10pOwogICAgcmV0dXJuIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJyZWxhdGl2ZSB3LWZ1bGwgaC1mdWxsIGJnLWJsYWNrIGN1cnNvci1ub25lIiwgdGFiSW5kZXg6IDAsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyByZWY6IG1vdW50UmVmLCBjbGFzc05hbWU6ICJ3LWZ1bGwgaC1mdWxsIiB9KSwgIXNob3dTZXR0aW5ncyAmJiBfanN4KCJkaXYiLCB7IGlkOiAiY3Jvc3NoYWlyIiB9KSwgX2pzeChIVUQsIHsgbG9jYWxIZWFsdGg6IGxvY2FsSGVhbHRoLCBsb2NhbFN0YW1pbmE6IGxvY2FsU3RhbWluYSwgbG9jYWxCYXR0ZXJ5OiBsb2NhbEJhdHRlcnksIGlzRXhoYXVzdGVkOiBpc0V4aGF1c3RlZCwgaHVkTWVzc2FnZTogaHVkTWVzc2FnZSwgZGFtYWdlRmxhc2g6IGRhbWFnZUZsYXNoLCBpc0RlYWQ6IGlzRGVhZCwgcGxheWVyTmFtZTogcHJvcHMuc3RhdHMubmFtZSwgcm9vbUNvZGU6IHByb3BzLnJvb21Db2RlLCBjaGF0TWVzc2FnZXM6IHByb3BzLmNoYXRNZXNzYWdlcywgc3BlY3RhdGVUYXJnZXRJbmRleDogc3BlY3RhdGVUYXJnZXRJbmRleCwgYWxpdmVQbGF5ZXJzOiBhbGl2ZVBsYXllcnMsIG9uU3BlY3RhdGVDaGFuZ2U6IChkaXIpID0+IHNldFNwZWN0YXRlVGFyZ2V0SW5kZXgocHJldiA9PiBwcmV2ICsgZGlyKSwgcXVvdGE6IHByb3BzLnN0YXRzLnF1b3RhLCBzY3JhcFZhbHVlOiBwcm9wcy5zdGF0cy5zY3JhcFZhbHVlLCBob2xkaW5nVmFsdWU6IGN1cnJlbnRIb2xkaW5nVmFsdWUsIHNjYW5Db29sZG93bjogc2NhbkNvb2xkb3duLCBjdXJyZW50Tm9pc2VMZXZlbDogY3VycmVudE5vaXNlTGV2ZWwsIHNob3dTZXR0aW5nczogc2hvd1NldHRpbmdzLCBzZXRTaG93U2V0dGluZ3M6IHNldFNob3dTZXR0aW5ncywgYnJpZ2h0bmVzczogYnJpZ2h0bmVzcywgc2V0QnJpZ2h0bmVzczogc2V0QnJpZ2h0bmVzcyB9KV0gfSkpOwp9Owo=","@/App":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IExheW91dCB9IGZyb20gJ0AvY29tcG9uZW50cy9MYXlvdXQnOwppbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJ0AvY29tcG9uZW50cy9UZXJtaW5hbCc7CmltcG9ydCB7IEV4cGxvcmF0aW9uIH0gZnJvbSAnQC9jb21wb25lbnRzL0V4cGxvcmF0aW9uJzsKaW1wb3J0IHsgTG9iYnkgfSBmcm9tICdAL2NvbXBvbmVudHMvTG9iYnknOwppbXBvcnQgeyBHYW1lU3RhdGUgfSBmcm9tICdAL3R5cGVzJzsKaW1wb3J0IHsgZ2VuZXJhdGVSb29tIH0gZnJvbSAnQC9zZXJ2aWNlcy9nYW1lTWFzdGVyJzsKaW1wb3J0IHsgUGVlciB9IGZyb20gInBlZXJqcyI7CmltcG9ydCB7IFNvdW5kRlggfSBmcm9tICdAL3NlcnZpY2VzL2F1ZGlvRW5naW5lJzsKaW1wb3J0IHsgR2xvYmUsIERvd25sb2FkLCBNYXhpbWl6ZSB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7CmNvbnN0IElOSVRJQUxfU1RBVFMgPSB7CiAgICBuYW1lOiAnRW1wbG95ZWUnLAogICAgaGVhbHRoOiAxMDAsCiAgICBiYXR0ZXJ5OiAxMDAsCiAgICBzdGFtaW5hOiAxMDAsCiAgICBzY3JhcFZhbHVlOiAwLAogICAgaW52ZW50b3J5OiBbXSwKICAgIHF1b3RhOiAxMzAsCiAgICBkYXk6IDEsCiAgICBjdXJyZW50TWFwOiAnRmFjdG9yeScsCiAgICB1cGdyYWRlczogW10KfTsKY29uc3QgSU5JVElBTF9MT0dTID0gWwogICAgeyBpZDogJzEnLCBzZW5kZXI6ICdTWVNURU0nLCB0ZXh0OiAnQm9vdGluZyBzZXF1ZW5jZSBjb21wbGV0ZS4uLicgfSwKICAgIHsgaWQ6ICcyJywgc2VuZGVyOiAnU1lTVEVNJywgdGV4dDogJ0Nvbm5lY3RlZCB0byBDb21wYW55IE5ldHdvcmsuJyB9LAogICAgeyBpZDogJzMnLCBzZW5kZXI6ICdTWVNURU0nLCB0ZXh0OiAnVHlwZSAiSEVMUCIgZm9yIGNvbW1hbmQgbGlzdC4nIH0KXTsKY29uc3QgSU5JVElBTF9WT1RFUyA9IHsgcm9ib3RzOiAwLCBzYW1lOiAwIH07CmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcCgpIHsKICAgIGNvbnN0IFtnYW1lU3RhdGUsIHNldEdhbWVTdGF0ZV0gPSB1c2VTdGF0ZShHYW1lU3RhdGUuTUVOVSk7CiAgICBjb25zdCBbc3RhdHMsIHNldFN0YXRzXSA9IHVzZVN0YXRlKElOSVRJQUxfU1RBVFMpOwogICAgY29uc3QgW2xvZ3MsIHNldExvZ3NdID0gdXNlU3RhdGUoSU5JVElBTF9MT0dTKTsKICAgIGNvbnN0IFtyb29tLCBzZXRSb29tXSA9IHVzZVN0YXRlKG51bGwpOwogICAgY29uc3QgW21lbnVOYW1lLCBzZXRNZW51TmFtZV0gPSB1c2VTdGF0ZSgnJyk7CiAgICBjb25zdCBbaG9zdENvZGUsIHNldEhvc3RDb2RlXSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFtqb2luQ29kZSwgc2V0Sm9pbkNvZGVdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW2lzQ29ubmVjdGluZywgc2V0SXNDb25uZWN0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIGNvbnN0IFtjb25uZWN0RXJyb3IsIHNldENvbm5lY3RFcnJvcl0gPSB1c2VTdGF0ZSgnJyk7CiAgICBjb25zdCBbcGxheWVySWQsIHNldFBsYXllcklkXSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFtpc0hvc3QsIHNldElzSG9zdF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbb3RoZXJQbGF5ZXJzLCBzZXRPdGhlclBsYXllcnNdID0gdXNlU3RhdGUoW10pOwogICAgY29uc3QgW2NoYXRNZXNzYWdlcywgc2V0Q2hhdE1lc3NhZ2VzXSA9IHVzZVN0YXRlKFtdKTsKICAgIGNvbnN0IFt2b3Rlcywgc2V0Vm90ZXNdID0gdXNlU3RhdGUoSU5JVElBTF9WT1RFUyk7CiAgICBjb25zdCBbc2hvd1ZvdGVNb2RhbCwgc2V0U2hvd1ZvdGVNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBnYW1lU3RhdGVSZWYgPSB1c2VSZWYoZ2FtZVN0YXRlKTsKICAgIGNvbnN0IGNoYXRSZWYgPSB1c2VSZWYoY2hhdE1lc3NhZ2VzKTsKICAgIGNvbnN0IHZvdGVzUmVmID0gdXNlUmVmKHZvdGVzKTsKICAgIGNvbnN0IHBsYXllck5hbWVSZWYgPSB1c2VSZWYoJycpOwogICAgY29uc3QgcGVlclJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IGNvbm5lY3Rpb25zUmVmID0gdXNlUmVmKG5ldyBNYXAoKSk7CiAgICBjb25zdCBob3N0Q29ubmVjdGlvblJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IHBsYXllclVwZGF0ZXNSZWYgPSB1c2VSZWYoW10pOwogICAgY29uc3QgY29ubmVjdGlvblRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCBpc0xhdW5jaGluZ1JlZiA9IHVzZVJlZihmYWxzZSk7CiAgICBjb25zdCBpc0xldmVsTG9hZGluZ1JlZiA9IHVzZVJlZihmYWxzZSk7CiAgICBjb25zdCBoZWFydGJlYXRJbnRlcnZhbFJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IGhvc3RMb29wUmVmID0gdXNlUmVmKG51bGwpOwogICAgY29uc3QgY3VycmVudFNlc3Npb25EYXRhUmVmID0gdXNlUmVmKHsgaW52ZW50b3J5OiBbXSwgaGVhbHRoOiAxMDAgfSk7CiAgICBjb25zdCBhbUlDb21tYW5kZXIgPSBpc0hvc3QgfHwgb3RoZXJQbGF5ZXJzLmZpbmQocCA9PiBwLmlkID09PSBwbGF5ZXJJZCk/LmlzSG9zdCB8fCBmYWxzZTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgZ2FtZVN0YXRlUmVmLmN1cnJlbnQgPSBnYW1lU3RhdGU7CiAgICAgICAgaWYgKGdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLk1FTlUpIHsKICAgICAgICAgICAgcmVzZXRHYW1lU2Vzc2lvbigpOwogICAgICAgIH0KICAgIH0sIFtnYW1lU3RhdGVdKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7IGNoYXRSZWYuY3VycmVudCA9IGNoYXRNZXNzYWdlczsgfSwgW2NoYXRNZXNzYWdlc10pOwogICAgdXNlRWZmZWN0KCgpID0+IHsgdm90ZXNSZWYuY3VycmVudCA9IHZvdGVzOyB9LCBbdm90ZXNdKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7IHBsYXllck5hbWVSZWYuY3VycmVudCA9IG1lbnVOYW1lOyB9LCBbbWVudU5hbWVdKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgY29uc3Qgc3RvcmVkSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdMRVRIQUxfUExBWUVSX0lEJyk7CiAgICAgICAgaWYgKHN0b3JlZElkKQogICAgICAgICAgICBzZXRQbGF5ZXJJZChzdG9yZWRJZCk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IG5ld0lkID0gY3J5cHRvLnJhbmRvbVVVSUQoKTsKICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnTEVUSEFMX1BMQVlFUl9JRCcsIG5ld0lkKTsKICAgICAgICAgICAgc2V0UGxheWVySWQobmV3SWQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKCkgPT4gY2xlYW51cE5ldHdvcmtpbmcoKTsKICAgIH0sIFtdKTsKICAgIC8vIENsaWVudCBIZWFydGJlYXQgZm9yIExvYmJ5CiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGlmIChoZWFydGJlYXRJbnRlcnZhbFJlZi5jdXJyZW50KQogICAgICAgICAgICBjbGVhckludGVydmFsKGhlYXJ0YmVhdEludGVydmFsUmVmLmN1cnJlbnQpOwogICAgICAgIGlmICghaXNIb3N0ICYmIGdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLkxPQkJZKSB7CiAgICAgICAgICAgIC8vIEZhc3RlciBoZWFydGJlYXQgKDEwMG1zKSB0byBlbnN1cmUgIlJlYWx0aW1lIiBmZWVsaW5nIGluIGxvYmJ5CiAgICAgICAgICAgIGhlYXJ0YmVhdEludGVydmFsUmVmLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaG9zdENvbm5lY3Rpb25SZWYuY3VycmVudD8ub3BlbikgewogICAgICAgICAgICAgICAgICAgIGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQuc2VuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQTEFZRVJfVVBEQVRFJywKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHBsYXllcklkCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDEwMCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoKSA9PiB7IGlmIChoZWFydGJlYXRJbnRlcnZhbFJlZi5jdXJyZW50KQogICAgICAgICAgICBjbGVhckludGVydmFsKGhlYXJ0YmVhdEludGVydmFsUmVmLmN1cnJlbnQpOyB9OwogICAgfSwgW2dhbWVTdGF0ZSwgaXNIb3N0LCBwbGF5ZXJJZF0pOwogICAgY29uc3QgcmVzZXRHYW1lU2Vzc2lvbiA9ICgpID0+IHsKICAgICAgICBjbGVhbnVwTmV0d29ya2luZygpOwogICAgICAgIHNldFN0YXRzKElOSVRJQUxfU1RBVFMpOwogICAgICAgIHNldExvZ3MoSU5JVElBTF9MT0dTKTsKICAgICAgICBzZXRPdGhlclBsYXllcnMoW10pOwogICAgICAgIHNldENoYXRNZXNzYWdlcyhbXSk7CiAgICAgICAgc2V0Vm90ZXMoSU5JVElBTF9WT1RFUyk7CiAgICAgICAgcGxheWVyVXBkYXRlc1JlZi5jdXJyZW50ID0gW107CiAgICAgICAgaXNMYXVuY2hpbmdSZWYuY3VycmVudCA9IGZhbHNlOwogICAgICAgIGlzTGV2ZWxMb2FkaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTsKICAgIH07CiAgICBjb25zdCBjbGVhbnVwTmV0d29ya2luZyA9ICgpID0+IHsKICAgICAgICBpZiAocGVlclJlZi5jdXJyZW50KSB7CiAgICAgICAgICAgIHBlZXJSZWYuY3VycmVudC5kZXN0cm95KCk7CiAgICAgICAgICAgIHBlZXJSZWYuY3VycmVudCA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChjb25uZWN0aW9uc1JlZi5jdXJyZW50KSB7CiAgICAgICAgICAgIGNvbm5lY3Rpb25zUmVmLmN1cnJlbnQuZm9yRWFjaChjID0+IGMuY2xvc2UoKSk7CiAgICAgICAgICAgIGNvbm5lY3Rpb25zUmVmLmN1cnJlbnQuY2xlYXIoKTsKICAgICAgICB9CiAgICAgICAgaWYgKGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQpCiAgICAgICAgICAgIGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQuY2xvc2UoKTsKICAgICAgICBob3N0Q29ubmVjdGlvblJlZi5jdXJyZW50ID0gbnVsbDsKICAgICAgICBzZXRJc0Nvbm5lY3RpbmcoZmFsc2UpOwogICAgICAgIGNsZWFyVGltZW91dChjb25uZWN0aW9uVGltZW91dFJlZi5jdXJyZW50KTsKICAgICAgICBpZiAoaGVhcnRiZWF0SW50ZXJ2YWxSZWYuY3VycmVudCkKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChoZWFydGJlYXRJbnRlcnZhbFJlZi5jdXJyZW50KTsKICAgICAgICBpZiAoaG9zdExvb3BSZWYuY3VycmVudCkKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChob3N0TG9vcFJlZi5jdXJyZW50KTsKICAgIH07CiAgICBjb25zdCBzZXR1cEhvc3QgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgU291bmRGWC5pbml0KCk7IC8vIFJlc3VtZSBBdWRpbyBDb250ZXh0CiAgICAgICAgaWYgKCFtZW51TmFtZSkgewogICAgICAgICAgICBzZXRDb25uZWN0RXJyb3IoIkVOVEVSIE5BTUUiKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBjbGVhbnVwTmV0d29ya2luZygpOwogICAgICAgIHNldElzQ29ubmVjdGluZyh0cnVlKTsKICAgICAgICBzZXRDb25uZWN0RXJyb3IoIiIpOwogICAgICAgIGNvbnN0IGNvZGUgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgNikudG9VcHBlckNhc2UoKTsKICAgICAgICBzZXRIb3N0Q29kZShjb2RlKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBwZWVyID0gbmV3IFBlZXIoYExFVEhBTF9HQU1FXyR7Y29kZX1gKTsKICAgICAgICAgICAgcGVlclJlZi5jdXJyZW50ID0gcGVlcjsKICAgICAgICAgICAgY29uc3QgZmFpbFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChpc0Nvbm5lY3RpbmcgJiYgIXBlZXIub3BlbikgewogICAgICAgICAgICAgICAgICAgIHNldENvbm5lY3RFcnJvcigiSU5JVCBUSU1FT1VUIik7CiAgICAgICAgICAgICAgICAgICAgc2V0SXNDb25uZWN0aW5nKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgICAgIHBlZXIub24oJ29wZW4nLCAoKSA9PiB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoZmFpbFRpbWVvdXQpOwogICAgICAgICAgICAgICAgc2V0SXNDb25uZWN0aW5nKGZhbHNlKTsKICAgICAgICAgICAgICAgIHNldElzSG9zdCh0cnVlKTsKICAgICAgICAgICAgICAgIHNldEdhbWVTdGF0ZShHYW1lU3RhdGUuTE9CQlkpOwogICAgICAgICAgICAgICAgY29uc3QgaG9zdFBsYXllciA9IHsKICAgICAgICAgICAgICAgICAgICBpZDogcGxheWVySWQsCiAgICAgICAgICAgICAgICAgICAgbmFtZTogcGxheWVyTmFtZVJlZi5jdXJyZW50LAogICAgICAgICAgICAgICAgICAgIGlzSG9zdDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBpc1JlYWR5OiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmNjYwMCcsCiAgICAgICAgICAgICAgICAgICAgc2Vjb25kYXJ5Q29sb3I6ICcjMDAwMDAwJywKICAgICAgICAgICAgICAgICAgICBsYXN0U2VlbjogRGF0ZS5ub3coKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHNldE90aGVyUGxheWVycyhbaG9zdFBsYXllcl0pOwogICAgICAgICAgICAgICAgcGxheWVyVXBkYXRlc1JlZi5jdXJyZW50ID0gW2hvc3RQbGF5ZXJdOwogICAgICAgICAgICAgICAgLy8gU3RhcnQgSG9zdCBMb29wCiAgICAgICAgICAgICAgICBzdGFydEhvc3RMb29wKGNvZGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcGVlci5vbignY29ubmVjdGlvbicsIChjb25uKSA9PiB7CiAgICAgICAgICAgICAgICBjb25uLm9uKCdvcGVuJywgKCkgPT4gY29ubmVjdGlvbnNSZWYuY3VycmVudC5zZXQoY29ubi5wZWVyLCBjb25uKSk7CiAgICAgICAgICAgICAgICBjb25uLm9uKCdkYXRhJywgKGRhdGEpID0+IG9uSG9zdFBhY2tldFJlZi5jdXJyZW50KGRhdGEsIGNvbm4ucGVlciwgY29ubikpOwogICAgICAgICAgICAgICAgY29ubi5vbignY2xvc2UnLCAoKSA9PiBjb25uZWN0aW9uc1JlZi5jdXJyZW50LmRlbGV0ZShjb25uLnBlZXIpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHBlZXIub24oJ2Vycm9yJywgKGVycikgPT4gewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGZhaWxUaW1lb3V0KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlBlZXJKUyBFcnJvcjoiLCBlcnIpOwogICAgICAgICAgICAgICAgc2V0Q29ubmVjdEVycm9yKCJDT05ORUNUSU9OIEZBSUxFRCIpOwogICAgICAgICAgICAgICAgc2V0SXNDb25uZWN0aW5nKGZhbHNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgIHNldENvbm5lY3RFcnJvcigiSU5JVCBFUlJPUiIpOwogICAgICAgICAgICBzZXRJc0Nvbm5lY3RpbmcoZmFsc2UpOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBzdGFydEhvc3RMb29wID0gKGNvZGUpID0+IHsKICAgICAgICBpZiAoaG9zdExvb3BSZWYuY3VycmVudCkKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChob3N0TG9vcFJlZi5jdXJyZW50KTsKICAgICAgICAvLyA2MCBUaWNrIFNlcnZlciBMb29wICgxNm1zKQogICAgICAgIGhvc3RMb29wUmVmLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGlmIChwZWVyUmVmLmN1cnJlbnQ/LmRlc3Ryb3llZCkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgLy8gQ1JJVElDQUw6IEhvc3QgbXVzdCBrZWVwIHRoZW1zZWx2ZXMgYWxpdmUKICAgICAgICAgICAgY29uc3QgbWUgPSBwbGF5ZXJVcGRhdGVzUmVmLmN1cnJlbnQuZmluZChwID0+IHAuaWQgPT09IHBsYXllcklkKTsKICAgICAgICAgICAgaWYgKG1lKQogICAgICAgICAgICAgICAgbWUubGFzdFNlZW4gPSBub3c7CiAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgZGlzY29ubmVjdGVkIHBsYXllcnMgKDE1cyB0aW1lb3V0IC0gbGVuaWVudCkKICAgICAgICAgICAgY29uc3QgYWN0aXZlUGxheWVycyA9IHBsYXllclVwZGF0ZXNSZWYuY3VycmVudC5maWx0ZXIocCA9PiBub3cgLSBwLmxhc3RTZWVuIDwgMTUwMDApOwogICAgICAgICAgICBwbGF5ZXJVcGRhdGVzUmVmLmN1cnJlbnQgPSBhY3RpdmVQbGF5ZXJzOwogICAgICAgICAgICAvLyBVcGRhdGUgSG9zdCBVSQogICAgICAgICAgICBpZiAoZ2FtZVN0YXRlUmVmLmN1cnJlbnQgPT09IEdhbWVTdGF0ZS5MT0JCWSkgewogICAgICAgICAgICAgICAgc2V0T3RoZXJQbGF5ZXJzKFsuLi5hY3RpdmVQbGF5ZXJzXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IG5ldFBoYXNlID0gJ0xPQkJZJzsKICAgICAgICAgICAgaWYgKGdhbWVTdGF0ZVJlZi5jdXJyZW50ID09PSBHYW1lU3RhdGUuU0hJUCkKICAgICAgICAgICAgICAgIG5ldFBoYXNlID0gJ09SQklUJzsKICAgICAgICAgICAgZWxzZSBpZiAoZ2FtZVN0YXRlUmVmLmN1cnJlbnQgPT09IEdhbWVTdGF0ZS5FWFBMT1JJTkcpCiAgICAgICAgICAgICAgICBuZXRQaGFzZSA9ICdQTEFZSU5HJzsKICAgICAgICAgICAgaWYgKG5ldFBoYXNlID09PSAnUExBWUlORycgJiYgYWN0aXZlUGxheWVycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBjb25zdCBhbGxGaW5pc2hlZCA9IGFjdGl2ZVBsYXllcnMuZXZlcnkocCA9PiBwLmlzRGVhZCB8fCBwLmlzRXhpdGVkKTsKICAgICAgICAgICAgICAgIGlmIChhbGxGaW5pc2hlZCkgewogICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVQbGF5ZXJzLmxlbmd0aCA9PT0gMSAmJiBhY3RpdmVQbGF5ZXJzWzBdLmlzRGVhZCkKICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlR2FtZUVuZChbXSwgMTAwKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVJlcXVlc3REZXBhcnR1cmUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBzdGF0ZVBhY2tldCA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdTVEFURV9VUERBVEUnLAogICAgICAgICAgICAgICAgc3RhdGU6IHsKICAgICAgICAgICAgICAgICAgICBjb2RlOiBjb2RlLAogICAgICAgICAgICAgICAgICAgIHBsYXllcnM6IGFjdGl2ZVBsYXllcnMsCiAgICAgICAgICAgICAgICAgICAgbWFwOiBzdGF0cy5jdXJyZW50TWFwLAogICAgICAgICAgICAgICAgICAgIGdhbWVQaGFzZTogbmV0UGhhc2UsCiAgICAgICAgICAgICAgICAgICAgY2hhdDogY2hhdFJlZi5jdXJyZW50LAogICAgICAgICAgICAgICAgICAgIGNyZWRpdHM6IHN0YXRzLnNjcmFwVmFsdWUsCiAgICAgICAgICAgICAgICAgICAgbGFzdFVwZGF0ZWQ6IG5vdywKICAgICAgICAgICAgICAgICAgICB2b3Rlczogdm90ZXNSZWYuY3VycmVudAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25uZWN0aW9uc1JlZi5jdXJyZW50LmZvckVhY2goY29ubiA9PiB7CiAgICAgICAgICAgICAgICBpZiAoY29ubi5vcGVuKQogICAgICAgICAgICAgICAgICAgIGNvbm4uc2VuZChzdGF0ZVBhY2tldCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sIDE2KTsKICAgIH07CiAgICBjb25zdCBzZXR1cEpvaW4gPSBhc3luYyAocmV0cnlDb3VudCA9IDApID0+IHsKICAgICAgICBTb3VuZEZYLmluaXQoKTsgLy8gUmVzdW1lIEF1ZGlvIENvbnRleHQKICAgICAgICBpZiAoIW1lbnVOYW1lIHx8ICFqb2luQ29kZSkgewogICAgICAgICAgICBzZXRDb25uZWN0RXJyb3IoIkVOVEVSIE5BTUUvQ09ERSIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHNldElzQ29ubmVjdGluZyh0cnVlKTsKICAgICAgICBpZiAocmV0cnlDb3VudCA9PT0gMCkKICAgICAgICAgICAgc2V0Q29ubmVjdEVycm9yKCIiKTsKICAgICAgICBpZiAocmV0cnlDb3VudCA9PT0gMCkgewogICAgICAgICAgICBpZiAocGVlclJlZi5jdXJyZW50KQogICAgICAgICAgICAgICAgcGVlclJlZi5jdXJyZW50LmRlc3Ryb3koKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHBlZXJSZWYuY3VycmVudCA9IG5ldyBQZWVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICBzZXRDb25uZWN0RXJyb3IoIklOSVQgRVJST1IiKTsKICAgICAgICAgICAgICAgIHNldElzQ29ubmVjdGluZyhmYWxzZSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgY29uc3QgcGVlciA9IHBlZXJSZWYuY3VycmVudDsKICAgICAgICBjb25zdCBleGVjdXRlQ29ubmVjdCA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgaG9zdFBlZXJJZCA9IGBMRVRIQUxfR0FNRV8ke2pvaW5Db2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpfWA7CiAgICAgICAgICAgIGNvbnN0IGNvbm4gPSBwZWVyLmNvbm5lY3QoaG9zdFBlZXJJZCwgeyByZWxpYWJsZTogdHJ1ZSB9KTsKICAgICAgICAgICAgY29ubmVjdGlvblRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKCFob3N0Q29ubmVjdGlvblJlZi5jdXJyZW50KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPCAxKSB7IC8vIE1heCAxIHJldHJ5ICgyIGF0dGVtcHRzIHRvdGFsKQogICAgICAgICAgICAgICAgICAgICAgICBjb25uLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwSm9pbihyZXRyeUNvdW50ICsgMSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0Nvbm5lY3RpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRDb25uZWN0RXJyb3IoIkhPU1QgTk9UIEZPVU5EIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAyMDAwKTsgLy8gMiBzZWNvbmRzIHRpbWVvdXQgcGVyIGF0dGVtcHQKICAgICAgICAgICAgY29ubi5vbignb3BlbicsICgpID0+IHsKICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjb25uZWN0aW9uVGltZW91dFJlZi5jdXJyZW50KTsKICAgICAgICAgICAgICAgIGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQgPSBjb25uOwogICAgICAgICAgICAgICAgY29ubi5zZW5kKHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnSEVMTE8nLAogICAgICAgICAgICAgICAgICAgIHBsYXllcjogeyBpZDogcGxheWVySWQsIG5hbWU6IHBsYXllck5hbWVSZWYuY3VycmVudCwgaXNIb3N0OiBmYWxzZSwgaXNSZWFkeTogdHJ1ZSwgY29sb3I6ICcjMDBmZmZmJywgbGFzdFNlZW46IERhdGUubm93KCkgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25uLm9uKCdkYXRhJywgKGRhdGEpID0+IG9uQ2xpZW50UGFja2V0UmVmLmN1cnJlbnQoZGF0YSkpOwogICAgICAgICAgICBjb25uLm9uKCdlcnJvcicsICgpID0+IHsKICAgICAgICAgICAgICAgIC8vIFJldHJ5IGhhbmRsZWQgYnkgdGltZW91dCB1c3VhbGx5LCBidXQgd2UgY2FuIGxvZwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIGlmIChwZWVyLm9wZW4pIHsKICAgICAgICAgICAgZXhlY3V0ZUNvbm5lY3QoKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHBlZXIub24oJ29wZW4nLCBleGVjdXRlQ29ubmVjdCk7CiAgICAgICAgICAgIC8vIEZhbGxiYWNrIGlmIHBlZXIgbmV2ZXIgb3BlbnMgKG5ldHdvcmsgYmxvY2spCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKGlzQ29ubmVjdGluZyAmJiAhcGVlci5vcGVuICYmICFob3N0Q29ubmVjdGlvblJlZi5jdXJyZW50KSB7CiAgICAgICAgICAgICAgICAgICAgc2V0Q29ubmVjdEVycm9yKCJORVRfRVJSIik7CiAgICAgICAgICAgICAgICAgICAgc2V0SXNDb25uZWN0aW5nKGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgNTAwMCk7CiAgICAgICAgfQogICAgICAgIHBlZXIub24oJ2Vycm9yJywgKGVycikgPT4gewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJQZWVySlMgRXJyb3I6IiwgZXJyKTsKICAgICAgICAgICAgaWYgKCFob3N0Q29ubmVjdGlvblJlZi5jdXJyZW50KSB7CiAgICAgICAgICAgICAgICBzZXRDb25uZWN0RXJyb3IoIkNPTk5FQ1RJT04gRkFJTEVEIik7CiAgICAgICAgICAgICAgICBzZXRJc0Nvbm5lY3RpbmcoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9OwogICAgY29uc3Qgb25Ib3N0UGFja2V0UmVmID0gdXNlUmVmKChkYXRhLCBzZW5kZXJJZCwgY29ubikgPT4geyB9KTsKICAgIG9uSG9zdFBhY2tldFJlZi5jdXJyZW50ID0gKGRhdGEsIHNlbmRlcklkLCBjb25uKSA9PiB7CiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTsKICAgICAgICAvLyBHRU5FUkFMIEtFRVAtQUxJVkU6IEFueSB2YWxpZCBwYWNrZXQgZnJvbSBhIGtub3duIHBsYXllciB1cGRhdGVzIHRoZWlyIGxhc3RTZWVuCiAgICAgICAgaWYgKCdpZCcgaW4gZGF0YSkgewogICAgICAgICAgICBjb25zdCBwaWQgPSBkYXRhLmlkOwogICAgICAgICAgICBjb25zdCBwID0gcGxheWVyVXBkYXRlc1JlZi5jdXJyZW50LmZpbmQocGwgPT4gcGwuaWQgPT09IHBpZCk7CiAgICAgICAgICAgIGlmIChwKQogICAgICAgICAgICAgICAgcC5sYXN0U2VlbiA9IG5vdzsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ0hFTExPJykgewogICAgICAgICAgICBpZiAoIXBsYXllclVwZGF0ZXNSZWYuY3VycmVudC5maW5kKHAgPT4gcC5pZCA9PT0gZGF0YS5wbGF5ZXIuaWQpKSB7CiAgICAgICAgICAgICAgICBkYXRhLnBsYXllci5sYXN0U2VlbiA9IG5vdzsKICAgICAgICAgICAgICAgIHBsYXllclVwZGF0ZXNSZWYuY3VycmVudC5wdXNoKGRhdGEucGxheWVyKTsKICAgICAgICAgICAgICAgIGlmIChnYW1lU3RhdGVSZWYuY3VycmVudCA9PT0gR2FtZVN0YXRlLkxPQkJZKQogICAgICAgICAgICAgICAgICAgIHNldE90aGVyUGxheWVycyhbLi4ucGxheWVyVXBkYXRlc1JlZi5jdXJyZW50XSk7CiAgICAgICAgICAgICAgICBicm9hZGNhc3RBY3Rpb24oYCR7ZGF0YS5wbGF5ZXIubmFtZX0gY29ubmVjdGVkLmApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ1BMQVlFUl9VUERBVEUnKSB7CiAgICAgICAgICAgIGNvbnN0IHAgPSBwbGF5ZXJVcGRhdGVzUmVmLmN1cnJlbnQuZmluZChwID0+IHAuaWQgPT09IGRhdGEuaWQpOwogICAgICAgICAgICBpZiAocCkgewogICAgICAgICAgICAgICAgaWYgKGRhdGEucG9zaXRpb24pCiAgICAgICAgICAgICAgICAgICAgcC5wb3NpdGlvbiA9IGRhdGEucG9zaXRpb247CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICAgIHAucm90YXRpb24gPSBkYXRhLnJvdGF0aW9uOwogICAgICAgICAgICAgICAgaWYgKGRhdGEucm90YXRpb25QaXRjaCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICAgIHAucm90YXRpb25QaXRjaCA9IGRhdGEucm90YXRpb25QaXRjaDsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmlzRGVhZCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICAgIHAuaXNEZWFkID0gZGF0YS5pc0RlYWQ7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc0V4aXRlZCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICAgIHAuaXNFeGl0ZWQgPSBkYXRhLmlzRXhpdGVkOwogICAgICAgICAgICAgICAgaWYgKGRhdGEubm9pc2VMZXZlbCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICAgIHAubm9pc2VMZXZlbCA9IGRhdGEubm9pc2VMZXZlbDsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmlzRmxhc2hsaWdodE9uICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICAgICAgcC5pc0ZsYXNobGlnaHRPbiA9IGRhdGEuaXNGbGFzaGxpZ2h0T247IC8vIFN5bmMgRmxhc2hsaWdodAogICAgICAgICAgICAgICAgaWYgKGRhdGEuY2hhdCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld01zZ3MgPSBkYXRhLmNoYXQuZmlsdGVyKChtKSA9PiAhY2hhdFJlZi5jdXJyZW50LmZpbmQoYyA9PiBjLmlkID09PSBtLmlkKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld01zZ3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRDaGF0TWVzc2FnZXMocHJldiA9PiBbLi4ucHJldiwgLi4ubmV3TXNncy5tYXAoKG0pID0+ICh7IC4uLm0sIHNlbmRlcjogcC5uYW1lIH0pKV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdSRVFVRVNUX0FQUEVBUkFOQ0VfQ0hBTkdFJykgewogICAgICAgICAgICBjb25zdCBwID0gcGxheWVyVXBkYXRlc1JlZi5jdXJyZW50LmZpbmQocCA9PiBwLmlkID09PSBkYXRhLmlkKTsKICAgICAgICAgICAgaWYgKHApIHsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvbG9yKQogICAgICAgICAgICAgICAgICAgIHAuY29sb3IgPSBkYXRhLmNvbG9yOwogICAgICAgICAgICAgICAgaWYgKGRhdGEuc2Vjb25kYXJ5Q29sb3IpCiAgICAgICAgICAgICAgICAgICAgcC5zZWNvbmRhcnlDb2xvciA9IGRhdGEuc2Vjb25kYXJ5Q29sb3I7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc1BoYW50b20gIT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICAgICAgICBwLmlzUGhhbnRvbSA9IGRhdGEuaXNQaGFudG9tOwogICAgICAgICAgICAgICAgaWYgKGRhdGEuYm9keVR5cGUpCiAgICAgICAgICAgICAgICAgICAgcC5ib2R5VHlwZSA9IGRhdGEuYm9keVR5cGU7CiAgICAgICAgICAgICAgICBpZiAoZ2FtZVN0YXRlUmVmLmN1cnJlbnQgPT09IEdhbWVTdGF0ZS5MT0JCWSkKICAgICAgICAgICAgICAgICAgICBzZXRPdGhlclBsYXllcnMoWy4uLnBsYXllclVwZGF0ZXNSZWYuY3VycmVudF0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ1JFUVVFU1RfTEFVTkNIJykKICAgICAgICAgICAgaGFuZGxlTGF1bmNoKCk7CiAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnUkVRVUVTVF9PUkJJVCcpCiAgICAgICAgICAgIGhhbmRsZVJlcXVlc3REZXBhcnR1cmUoKTsKICAgICAgICBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdWT1RFX0NBU1QnKSB7CiAgICAgICAgICAgIHNldFZvdGVzKHByZXYgPT4gewogICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHsgLi4ucHJldiB9OwogICAgICAgICAgICAgICAgaWYgKGRhdGEub3B0aW9uID09PSAncm9ib3RzJykKICAgICAgICAgICAgICAgICAgICBuZXh0LnJvYm90cysrOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIG5leHQuc2FtZSsrOwogICAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBvbkNsaWVudFBhY2tldFJlZiA9IHVzZVJlZigoZGF0YSkgPT4geyB9KTsKICAgIG9uQ2xpZW50UGFja2V0UmVmLmN1cnJlbnQgPSAoZGF0YSkgPT4gewogICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdTVEFURV9VUERBVEUnKSB7CiAgICAgICAgICAgIC8vIFJvYnVzdCBzdGF0ZSB0cmFuc2l0aW9uOiBJZiB3ZSBhcmUgaW4gTUVOVSwgd2UgTVVTVCBnbyB0byBMT0JCWSB1cG9uIHJlY2VpdmluZyBzdGF0ZQogICAgICAgICAgICBpZiAoZ2FtZVN0YXRlUmVmLmN1cnJlbnQgPT09IEdhbWVTdGF0ZS5NRU5VKSB7CiAgICAgICAgICAgICAgICBzZXRHYW1lU3RhdGUoR2FtZVN0YXRlLkxPQkJZKTsKICAgICAgICAgICAgICAgIHNldElzQ29ubmVjdGluZyhmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGxheWVyVXBkYXRlc1JlZi5jdXJyZW50ID0gZGF0YS5zdGF0ZS5wbGF5ZXJzOwogICAgICAgICAgICAvLyBBbHdheXMgc3luYyBwbGF5ZXJzIGlmIGluIExvYmJ5IHRvIGVuc3VyZSByZWFsLXRpbWUgdXBkYXRlcyBvZiBvdGhlciBqb2luZXJzCiAgICAgICAgICAgIGlmIChnYW1lU3RhdGVSZWYuY3VycmVudCA9PT0gR2FtZVN0YXRlLkxPQkJZKSB7CiAgICAgICAgICAgICAgICBzZXRPdGhlclBsYXllcnMoWy4uLmRhdGEuc3RhdGUucGxheWVyc10pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNldENoYXRNZXNzYWdlcyhkYXRhLnN0YXRlLmNoYXQpOwogICAgICAgICAgICBzZXRWb3RlcyhkYXRhLnN0YXRlLnZvdGVzKTsKICAgICAgICAgICAgc2V0U3RhdHMocHJldiA9PiAoeyAuLi5wcmV2LCBjdXJyZW50TWFwOiBkYXRhLnN0YXRlLm1hcCwgc2NyYXBWYWx1ZTogZGF0YS5zdGF0ZS5jcmVkaXRzIH0pKTsKICAgICAgICAgICAgaWYgKGRhdGEuc3RhdGUuZ2FtZVBoYXNlID09PSAnUExBWUlORycgJiYgKGdhbWVTdGF0ZVJlZi5jdXJyZW50ID09PSBHYW1lU3RhdGUuTE9CQlkgfHwgZ2FtZVN0YXRlUmVmLmN1cnJlbnQgPT09IEdhbWVTdGF0ZS5TSElQKSkgewogICAgICAgICAgICAgICAgc3RhcnRFeHBsb3JhdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuc3RhdGUuZ2FtZVBoYXNlID09PSAnT1JCSVQnICYmIGdhbWVTdGF0ZVJlZi5jdXJyZW50ID09PSBHYW1lU3RhdGUuRVhQTE9SSU5HKSB7CiAgICAgICAgICAgICAgICBoYW5kbGVHYW1lRW5kKGN1cnJlbnRTZXNzaW9uRGF0YVJlZi5jdXJyZW50LmludmVudG9yeSwgTWF0aC5tYXgoMCwgc3RhdHMuaGVhbHRoIC0gY3VycmVudFNlc3Npb25EYXRhUmVmLmN1cnJlbnQuaGVhbHRoKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5zdGF0ZS5nYW1lUGhhc2UgPT09ICdPUkJJVCcgJiYgZ2FtZVN0YXRlUmVmLmN1cnJlbnQgPT09IEdhbWVTdGF0ZS5MT0JCWSkgewogICAgICAgICAgICAgICAgc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5TSElQKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBicm9hZGNhc3RBY3Rpb24gPSAodGV4dCkgPT4gewogICAgICAgIGNvbnN0IG1zZyA9IHsgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksIHNlbmRlcjogJ1NZU1RFTScsIHRleHQ6IGA+PiAke3RleHR9YCwgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBpc1N5c3RlbTogdHJ1ZSB9OwogICAgICAgIHNldENoYXRNZXNzYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCBtc2ddKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVMYXVuY2ggPSAoKSA9PiB7CiAgICAgICAgaWYgKGlzTGF1bmNoaW5nUmVmLmN1cnJlbnQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpc0xhdW5jaGluZ1JlZi5jdXJyZW50ID0gdHJ1ZTsKICAgICAgICBpZiAoaXNIb3N0KQogICAgICAgICAgICBzZXRHYW1lU3RhdGUoR2FtZVN0YXRlLlNISVApOwogICAgICAgIGVsc2UKICAgICAgICAgICAgaG9zdENvbm5lY3Rpb25SZWYuY3VycmVudD8uc2VuZCh7IHR5cGU6ICdSRVFVRVNUX0xBVU5DSCcgfSk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBpc0xhdW5jaGluZ1JlZi5jdXJyZW50ID0gZmFsc2UsIDIwMDApOwogICAgfTsKICAgIGNvbnN0IGhhbmRsZUxhbmQgPSAoKSA9PiB7IGlmIChpc0hvc3QpCiAgICAgICAgc3RhcnRFeHBsb3JhdGlvbigpOyB9OwogICAgY29uc3QgaGFuZGxlQ29sb3JDaGFuZ2UgPSAoY29sb3IsIHNlY29uZGFyeSwgaXNQaGFudG9tLCBib2R5VHlwZSkgPT4gewogICAgICAgIGlmIChpc0hvc3QpIHsKICAgICAgICAgICAgY29uc3QgcCA9IHBsYXllclVwZGF0ZXNSZWYuY3VycmVudC5maW5kKHAgPT4gcC5pZCA9PT0gcGxheWVySWQpOwogICAgICAgICAgICBpZiAocCkgewogICAgICAgICAgICAgICAgcC5jb2xvciA9IGNvbG9yOwogICAgICAgICAgICAgICAgcC5zZWNvbmRhcnlDb2xvciA9IHNlY29uZGFyeTsKICAgICAgICAgICAgICAgIHAuaXNQaGFudG9tID0gaXNQaGFudG9tOwogICAgICAgICAgICAgICAgcC5ib2R5VHlwZSA9IGJvZHlUeXBlOwogICAgICAgICAgICAgICAgcC5sYXN0U2VlbiA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICBzZXRPdGhlclBsYXllcnMoWy4uLnBsYXllclVwZGF0ZXNSZWYuY3VycmVudF0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBob3N0Q29ubmVjdGlvblJlZi5jdXJyZW50Py5zZW5kKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdSRVFVRVNUX0FQUEVBUkFOQ0VfQ0hBTkdFJywKICAgICAgICAgICAgICAgIGlkOiBwbGF5ZXJJZCwKICAgICAgICAgICAgICAgIGNvbG9yLAogICAgICAgICAgICAgICAgc2Vjb25kYXJ5Q29sb3I6IHNlY29uZGFyeSwKICAgICAgICAgICAgICAgIGlzUGhhbnRvbSwKICAgICAgICAgICAgICAgIGJvZHlUeXBlCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBzdGFydEV4cGxvcmF0aW9uID0gYXN5bmMgKCkgPT4gewogICAgICAgIGlmIChpc0xldmVsTG9hZGluZ1JlZi5jdXJyZW50KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaXNMZXZlbExvYWRpbmdSZWYuY3VycmVudCA9IHRydWU7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY3VycmVudFNlc3Npb25EYXRhUmVmLmN1cnJlbnQgPSB7IGludmVudG9yeTogW10sIGhlYWx0aDogc3RhdHMuaGVhbHRoIH07CiAgICAgICAgICAgIC8vIFJlc2V0IHN0YXR1c2VzIGZvciBuZXcgcm91bmQgKEhvc3QgYXV0aG9yaXRhdGl2ZSkKICAgICAgICAgICAgaWYgKGlzSG9zdCkgewogICAgICAgICAgICAgICAgcGxheWVyVXBkYXRlc1JlZi5jdXJyZW50LmZvckVhY2gocCA9PiB7CiAgICAgICAgICAgICAgICAgICAgcC5pc0RlYWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBwLmlzRXhpdGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBSb2J1c3QgR2VuZXJhdGlvbiB3aXRoIFRpbWVvdXQKICAgICAgICAgICAgbGV0IHJvb21EYXRhOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gUmFjZSBhZ2FpbnN0IGEgdGltZW91dCB0byBwcmV2ZW50IGhhbmdpbmcgaWYgQVBJIGlzIGJsb2NrZWQvc2xvdwogICAgICAgICAgICAgICAgY29uc3QgZ2VuUHJvbWlzZSA9IGdlbmVyYXRlUm9vbShzdGF0cy5kYXksIHN0YXRzLmN1cnJlbnRNYXApOwogICAgICAgICAgICAgICAgY29uc3QgcmF3RGF0YSA9IGF3YWl0IFByb21pc2UucmFjZShbCiAgICAgICAgICAgICAgICAgICAgZ2VuUHJvbWlzZSwKICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlamVjdCgiVGltZW91dCIpLCAzMDAwKSkKICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgcm9vbURhdGEgPSB7IC4uLnJhd0RhdGEsIGlkOiAnMScsIGhhc1NjcmFwOiB0cnVlIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybigiTGV2ZWwgR2VuZXJhdGlvbiBUaW1lb3V0L0ZhaWwsIHVzaW5nIGZhbGxiYWNrLiIpOwogICAgICAgICAgICAgICAgcm9vbURhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1NlY3RvciAwJywKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ05hdmlnYXRpb24gc3lzdGVtIG9mZmxpbmUuJywKICAgICAgICAgICAgICAgICAgICBhdG1vc3BoZXJlOiAnaW5kdXN0cmlhbCcsCiAgICAgICAgICAgICAgICAgICAgZGFuZ2VyTGV2ZWw6IDEsCiAgICAgICAgICAgICAgICAgICAgaWQ6ICcxJywKICAgICAgICAgICAgICAgICAgICBoYXNTY3JhcDogdHJ1ZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZXRSb29tKHJvb21EYXRhKTsKICAgICAgICAgICAgc2V0R2FtZVN0YXRlKEdhbWVTdGF0ZS5FWFBMT1JJTkcpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJDcml0aWNhbCBFcnJvciBTdGFydGluZyBFeHBsb3JhdGlvbjoiLCBlKTsKICAgICAgICB9CiAgICAgICAgZmluYWxseSB7CiAgICAgICAgICAgIGlzTGV2ZWxMb2FkaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgaGFuZGxlR2FtZUVuZCA9IChjb2xsZWN0ZWQsIGRhbWFnZSkgPT4gewogICAgICAgIGNvbnN0IGN1cnJlbnRIZWFsdGggPSBNYXRoLm1heCgwLCBzdGF0cy5oZWFsdGggLSBkYW1hZ2UpOwogICAgICAgIGNvbnN0IHN1cnZpdmVkID0gY3VycmVudEhlYWx0aCA+IDA7CiAgICAgICAgLy8gQWx3YXlzIHJlc2V0IGhlYWx0aCB0byAxMDAgZm9yIHRoZSBuZXh0IGRheS9vcmJpdCBwaGFzZSAoTGV0aGFsIENvbXBhbnkgc3R5bGUpCiAgICAgICAgc2V0U3RhdHMocHJldiA9PiAoewogICAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgICBoZWFsdGg6IDEwMCwKICAgICAgICAgICAgaW52ZW50b3J5OiBzdXJ2aXZlZCA/IFsuLi5wcmV2LmludmVudG9yeSwgLi4uY29sbGVjdGVkXSA6IFtdLAogICAgICAgICAgICBkYXk6IHByZXYuZGF5ICsgMQogICAgICAgIH0pKTsKICAgICAgICBzZXRHYW1lU3RhdGUoR2FtZVN0YXRlLlNISVApOwogICAgICAgIC8vIFJlcG9ydCBFeGl0IHRvIEhvc3QgKG9yIHVwZGF0ZSBzZWxmIGlmIGhvc3QpCiAgICAgICAgaWYgKGlzSG9zdCkgewogICAgICAgICAgICBjb25zdCBtZSA9IHBsYXllclVwZGF0ZXNSZWYuY3VycmVudC5maW5kKHAgPT4gcC5pZCA9PT0gcGxheWVySWQpOwogICAgICAgICAgICBpZiAobWUpIHsKICAgICAgICAgICAgICAgIG1lLmlzRXhpdGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIG1lLmlzRGVhZCA9ICFzdXJ2aXZlZDsKICAgICAgICAgICAgICAgIG1lLmxhc3RTZWVuID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaG9zdENvbm5lY3Rpb25SZWYuY3VycmVudD8uc2VuZCh7CiAgICAgICAgICAgICAgICB0eXBlOiAnUExBWUVSX1VQREFURScsCiAgICAgICAgICAgICAgICBpZDogcGxheWVySWQsCiAgICAgICAgICAgICAgICBpc0V4aXRlZDogdHJ1ZSwKICAgICAgICAgICAgICAgIGlzRGVhZDogIXN1cnZpdmVkCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVSZXF1ZXN0RGVwYXJ0dXJlID0gKCkgPT4gewogICAgICAgIGlmIChpc0hvc3QpCiAgICAgICAgICAgIGhhbmRsZUdhbWVFbmQoY3VycmVudFNlc3Npb25EYXRhUmVmLmN1cnJlbnQuaW52ZW50b3J5LCBNYXRoLm1heCgwLCBzdGF0cy5oZWFsdGggLSBjdXJyZW50U2Vzc2lvbkRhdGFSZWYuY3VycmVudC5oZWFsdGgpKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQ/LnNlbmQoeyB0eXBlOiAnUkVRVUVTVF9PUkJJVCcgfSk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlVm90ZSA9IChvcHRpb24pID0+IHsKICAgICAgICBpZiAoaXNIb3N0KSB7CiAgICAgICAgICAgIHNldFZvdGVzKHByZXYgPT4gewogICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IHsgLi4ucHJldiB9OwogICAgICAgICAgICAgICAgaWYgKG9wdGlvbiA9PT0gJ3JvYm90cycpCiAgICAgICAgICAgICAgICAgICAgbmV4dC5yb2JvdHMrKzsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBuZXh0LnNhbWUrKzsKICAgICAgICAgICAgICAgIHJldHVybiBuZXh0OwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQ/LnNlbmQoeyB0eXBlOiAnVk9URV9DQVNUJywgb3B0aW9uIH0pOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBoYW5kbGVEb3dubG9hZCA9ICgpID0+IHsKICAgICAgICBjb25zdCBodG1sQ29udGVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vdXRlckhUTUw7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtodG1sQ29udGVudF0sIHsgdHlwZTogJ3RleHQvaHRtbCcgfSk7CiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICBhLmRvd25sb2FkID0gJ2xldGhhbF9zY2F2ZW5nZXJfcHJvdG9jb2wuaHRtbCc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsKICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTsKICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICB9OwogICAgY29uc3QgdG9nZ2xlRnVsbHNjcmVlbiA9ICgpID0+IHsKICAgICAgICBpZiAoIWRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50KSB7CiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgYXR0ZW1wdGluZyB0byBlbmFibGUgZnVsbHNjcmVlbjogJHtlcnIubWVzc2FnZX1gKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgcmV0dXJuIChfanN4cyhMYXlvdXQsIHsgY2hpbGRyZW46IFtnYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5NRU5VICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLWZ1bGwgc3BhY2UteS04IHAtMTAgcmVsYXRpdmUiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIHRvcC02IHJpZ2h0LTYgZmxleCBmbGV4LWNvbCBpdGVtcy1lbmQgZ2FwLTIgei01MCIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1ncmVlbi05MDAvNTAgdGV4dC14cyBmb250LW1vbm8gdHJhY2tpbmctd2lkZXN0IiwgY2hpbGRyZW46IFtfanN4KEdsb2JlLCB7IHNpemU6IDEyIH0pLCAiIE5FVF9TVEFUVVM6ICIsIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtZ3JlZW4tNjAwIGFuaW1hdGUtcHVsc2UiLCBjaGlsZHJlbjogIk9OTElORSIgfSldIH0pLCBfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiB0b2dnbGVGdWxsc2NyZWVuLCBjbGFzc05hbWU6ICJib3JkZXIgYm9yZGVyLWdyZWVuLTkwMC81MCB0ZXh0LWdyZWVuLTgwMCBob3Zlcjp0ZXh0LWdyZWVuLTQwMCBob3Zlcjpib3JkZXItZ3JlZW4tNTAwIGJnLWJsYWNrLzUwIHB4LTMgcHktMSB0ZXh0LXhzIGZvbnQtbW9ubyB0cmFja2luZy13aWRlc3QgdHJhbnNpdGlvbi1hbGwgdXBwZXJjYXNlIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGdyb3VwIiwgY2hpbGRyZW46IFtfanN4KE1heGltaXplLCB7IHNpemU6IDEyLCBjbGFzc05hbWU6ICJncm91cC1ob3ZlcjpzY2FsZS0xMTAiIH0pLCAiIFsgRlVMTFNDUkVFTiBdIl0gfSksIF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6IGhhbmRsZURvd25sb2FkLCBjbGFzc05hbWU6ICJib3JkZXIgYm9yZGVyLWdyZWVuLTkwMC81MCB0ZXh0LWdyZWVuLTgwMCBob3Zlcjp0ZXh0LWdyZWVuLTQwMCBob3Zlcjpib3JkZXItZ3JlZW4tNTAwIGJnLWJsYWNrLzUwIHB4LTMgcHktMSB0ZXh0LXhzIGZvbnQtbW9ubyB0cmFja2luZy13aWRlc3QgdHJhbnNpdGlvbi1hbGwgdXBwZXJjYXNlIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGdyb3VwIiwgY2hpbGRyZW46IFtfanN4KERvd25sb2FkLCB7IHNpemU6IDEyLCBjbGFzc05hbWU6ICJncm91cC1ob3ZlcjphbmltYXRlLWJvdW5jZSIgfSksICIgWyBET1dOTE9BRCBIVE1MIF0iXSB9KV0gfSksIF9qc3hzKCJoMSIsIHsgY2xhc3NOYW1lOiAidGV4dC05eGwgZm9udC1ib2xkIHRleHQtZ3JlZW4tNTAwIHRleHQtZ2xvdyB1cHBlcmNhc2UgdHJhY2tpbmctdGlnaHRlciB0ZXh0LWNlbnRlciIsIGNoaWxkcmVuOiBbIkxldGhhbCIsIF9qc3goImJyIiwge30pLCAiU2NhdmVuZ2VyIl0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJsYWNrIGJvcmRlci0yIGJvcmRlci1ncmVlbi05MDAgcC04IHNwYWNlLXktNCB3LWZ1bGwgbWF4LXctbWQgc2hhZG93LTJ4bCByZWxhdGl2ZSIsIGNoaWxkcmVuOiBbX2pzeCgiaW5wdXQiLCB7IGNsYXNzTmFtZTogInctZnVsbCBiZy1ibGFjayBib3JkZXIgYm9yZGVyLWdyZWVuLTcwMCBwLTQgdGV4dC1ncmVlbi01MDAgZm9udC1tb25vIHRleHQteGwgZm9jdXM6Ym9yZGVyLWdyZWVuLTQwMCBvdXRsaW5lLW5vbmUiLCBwbGFjZWhvbGRlcjogIkVNUExPWUVFIElEIiwgdmFsdWU6IG1lbnVOYW1lLCBvbkNoYW5nZTogZSA9PiBzZXRNZW51TmFtZShlLnRhcmdldC52YWx1ZSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTIiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogc2V0dXBIb3N0LCBjbGFzc05hbWU6ICJmbGV4LTEgYmctZ3JlZW4tODAwIHRleHQtYmxhY2sgcC00IGZvbnQtYm9sZCBob3ZlcjpiZy1ncmVlbi02MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogIkhPU1QiIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldHVwSm9pbigpLCBjbGFzc05hbWU6ICJmbGV4LTEgYmctZ3JlZW4tOTAwLzUwIHRleHQtZ3JlZW4tNDAwIHAtNCBib3JkZXIgYm9yZGVyLWdyZWVuLTcwMCBob3ZlcjpiZy1ncmVlbi05MDAgdHJhbnNpdGlvbi1jb2xvcnMiLCBjaGlsZHJlbjogIkpPSU4iIH0pXSB9KSwgX2pzeCgiaW5wdXQiLCB7IGNsYXNzTmFtZTogInctZnVsbCBiZy1ibGFjayBib3JkZXIgYm9yZGVyLWdyZWVuLTcwMCBwLTIgdGV4dC1ncmVlbi01MDAgdXBwZXJjYXNlIGZvY3VzOmJvcmRlci1ncmVlbi00MDAgb3V0bGluZS1ub25lIiwgcGxhY2Vob2xkZXI6ICJST09NIENPREUiLCB2YWx1ZTogam9pbkNvZGUsIG9uQ2hhbmdlOiBlID0+IHNldEpvaW5Db2RlKGUudGFyZ2V0LnZhbHVlKSB9KSwgaXNDb25uZWN0aW5nICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXllbGxvdy01MDAgdGV4dC1jZW50ZXIgYW5pbWF0ZS1wdWxzZSBmbGV4IGZsZXgtY29sIGdhcC0yIGl0ZW1zLWNlbnRlciIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjaGlsZHJlbjogY29ubmVjdEVycm9yIHx8ICJFU1RBQkxJU0hJTkcgVVBMSU5LLi4uIiB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiB7IGNsZWFudXBOZXR3b3JraW5nKCk7IHNldElzQ29ubmVjdGluZyhmYWxzZSk7IH0sIGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1yZWQtNTAwIGJvcmRlciBib3JkZXItcmVkLTkwMCBweC0yIHB5LTEgaG92ZXI6YmctcmVkLTkwMC8yMCIsIGNoaWxkcmVuOiAiWyBDQU5DRUwgXSIgfSldIH0pKV0gfSldIH0pKSwgZ2FtZVN0YXRlID09PSBHYW1lU3RhdGUuTE9CQlkgJiYgKF9qc3goTG9iYnksIHsgaXNIb3N0OiBpc0hvc3QsIGxvY2FsUGxheWVySWQ6IHBsYXllcklkLCByb29tQ29kZTogaG9zdENvZGUgfHwgam9pbkNvZGUsIHBsYXllck5hbWU6IG1lbnVOYW1lLCBwbGF5ZXJzOiBvdGhlclBsYXllcnMsIGNoYXRNZXNzYWdlczogY2hhdE1lc3NhZ2VzLCBvblNlbmRNZXNzYWdlOiAodHh0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSG9zdCkKICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2hhdE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHsgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksIHNlbmRlcjogbWVudU5hbWUsIHRleHQ6IHR4dCwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH1dKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQ/LnNlbmQoeyB0eXBlOiAnUExBWUVSX1VQREFURScsIGlkOiBwbGF5ZXJJZCwgY2hhdDogW3sgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksIHRleHQ6IHR4dCwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH1dIH0pOwogICAgICAgICAgICAgICAgfSwgb25TdGFydEdhbWU6IGhhbmRsZUxhdW5jaCwgb25MZWF2ZUxvYmJ5OiAoKSA9PiBzZXRHYW1lU3RhdGUoR2FtZVN0YXRlLk1FTlUpLCBjdXJyZW50TWFwOiBzdGF0cy5jdXJyZW50TWFwLCBvblNlbGVjdE1hcDogKG0pID0+IHsgaWYgKGlzSG9zdCkKICAgICAgICAgICAgICAgICAgICBzZXRTdGF0cyhzID0+ICh7IC4uLnMsIGN1cnJlbnRNYXA6IG0gfSkpOyB9LCBpc01vYmlsZTogZmFsc2UsIG9uUHJvbW90ZTogKCkgPT4geyB9LCBvblRvZ2dsZVB1YmxpYzogKCkgPT4geyB9LCBvbkNvbG9yQ2hhbmdlOiBoYW5kbGVDb2xvckNoYW5nZSwgYW1JTmV0d29ya0hvc3Q6IGlzSG9zdCB9KSksIGdhbWVTdGF0ZSA9PT0gR2FtZVN0YXRlLlNISVAgJiYgX2pzeChUZXJtaW5hbCwgeyBzdGF0czogc3RhdHMsIGxvZ3M6IGxvZ3MsIG9uQ29tbWFuZDogKCkgPT4geyB9LCBvbkxhdW5jaDogaGFuZGxlTGFuZCwgb25TZWxsOiAoKSA9PiB7IH0sIGlzSG9zdDogYW1JQ29tbWFuZGVyIH0pLCBnYW1lU3RhdGUgPT09IEdhbWVTdGF0ZS5FWFBMT1JJTkcgJiYgKF9qc3goRXhwbG9yYXRpb24sIHsgcm9vbTogcm9vbSwgc3RhdHM6IHN0YXRzLCBvbkxlYXZlOiBoYW5kbGVHYW1lRW5kLCBvbkRlYXRoOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSG9zdCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZSA9IHBsYXllclVwZGF0ZXNSZWYuY3VycmVudC5maW5kKHAgPT4gcC5pZCA9PT0gcGxheWVySWQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLmlzRGVhZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5sYXN0U2VlbiA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllclVwZGF0ZXNSZWYuY3VycmVudC5sZW5ndGggPT09IDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVHYW1lRW5kKFtdLCAxMDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaG9zdENvbm5lY3Rpb25SZWYuY3VycmVudD8uc2VuZCh7IHR5cGU6ICdQTEFZRVJfVVBEQVRFJywgaWQ6IHBsYXllcklkLCBpc0RlYWQ6IHRydWUgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgb3RoZXJQbGF5ZXJzOiBvdGhlclBsYXllcnMsIHBsYXllclVwZGF0ZXNSZWY6IHBsYXllclVwZGF0ZXNSZWYsIGNoYXRNZXNzYWdlczogY2hhdE1lc3NhZ2VzLCBvblNlbmRNZXNzYWdlOiAodHh0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSG9zdCkKICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2hhdE1lc3NhZ2VzKHByZXYgPT4gWy4uLnByZXYsIHsgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksIHNlbmRlcjogbWVudU5hbWUsIHRleHQ6IHR4dCwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH1dKTsKICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQ/LnNlbmQoeyB0eXBlOiAnUExBWUVSX1VQREFURScsIGlkOiBwbGF5ZXJJZCwgY2hhdDogW3sgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksIHRleHQ6IHR4dCwgdGltZXN0YW1wOiBEYXRlLm5vdygpIH1dIH0pOwogICAgICAgICAgICAgICAgfSwgcm9vbUNvZGU6IGhvc3RDb2RlIHx8IGpvaW5Db2RlLCBpc01vYmlsZTogZmFsc2UsIG9uU2V0SW5TaGlwOiAoKSA9PiB7IH0sIG9uUmVwb3J0UG9zaXRpb246ICh4LCB5LCB6LCByb3QsIHBpdGNoLCBub2lzZSwgaXNGbGFzaGxpZ2h0T24pID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNIb3N0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lID0gcGxheWVyVXBkYXRlc1JlZi5jdXJyZW50LmZpbmQocCA9PiBwLmlkID09PSBwbGF5ZXJJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucG9zaXRpb24gPSB7IHgsIHksIHogfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJvdGF0aW9uID0gcm90OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucm90YXRpb25QaXRjaCA9IHBpdGNoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUubGFzdFNlZW4gPSBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuaXNGbGFzaGxpZ2h0T24gPSBpc0ZsYXNobGlnaHRPbjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RDb25uZWN0aW9uUmVmLmN1cnJlbnQ/LnNlbmQoeyB0eXBlOiAnUExBWUVSX1VQREFURScsIGlkOiBwbGF5ZXJJZCwgcG9zaXRpb246IHsgeCwgeSwgeiB9LCByb3RhdGlvbjogcm90LCByb3RhdGlvblBpdGNoOiBwaXRjaCwgbm9pc2VMZXZlbDogU291bmRGWC5nZXROb2lzZUxldmVsKCksIGlzRmxhc2hsaWdodE9uIH0pOwogICAgICAgICAgICAgICAgfSwgaXNEZWFkOiBmYWxzZSwgbG9iYnlQaGFzZTogIlBMQVlJTkciLCBvblVwZGF0ZUludmVudG9yeTogKGl0ZW1zKSA9PiB7IGN1cnJlbnRTZXNzaW9uRGF0YVJlZi5jdXJyZW50LmludmVudG9yeSA9IGl0ZW1zOyB9LCBvblJlcXVlc3REZXBhcnR1cmU6IGhhbmRsZVJlcXVlc3REZXBhcnR1cmUsIG9uQ29tbWFuZDogKCkgPT4geyB9LCBvblNlbGw6ICgpID0+IHsgfSwgbG9nczogbG9ncywgb25SZXBvcnRIZWFsdGg6IChocCkgPT4geyBjdXJyZW50U2Vzc2lvbkRhdGFSZWYuY3VycmVudC5oZWFsdGggPSBocDsgfSwgcGxheWVySWQ6IHBsYXllcklkLCBvblJlcG9ydEJhdHRlcnk6ICgpID0+IHsgfSB9KSldIH0pKTsKfQo=","@/components/Lobby":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCBtZW1vIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBNaWMsIE1pY09mZiwgU2VuZCwgVXNlcnMsIENvcHksIFBsYXksIFN0YXIsIFgsIFBhbGV0dGUsIEdob3N0LCBVc2VyLCBVc2VyQ2hlY2ssIE1lc3NhZ2VTcXVhcmUgfSBmcm9tICdsdWNpZGUtcmVhY3QnOwppbXBvcnQgeyBTb3VuZEZYIH0gZnJvbSAnQC9zZXJ2aWNlcy9hdWRpb0VuZ2luZSc7CmltcG9ydCB7IE1vZGVsVmlld2VyTW9kYWwgfSBmcm9tICdAL2NvbXBvbmVudHMvTW9kZWxWaWV3ZXJNb2RhbCc7CmNvbnN0IENPTE9SUyA9IFsKICAgICcjZmY2NjAwJywgJyMwMGZmZmYnLCAnIzAwZmYwMCcsICcjZmYwMGZmJywgJyNmZmZmMDAnLCAnI2ZmMDAwMCcsCiAgICAnIzk5MzNmZicsICcjZmZmZmZmJywgJyMwMDgwODAnLCAnIzAwMDA4MCcsICcjODAwMDAwJywgJyM4MDgwMDAnLAogICAgJyM4MDgwODAnLCAnI2MwYzBjMCcsICcjZmY3ZjUwJywgJyM0MGUwZDAnCl07CmV4cG9ydCBjb25zdCBMb2JieSA9IG1lbW8oKHsgaXNIb3N0LCBsb2NhbFBsYXllcklkLCByb29tQ29kZSwgcGxheWVyTmFtZSwgcGxheWVycywgY2hhdE1lc3NhZ2VzLCBvblNlbmRNZXNzYWdlLCBvblN0YXJ0R2FtZSwgb25MZWF2ZUxvYmJ5LCBjdXJyZW50TWFwLCBvblNlbGVjdE1hcCwgaXNNb2JpbGUsIG9uUHJvbW90ZSwgb25LaWNrLCBzdGF0dXNNZXNzYWdlLCBhbUlOZXR3b3JrSG9zdCwgb25Db2xvckNoYW5nZSB9KSA9PiB7CiAgICBjb25zdCBbaW5wdXRUZXh0LCBzZXRJbnB1dFRleHRdID0gdXNlU3RhdGUoJycpOwogICAgY29uc3QgW21pY0VuYWJsZWQsIHNldE1pY0VuYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgY2hhdEVuZFJlZiA9IFJlYWN0LnVzZVJlZihudWxsKTsKICAgIGNvbnN0IFtjb3B5RmVlZGJhY2ssIHNldENvcHlGZWVkYmFja10gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbc2hvd01vZGVsVmlld2VyLCBzZXRTaG93TW9kZWxWaWV3ZXJdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgbXlQbGF5ZXIgPSBwbGF5ZXJzLmZpbmQocCA9PiBwLmlkID09PSBsb2NhbFBsYXllcklkKTsKICAgIGNvbnN0IFtpc1BoYW50b21Nb2RlLCBzZXRJc1BoYW50b21Nb2RlXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKG15UGxheWVyKQogICAgICAgICAgICBzZXRJc1BoYW50b21Nb2RlKCEhbXlQbGF5ZXIuaXNQaGFudG9tKTsKICAgICAgICBjaGF0RW5kUmVmLmN1cnJlbnQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0pOwogICAgfSwgW2NoYXRNZXNzYWdlcywgbXlQbGF5ZXJdKTsKICAgIGNvbnN0IGhhbmRsZVNlbmQgPSAoZSkgPT4gewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBpZiAoIWlucHV0VGV4dC50cmltKCkpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBTb3VuZEZYLnBsYXlLZXkoKTsKICAgICAgICBvblNlbmRNZXNzYWdlKGlucHV0VGV4dCk7CiAgICAgICAgc2V0SW5wdXRUZXh0KCcnKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVDb3B5TGluayA9ICgpID0+IHsKICAgICAgICBTb3VuZEZYLnBsYXlLZXkoKTsKICAgICAgICBjb25zdCB1cmwgPSBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufSR7d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lfT9jb2RlPSR7cm9vbUNvZGV9YDsKICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh1cmwpLnRoZW4oKCkgPT4gewogICAgICAgICAgICBzZXRDb3B5RmVlZGJhY2sodHJ1ZSk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gc2V0Q29weUZlZWRiYWNrKGZhbHNlKSwgMjAwMCk7CiAgICAgICAgfSk7CiAgICB9OwogICAgY29uc3QgdXBkYXRlQXBwZWFyYW5jZSA9IChjaGFuZ2VzKSA9PiB7CiAgICAgICAgaWYgKG9uQ29sb3JDaGFuZ2UgJiYgbXlQbGF5ZXIpIHsKICAgICAgICAgICAgb25Db2xvckNoYW5nZShjaGFuZ2VzLmNvbG9yIHx8IG15UGxheWVyLmNvbG9yLCBjaGFuZ2VzLnNlY29uZGFyeSB8fCBteVBsYXllci5zZWNvbmRhcnlDb2xvciB8fCAnIzAwMDAwMCcsIGNoYW5nZXMuaXNQaGFudG9tICE9PSB1bmRlZmluZWQgPyBjaGFuZ2VzLmlzUGhhbnRvbSA6IG15UGxheWVyLmlzUGhhbnRvbSwgY2hhbmdlcy5ib2R5VHlwZSB8fCBteVBsYXllci5ib2R5VHlwZSB8fCAnbWFsZScpOwogICAgICAgIH0KICAgIH07CiAgICByZXR1cm4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgaC1mdWxsIG1heC13LTd4bCBteC1hdXRvIHAtNCBtZDpwLTggdy1mdWxsIGZvbnQtdnQzMjMgdGV4dC1ncmVlbi01MDAgb3ZlcmZsb3cteS1hdXRvIiwgY2hpbGRyZW46IFtzaG93TW9kZWxWaWV3ZXIgJiYgX2pzeChNb2RlbFZpZXdlck1vZGFsLCB7IG9uQ2xvc2U6ICgpID0+IHNldFNob3dNb2RlbFZpZXdlcihmYWxzZSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJvcmRlci00IGJvcmRlci1ncmVlbi05MDAgYmctYmxhY2svOTAgcC00IG1kOnAtNiByb3VuZGVkLWxnIGZsZXgtMSBmbGV4IGZsZXgtY29sIHNoYWRvdy1bMF8wXzUwcHhfcmdiYSgwLDEwMCwwLDAuMildIHJlbGF0aXZlIG1pbi1oLVs3MDBweF0iLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IG1kOml0ZW1zLWNlbnRlciBib3JkZXItYi0yIGJvcmRlci1ncmVlbi04MDAgcGItNCBtYi02IGdhcC00IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4LTEiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInctMyBoLTMgYmctZ3JlZW4tNTAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLXB1bHNlIHNoYWRvdy1bMF8wXzEwcHhfIzBmMF0iIH0pLCBfanN4KCJoMSIsIHsgY2xhc3NOYW1lOiAidGV4dC0zeGwgbWQ6dGV4dC01eGwgZm9udC1ib2xkIHRleHQtZ2xvdyB0cmFja2luZy10aWdodCIsIGNoaWxkcmVuOiAiTE9CQlkgVVBMSU5LIiB9KV0gfSksIHN0YXR1c01lc3NhZ2UgJiYgX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQteWVsbG93LTUwMCB0ZXh0LXNtIGFuaW1hdGUtcHVsc2UgbWwtNiIsIGNoaWxkcmVuOiBbIlsiLCBzdGF0dXNNZXNzYWdlLCAiXSJdIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBtZDpmbGV4LXJvdyBpdGVtcy1lbmQgbWQ6aXRlbXMtY2VudGVyIGdhcC00IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBiZy1ibGFjayBib3JkZXIgYm9yZGVyLWdyZWVuLTgwMCBwLTEgcm91bmRlZCBweC0yIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWdyZWVuLTcwMCB0ZXh0LXNtIiwgY2hpbGRyZW46ICJTRUNVUkUgRlJFUToiIH0pLCBfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiBoYW5kbGVDb3B5TGluaywgY2xhc3NOYW1lOiAidGV4dC1ncmVlbi0zMDAgZm9udC1ib2xkIHRleHQteGwgaG92ZXI6dGV4dC13aGl0ZSB0cmFuc2l0aW9uLWNvbG9ycyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBncm91cCIsIGNoaWxkcmVuOiBbcm9vbUNvZGUsICIgIiwgX2pzeChDb3B5LCB7IHNpemU6IDE2LCBjbGFzc05hbWU6ICJncm91cC1ob3ZlcjpzY2FsZS0xMTAgdHJhbnNpdGlvbi10cmFuc2Zvcm0iIH0pXSB9KSwgY29weUZlZWRiYWNrICYmIF9qc3goInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQtZ3JlZW4tNDAwIHRleHQteHMgYW5pbWF0ZS1wdWxzZSIsIGNoaWxkcmVuOiAiQ09QSUVEIiB9KV0gfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4geyBTb3VuZEZYLnBsYXlLZXkoKTsgb25MZWF2ZUxvYmJ5KCk7IH0sIGNsYXNzTmFtZTogImJvcmRlciBib3JkZXItcmVkLTkwMCB0ZXh0LXJlZC03MDAgcHgtNCBweS0yIGhvdmVyOmJnLXJlZC05MDAvMjAgaG92ZXI6dGV4dC1yZWQtNTAwIHRyYW5zaXRpb24tY29sb3JzIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgZm9udC1ib2xkIHRleHQtc20iLCBjaGlsZHJlbjogIkFib3J0IE1pc3Npb24iIH0pXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYGZsZXggZmxleC1jb2wgbGc6ZmxleC1yb3cgZ2FwLTYgZmxleC0xIG1pbi1oLTAgJHtpc01vYmlsZSA/ICdvdmVyZmxvdy15LWF1dG8nIDogJyd9YCwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4LVsyXSBmbGV4IGZsZXgtY29sIGdhcC02IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy1ncmVlbi05NTAvMjAgYm9yZGVyIGJvcmRlci1ncmVlbi05MDAgcC00IHJvdW5kZWQgZmxleC0xIGZsZXggZmxleC1jb2wgbWluLWgtWzI1MHB4XSBzaGFkb3ctaW5uZXIiLCBjaGlsZHJlbjogW19qc3hzKCJoMyIsIHsgY2xhc3NOYW1lOiAidGV4dC14bCBib3JkZXItYiBib3JkZXItZ3JlZW4tOTAwIHBiLTIgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LWdyZWVuLTQwMCBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IiwgY2hpbGRyZW46IFtfanN4KFVzZXJzLCB7IHNpemU6IDIwIH0pLCAiIENSRVcgTUFOSUZFU1QgKCIsIHBsYXllcnMubGVuZ3RoLCAiLzQpIl0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAic3BhY2UteS0zIG92ZXJmbG93LXktYXV0byBmbGV4LTEgcHItMiIsIGNoaWxkcmVuOiBwbGF5ZXJzLmxlbmd0aCA9PT0gMCA/IChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtZ3JlZW4tODAwIGl0YWxpYyBwLTQgdGV4dC1jZW50ZXIgYm9yZGVyIGJvcmRlci1kYXNoZWQgYm9yZGVyLWdyZWVuLTkwMC81MCByb3VuZGVkIiwgY2hpbGRyZW46ICJXYWl0aW5nIGZvciBjb25uZWN0aW9uLi4uIiB9KSkgOiAocGxheWVycy5tYXAoKHApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVEaWZmID0gRGF0ZS5ub3coKSAtIHAubGFzdFNlZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc09mZmxpbmUgPSB0aW1lRGlmZiA+IDE1MDAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNZSA9IHAuaWQgPT09IGxvY2FsUGxheWVySWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYGdyb3VwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBiZy1ibGFjay80MCBwLTMgcm91bmRlZCBib3JkZXItbC00IHRyYW5zaXRpb24tYWxsIGhvdmVyOmJnLWdyZWVuLTkwMC8yMCAke2lzT2ZmbGluZSA/ICdib3JkZXItcmVkLTkwMCBvcGFjaXR5LTUwJyA6ICdib3JkZXItZ3JlZW4tNjAwJ30gJHtwLmlzUGhhbnRvbSA/ICdiZy1jeWFuLTkwMC8xMCcgOiAnJ31gLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGdhcC00IiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJyZWxhdGl2ZSB3LTEwIGgtMTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2sgcm91bmRlZCBib3JkZXIgYm9yZGVyLWdyZWVuLTkwMC81MCIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6IGB3LTggaC04IHJvdW5kZWQtc20gYm9yZGVyLTIgJHtwLmlzUGhhbnRvbSA/ICdib3JkZXItZGFzaGVkIG9wYWNpdHktNzAgYW5pbWF0ZS1wdWxzZScgOiAnYm9yZGVyLXNvbGlkJ31gLCBzdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHAuY29sb3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBwLnNlY29uZGFyeUNvbG9yIHx8ICcjZmZmJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94U2hhZG93OiBgMCAwIDEwcHggJHtwLmNvbG9yfTQwYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSksIHAuaXNQaGFudG9tICYmIF9qc3goR2hvc3QsIHsgc2l6ZTogMjAsIGNsYXNzTmFtZTogImFic29sdXRlIHRleHQtY3lhbi0zMDAgZHJvcC1zaGFkb3ctWzBfMF81cHhfY3lhbl0iIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCIsIGNoaWxkcmVuOiBbX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogYHRleHQteGwgbGVhZGluZy1ub25lICR7aXNNZSA/ICdmb250LWJvbGQgdGV4dC13aGl0ZScgOiAndGV4dC1ncmVlbi0zMDAnfWAsIGNoaWxkcmVuOiBbcC5uYW1lLnRvVXBwZXJDYXNlKCksICIgIiwgcC5pc0hvc3QgJiYgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAidGV4dC15ZWxsb3ctNTAwIHRleHQteHMgbWwtMiB0cmFja2luZy13aWRlc3QgYm9yZGVyIGJvcmRlci15ZWxsb3ctOTAwIHB4LTEgcm91bmRlZCBiZy15ZWxsb3ctOTAwLzIwIiwgY2hpbGRyZW46ICJDT01NQU5ERVIiIH0pXSB9KSwgX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1ncmVlbi03MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgbXQtMSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZSIsIGNoaWxkcmVuOiBbcC5pc1BoYW50b20gPyBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWN5YW4tNzAwIiwgY2hpbGRyZW46ICJTcGVjdHJhbCBBbm9tYWx5IiB9KSA6IChwLmJvZHlUeXBlID09PSAnZmVtYWxlJyA/ICdTY2F2ZW5nZXIgVHlwZS1GJyA6ICdTY2F2ZW5nZXIgVHlwZS1NJyksIGlzT2ZmbGluZSAmJiBfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXJlZC01MDAgZm9udC1ib2xkIGFuaW1hdGUtcHVsc2UiLCBjaGlsZHJlbjogIiEgU0lHTkFMIExPU1QgISIgfSldIH0pXSB9KV0gfSksICFpc01lICYmIGFtSU5ldHdvcmtIb3N0ICYmIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGdhcC0yIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gb25Qcm9tb3RlKHAuaWQpLCBjbGFzc05hbWU6ICJwLTIgaG92ZXI6YmcteWVsbG93LTkwMC8zMCB0ZXh0LXllbGxvdy04MDAgaG92ZXI6dGV4dC15ZWxsb3ctNTAwIHJvdW5kZWQgYm9yZGVyIGJvcmRlci10cmFuc3BhcmVudCBob3Zlcjpib3JkZXIteWVsbG93LTkwMCIsIHRpdGxlOiAiUHJvbW90ZSB0byBIb3N0IiwgY2hpbGRyZW46IF9qc3goU3RhciwgeyBzaXplOiAxNiB9KSB9KSwgb25LaWNrICYmIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gb25LaWNrKHAuaWQpLCBjbGFzc05hbWU6ICJwLTIgaG92ZXI6YmctcmVkLTkwMC8zMCB0ZXh0LXJlZC04MDAgaG92ZXI6dGV4dC1yZWQtNTAwIHJvdW5kZWQgYm9yZGVyIGJvcmRlci10cmFuc3BhcmVudCBob3Zlcjpib3JkZXItcmVkLTkwMCIsIHRpdGxlOiAiS2ljayBQbGF5ZXIiLCBjaGlsZHJlbjogX2pzeChYLCB7IHNpemU6IDE2IH0pIH0pXSB9KSldIH0sIHAuaWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctZ3JlZW4tOTUwLzEwIGJvcmRlciBib3JkZXItZ3JlZW4tOTAwIHAtNCByb3VuZGVkIHNwYWNlLXktNCBzaGFkb3ctaW5uZXIiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBib3JkZXItYiBib3JkZXItZ3JlZW4tOTAwLzUwIHBiLTIiLCBjaGlsZHJlbjogW19qc3hzKCJoMyIsIHsgY2xhc3NOYW1lOiAidGV4dC14bCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB0ZXh0LWdyZWVuLTQwMCBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IiwgY2hpbGRyZW46IFtfanN4KFBhbGV0dGUsIHsgc2l6ZTogMjAgfSksICIgU1VJVCBGQUJSSUNBVElPTiJdIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGdhcC0zIiwgY2hpbGRyZW46IFtfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFR5cGUgPSBteVBsYXllcj8uYm9keVR5cGUgPT09ICdmZW1hbGUnID8gJ21hbGUnIDogJ2ZlbWFsZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQXBwZWFyYW5jZSh7IGJvZHlUeXBlOiBuZXh0VHlwZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTb3VuZEZYLnBsYXlLZXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNsYXNzTmFtZTogYHRleHQtc20gcHgtMyBweS0xIGJvcmRlciByb3VuZGVkIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRyYW5zaXRpb24tYWxsIGhvdmVyOmJnLWdyZWVuLTkwMC8zMCAke215UGxheWVyPy5ib2R5VHlwZSA9PT0gJ2ZlbWFsZScgPyAnYm9yZGVyLXBpbmstOTAwIHRleHQtcGluay00MDAnIDogJ2JvcmRlci1ibHVlLTkwMCB0ZXh0LWJsdWUtNDAwJ31gLCBjaGlsZHJlbjogW215UGxheWVyPy5ib2R5VHlwZSA9PT0gJ2ZlbWFsZScgPyBfanN4KFVzZXJDaGVjaywgeyBzaXplOiAxNCB9KSA6IF9qc3goVXNlciwgeyBzaXplOiAxNCB9KSwgbXlQbGF5ZXI/LmJvZHlUeXBlID09PSAnZmVtYWxlJyA/ICdUWVBFLUYnIDogJ1RZUEUtTSddIH0pLCBfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9ICFpc1BoYW50b21Nb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzUGhhbnRvbU1vZGUobmV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQXBwZWFyYW5jZSh7IGlzUGhhbnRvbTogbmV4dCB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTb3VuZEZYLnBsYXlLZXkoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNsYXNzTmFtZTogYHRleHQtc20gcHgtMyBweS0xIGJvcmRlciByb3VuZGVkIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRyYW5zaXRpb24tYWxsICR7aXNQaGFudG9tTW9kZSA/ICdiZy1jeWFuLTkwMC8zMCBib3JkZXItY3lhbi01MDAgdGV4dC1jeWFuLTMwMCBzaGFkb3ctWzBfMF8xNXB4X3JnYmEoMCwyNTUsMjU1LDAuMildJyA6ICdib3JkZXItZ3JlZW4tODAwIHRleHQtZ3JlZW4tNzAwIGhvdmVyOmJvcmRlci1ncmVlbi01MDAgaG92ZXI6dGV4dC1ncmVlbi01MDAnfWAsIGNoaWxkcmVuOiBbX2pzeChHaG9zdCwgeyBzaXplOiAxNCB9KSwgIiBTUEVDVFJBTCJdIH0pXSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTQiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNoaWxkcmVuOiBbX2pzeCgibGFiZWwiLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1ncmVlbi02MDAgYmxvY2sgbWItMiB0cmFja2luZy13aWRlc3QgdXBwZXJjYXNlIiwgY2hpbGRyZW46IGlzUGhhbnRvbU1vZGUgPyAnRWN0b3BsYXNtIFRpbnQnIDogJ1ByaW1hcnkgUGxhdGluZycgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LXdyYXAgZ2FwLTIiLCBjaGlsZHJlbjogQ09MT1JTLm1hcChjb2xvciA9PiAoX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiB7IFNvdW5kRlgucGxheUtleSgpOyB1cGRhdGVBcHBlYXJhbmNlKHsgY29sb3IgfSk7IH0sIGNsYXNzTmFtZTogYHctOCBoLTggcm91bmRlZC1zbSBib3JkZXItMiB0cmFuc2l0aW9uLXRyYW5zZm9ybSBob3ZlcjpzY2FsZS0xMTAgJHtteVBsYXllcj8uY29sb3IgPT09IGNvbG9yID8gJ2JvcmRlci13aGl0ZSByaW5nLTIgcmluZy1ncmVlbi01MDAgei0xMCBzY2FsZS0xMTAnIDogJ2JvcmRlci10cmFuc3BhcmVudCBvcGFjaXR5LTgwIGhvdmVyOm9wYWNpdHktMTAwJ31gLCBzdHlsZTogeyBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yIH0gfSwgY29sb3IpKSkgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjaGlsZHJlbjogW19qc3goImxhYmVsIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQtZ3JlZW4tNjAwIGJsb2NrIG1iLTIgdHJhY2tpbmctd2lkZXN0IHVwcGVyY2FzZSIsIGNoaWxkcmVuOiBpc1BoYW50b21Nb2RlID8gJ1NwaXJpdCBDb3JlIChHbG93KScgOiAnVmlzb3IgRGV0YWlsJyB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtd3JhcCBnYXAtMiIsIGNoaWxkcmVuOiBDT0xPUlMuc2xpY2UoKS5yZXZlcnNlKCkubWFwKGNvbG9yID0+IChfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHsgU291bmRGWC5wbGF5S2V5KCk7IHVwZGF0ZUFwcGVhcmFuY2UoeyBzZWNvbmRhcnk6IGNvbG9yIH0pOyB9LCBjbGFzc05hbWU6IGB3LTggaC04IHJvdW5kZWQtZnVsbCBib3JkZXItMiB0cmFuc2l0aW9uLXRyYW5zZm9ybSBob3ZlcjpzY2FsZS0xMTAgJHtteVBsYXllcj8uc2Vjb25kYXJ5Q29sb3IgPT09IGNvbG9yID8gJ2JvcmRlci13aGl0ZSByaW5nLTIgcmluZy13aGl0ZSB6LTEwIHNjYWxlLTExMCcgOiAnYm9yZGVyLXRyYW5zcGFyZW50IG9wYWNpdHktNzAgaG92ZXI6b3BhY2l0eS0xMDAnfWAsIHN0eWxlOiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfSB9LCBjb2xvcikpKSB9KV0gfSldIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBnYXAtNCBpdGVtcy1jZW50ZXIgbXQtMiIsIGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiB7IFNvdW5kRlgucGxheUtleSgpOyBzZXRNaWNFbmFibGVkKCFtaWNFbmFibGVkKTsgfSwgY2xhc3NOYW1lOiBgcC00IGJvcmRlci0yIHJvdW5kZWQgdHJhbnNpdGlvbi1hbGwgJHttaWNFbmFibGVkID8gJ2JvcmRlci1ncmVlbi01MDAgdGV4dC1ncmVlbi00MDAgYmctZ3JlZW4tOTAwLzIwIHNoYWRvdy1bMF8wXzE1cHhfcmdiYSgwLDI1NSwwLDAuMildJyA6ICdib3JkZXItZ3JlZW4tOTAwIHRleHQtZ3JlZW4tODAwIGhvdmVyOmJvcmRlci1ncmVlbi03MDAnfWAsIGNoaWxkcmVuOiBtaWNFbmFibGVkID8gX2pzeChNaWMsIHsgc2l6ZTogMjQgfSkgOiBfanN4KE1pY09mZiwgeyBzaXplOiAyNCB9KSB9KSwgaXNIb3N0ID8gKF9qc3hzKCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHsgU291bmRGWC5wbGF5S2V5KCk7IG9uU3RhcnRHYW1lKCk7IH0sIGNsYXNzTmFtZTogImZsZXgtMSBiZy1ncmVlbi03MDAgdGV4dC1ibGFjayB0ZXh0LTN4bCBmb250LWJvbGQgcHktNCBob3ZlcjpiZy1ncmVlbi01MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTMgc2hhZG93LVswXzBfMzBweF9yZ2JhKDAsMjU1LDAsMC4zKV0gdHJhbnNpdGlvbi1hbGwgaG92ZXI6c2NhbGUtWzEuMDJdIGFjdGl2ZTpzY2FsZS1bMC45OF0iLCBjaGlsZHJlbjogW19qc3goUGxheSwgeyBzaXplOiAyOCwgZmlsbDogImJsYWNrIiB9KSwgIiBJTklUSUFURSBMQVVOQ0giXSB9KSkgOiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4LTEgdGV4dC1jZW50ZXIgYm9yZGVyLTIgYm9yZGVyLWRhc2hlZCBib3JkZXItZ3JlZW4tOTAwIHB5LTQgdGV4dC1ncmVlbi03MDAgdGV4dC14bCBmb250LWJvbGQgYmctYmxhY2svMzAiLCBjaGlsZHJlbjogIkFXQUlUSU5HIExBVU5DSCBPUkRFUlMuLi4iIH0pKV0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4LTEgZmxleCBmbGV4LWNvbCBnYXAtNiIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctZ3JlZW4tOTUwLzIwIGJvcmRlciBib3JkZXItZ3JlZW4tOTAwIHAtNCByb3VuZGVkIGZsZXggZmxleC1jb2wgZ2FwLTQiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBib3JkZXItYiBib3JkZXItZ3JlZW4tOTAwLzUwIHBiLTIiLCBjaGlsZHJlbjogW19qc3goImgzIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhsIHRleHQtZ3JlZW4tNDAwIGZvbnQtYm9sZCB0cmFja2luZy13aWRlc3QiLCBjaGlsZHJlbjogIk5BVklHQVRJT04gQ09NUFVURVIiIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHNldFNob3dNb2RlbFZpZXdlcih0cnVlKSwgY2xhc3NOYW1lOiAidGV4dC14cyBiZy1ibGFjayBweC0yIHB5LTEgcm91bmRlZCBib3JkZXIgYm9yZGVyLWdyZWVuLTgwMCBob3Zlcjpib3JkZXItZ3JlZW4tNTAwIHRleHQtZ3JlZW4tNjAwIGhvdmVyOnRleHQtZ3JlZW4tMzAwIHRyYW5zaXRpb24tY29sb3JzIiwgY2hpbGRyZW46ICJWSUVXIEVOVElUWSBEQiIgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImgtNDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYm9yZGVyIGJvcmRlci1ncmVlbi05MDAvNTAgYmctYmxhY2svNTAiLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC14cyB0ZXh0LWdyZWVuLTcwMCBtYi0xIiwgY2hpbGRyZW46ICJUQVJHRVQgTE9DS0VEIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTN4bCBmb250LWJvbGQgdGV4dC1ncmVlbi00MDAgYW5pbWF0ZS1wdWxzZSB0ZXh0LWdsb3ciLCBjaGlsZHJlbjogIkZBQ1RPUlkgNDEiIH0pXSB9KSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXgtMSBmbGV4IGZsZXgtY29sIGJnLWJsYWNrIGJvcmRlciBib3JkZXItZ3JlZW4tOTAwIHJvdW5kZWQgb3ZlcmZsb3ctaGlkZGVuIHNoYWRvdy1pbm5lciBtaW4taC1bMzAwcHhdIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy1ncmVlbi05MDAvMjAgcC0yIGJvcmRlci1iIGJvcmRlci1ncmVlbi05MDAgZm9udC1ib2xkIHRleHQtZ3JlZW4tNTAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIiwgY2hpbGRyZW46IFtfanN4KE1lc3NhZ2VTcXVhcmUsIHsgc2l6ZTogMTYgfSksICIgU1FVQUQgQ09NTVMiXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0zIGZvbnQtbW9ubyB0ZXh0LWxnIGJnLWJsYWNrLzgwIiwgY2hpbGRyZW46IFtjaGF0TWVzc2FnZXMubGVuZ3RoID09PSAwICYmIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1ncmVlbi05MDAgaXRhbGljIHRleHQtY2VudGVyIG10LTEwIiwgY2hpbGRyZW46ICJTZWN1cmUgY2hhbm5lbCBvcGVuLiIgfSksIGNoYXRNZXNzYWdlcy5tYXAoKG1zZykgPT4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYCR7bXNnLmlzU3lzdGVtID8gJ3RleHQteWVsbG93LTYwMCBpdGFsaWMgYm9yZGVyLWwtMiBib3JkZXIteWVsbG93LTkwMCBwbC0yJyA6ICd0ZXh0LWdyZWVuLTUwMCd9YCwgY2hpbGRyZW46IFshbXNnLmlzU3lzdGVtICYmIF9qc3hzKCJzcGFuIiwgeyBjbGFzc05hbWU6IGBmb250LWJvbGQgbXItMiAke21zZy5zZW5kZXIgPT09IHBsYXllck5hbWUgPyAndGV4dC1ncmVlbi0zMDAnIDogJ3RleHQtZ3JlZW4tNjAwJ31gLCBjaGlsZHJlbjogW21zZy5zZW5kZXIsICI6Il0gfSksIF9qc3goInNwYW4iLCB7IGNoaWxkcmVuOiBtc2cudGV4dCB9KV0gfSwgbXNnLmlkKSkpLCBfanN4KCJkaXYiLCB7IHJlZjogY2hhdEVuZFJlZiB9KV0gfSksIF9qc3hzKCJmb3JtIiwgeyBvblN1Ym1pdDogaGFuZGxlU2VuZCwgY2xhc3NOYW1lOiAicC0zIGJvcmRlci10IGJvcmRlci1ncmVlbi05MDAgZmxleCBnYXAtMiBiZy1ncmVlbi05NTAvMTAiLCBjaGlsZHJlbjogW19qc3goImlucHV0IiwgeyBjbGFzc05hbWU6ICJmbGV4LTEgYmctYmxhY2sgYm9yZGVyIGJvcmRlci1ncmVlbi04MDAgcC0yIHRleHQtZ3JlZW4tNDAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItZ3JlZW4tNTAwIGZvbnQtbW9ubyIsIHBsYWNlaG9sZGVyOiAiVHlwZSBtZXNzYWdlLi4uIiwgdmFsdWU6IGlucHV0VGV4dCwgb25DaGFuZ2U6IChlKSA9PiBzZXRJbnB1dFRleHQoZS50YXJnZXQudmFsdWUpIH0pLCBfanN4KCJidXR0b24iLCB7IHR5cGU6ICJzdWJtaXQiLCBjbGFzc05hbWU6ICJwLTIgdGV4dC1ncmVlbi01MDAgaG92ZXI6dGV4dC1ncmVlbi0zMDAgaG92ZXI6YmctZ3JlZW4tOTAwLzMwIHJvdW5kZWQiLCBjaGlsZHJlbjogX2pzeChTZW5kLCB7IHNpemU6IDIwIH0pIH0pXSB9KV0gfSldIH0pXSB9KV0gfSldIH0pKTsKfSk7Cg==","@/services/audioEngine":"data:application/javascript;base64,ZXhwb3J0IGNsYXNzIFNvdW5kRlggewogICAgc3RhdGljIGFzeW5jIGluaXQoKSB7CiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQgJiYgdGhpcy5jdHg/LnN0YXRlID09PSAncnVubmluZycpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBpZiAoIXRoaXMuY3R4KSB7CiAgICAgICAgICAgIGNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDsKICAgICAgICAgICAgaWYgKEF1ZGlvQ29udGV4dCkgewogICAgICAgICAgICAgICAgdGhpcy5jdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7CiAgICAgICAgICAgICAgICB0aGlzLm1hc3RlckdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgICAgICAgICB0aGlzLm1hc3RlckdhaW4uZ2Fpbi52YWx1ZSA9IDAuNDsgLy8gTWFzdGVyIFZvbHVtZQogICAgICAgICAgICAgICAgdGhpcy5tYXN0ZXJHYWluLmNvbm5lY3QodGhpcy5jdHguZGVzdGluYXRpb24pOwogICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuY3R4ICYmIHRoaXMuY3R4LnN0YXRlID09PSAnc3VzcGVuZGVkJykgewogICAgICAgICAgICBhd2FpdCB0aGlzLmN0eC5yZXN1bWUoKTsKICAgICAgICB9CiAgICB9CiAgICBzdGF0aWMgYXN5bmMgaW5pdE1pYygpIHsKICAgICAgICBhd2FpdCB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8IHRoaXMuYW5hbHlzZXIpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IGF1ZGlvOiB0cnVlIH0pOwogICAgICAgICAgICB0aGlzLm1pY1N0cmVhbSA9IHN0cmVhbTsKICAgICAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5jdHguY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2Uoc3RyZWFtKTsKICAgICAgICAgICAgdGhpcy5hbmFseXNlciA9IHRoaXMuY3R4LmNyZWF0ZUFuYWx5c2VyKCk7CiAgICAgICAgICAgIHRoaXMuYW5hbHlzZXIuZmZ0U2l6ZSA9IDI1NjsKICAgICAgICAgICAgdGhpcy5hbmFseXNlci5zbW9vdGhpbmdUaW1lQ29uc3RhbnQgPSAwLjU7CiAgICAgICAgICAgIHNvdXJjZS5jb25uZWN0KHRoaXMuYW5hbHlzZXIpOwogICAgICAgICAgICAvLyBEbyBOT1QgY29ubmVjdCB0byBtYXN0ZXJHYWluIHRvIGF2b2lkIGZlZWRiYWNrIGxvb3AKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCJNaWNyb3Bob25lIGFjY2VzcyBkZW5pZWQgb3IgdW5hdmFpbGFibGUiLCBlKTsKICAgICAgICB9CiAgICB9CiAgICBzdGF0aWMgZ2V0Tm9pc2VMZXZlbCgpIHsKICAgICAgICBpZiAoIXRoaXMuYW5hbHlzZXIpCiAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgIGNvbnN0IGRhdGFBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMuYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQpOwogICAgICAgIHRoaXMuYW5hbHlzZXIuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEoZGF0YUFycmF5KTsKICAgICAgICBsZXQgc3VtID0gMDsKICAgICAgICAvLyBGb2N1cyBvbiB2b2NhbCBmcmVxdWVuY2llcyByYW5nZSAocm91Z2hseSBiaW5zIDUtMTAwIGZvciA0NC4xa0h6KQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YUFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHN1bSArPSBkYXRhQXJyYXlbaV07CiAgICAgICAgfQogICAgICAgIGNvbnN0IGF2ZXJhZ2UgPSBzdW0gLyBkYXRhQXJyYXkubGVuZ3RoOwogICAgICAgIHJldHVybiBNYXRoLm1pbigxLjAsIGF2ZXJhZ2UgLyAxMjgpOyAvLyBOb3JtYWxpemUgcm91Z2hseQogICAgfQogICAgc3RhdGljIHNldExpc3RlbmVyUG9zaXRpb24oeCwgeSwgeiwgeWF3LCBwaXRjaCkgewogICAgICAgIGlmICghdGhpcy5jdHgpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCBsaXN0ZW5lciA9IHRoaXMuY3R4Lmxpc3RlbmVyOwogICAgICAgIC8vIFBvc2l0aW9uCiAgICAgICAgaWYgKGxpc3RlbmVyLnBvc2l0aW9uWCkgewogICAgICAgICAgICBsaXN0ZW5lci5wb3NpdGlvblgudmFsdWUgPSB4OwogICAgICAgICAgICBsaXN0ZW5lci5wb3NpdGlvblkudmFsdWUgPSB5OwogICAgICAgICAgICBsaXN0ZW5lci5wb3NpdGlvbloudmFsdWUgPSB6OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbGlzdGVuZXIuc2V0UG9zaXRpb24oeCwgeSwgeik7CiAgICAgICAgfQogICAgICAgIC8vIE9yaWVudGF0aW9uCiAgICAgICAgY29uc3QgZm9yd2FyZFggPSAtTWF0aC5zaW4oeWF3KSAqIE1hdGguY29zKHBpdGNoKTsKICAgICAgICBjb25zdCBmb3J3YXJkWSA9IE1hdGguc2luKHBpdGNoKTsKICAgICAgICBjb25zdCBmb3J3YXJkWiA9IC1NYXRoLmNvcyh5YXcpICogTWF0aC5jb3MocGl0Y2gpOwogICAgICAgIGNvbnN0IHVwWCA9IDA7CiAgICAgICAgY29uc3QgdXBZID0gMTsKICAgICAgICBjb25zdCB1cFogPSAwOwogICAgICAgIGlmIChsaXN0ZW5lci5mb3J3YXJkWCkgewogICAgICAgICAgICBsaXN0ZW5lci5mb3J3YXJkWC52YWx1ZSA9IGZvcndhcmRYOwogICAgICAgICAgICBsaXN0ZW5lci5mb3J3YXJkWS52YWx1ZSA9IGZvcndhcmRZOwogICAgICAgICAgICBsaXN0ZW5lci5mb3J3YXJkWi52YWx1ZSA9IGZvcndhcmRaOwogICAgICAgICAgICBsaXN0ZW5lci51cFgudmFsdWUgPSB1cFg7CiAgICAgICAgICAgIGxpc3RlbmVyLnVwWS52YWx1ZSA9IHVwWTsKICAgICAgICAgICAgbGlzdGVuZXIudXBaLnZhbHVlID0gdXBaOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbGlzdGVuZXIuc2V0T3JpZW50YXRpb24oZm9yd2FyZFgsIGZvcndhcmRZLCBmb3J3YXJkWiwgdXBYLCB1cFksIHVwWik7CiAgICAgICAgfQogICAgfQogICAgc3RhdGljIHBsYXlTdGVwKHNwZWVkKSB7CiAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgaWYgKCF0aGlzLmN0eCB8fCAhdGhpcy5tYXN0ZXJHYWluKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdGhpcy5jcmVhdGVTdGVwU291bmQodGhpcy5jdHguY3VycmVudFRpbWUsIHNwZWVkLCB0aGlzLm1hc3RlckdhaW4pOwogICAgfQogICAgc3RhdGljIHBsYXkzRFN0ZXAoeCwgeSwgeiwgc3BlZWQpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8ICF0aGlzLm1hc3RlckdhaW4pCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCBwYW5uZXIgPSB0aGlzLmN0eC5jcmVhdGVQYW5uZXIoKTsKICAgICAgICBwYW5uZXIucGFubmluZ01vZGVsID0gJ0hSVEYnOwogICAgICAgIHBhbm5lci5kaXN0YW5jZU1vZGVsID0gJ2ludmVyc2UnOwogICAgICAgIHBhbm5lci5yZWZEaXN0YW5jZSA9IDI7CiAgICAgICAgcGFubmVyLm1heERpc3RhbmNlID0gMzA7CiAgICAgICAgcGFubmVyLnJvbGxvZmZGYWN0b3IgPSAxOwogICAgICAgIHBhbm5lci5wb3NpdGlvblgudmFsdWUgPSB4OwogICAgICAgIHBhbm5lci5wb3NpdGlvblkudmFsdWUgPSB5OwogICAgICAgIHBhbm5lci5wb3NpdGlvbloudmFsdWUgPSB6OwogICAgICAgIHBhbm5lci5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgdGhpcy5jcmVhdGVTdGVwU291bmQodGhpcy5jdHguY3VycmVudFRpbWUsIHNwZWVkLCBwYW5uZXIpOwogICAgICAgIC8vIENsZWFudXAgcGFubmVyIGFmdGVyIHNvdW5kCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBwYW5uZXIuZGlzY29ubmVjdCgpLCAzMDApOwogICAgfQogICAgc3RhdGljIGNyZWF0ZVN0ZXBTb3VuZCh0LCBzcGVlZCwgZGVzdCkgewogICAgICAgIGlmICghdGhpcy5jdHgpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCBvc2MgPSB0aGlzLmN0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgY29uc3QgZ2FpbiA9IHRoaXMuY3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICBjb25zdCBmaWx0ZXIgPSB0aGlzLmN0eC5jcmVhdGVCaXF1YWRGaWx0ZXIoKTsKICAgICAgICBvc2MudHlwZSA9ICdzcXVhcmUnOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNDAsIHQpOwogICAgICAgIG9zYy5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgxMCwgdCArIDAuMSk7CiAgICAgICAgZmlsdGVyLnR5cGUgPSAnbG93cGFzcyc7CiAgICAgICAgZmlsdGVyLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSgyMDAsIHQpOwogICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShzcGVlZCA+IDEwID8gMC4yIDogMC4xLCB0KTsKICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMSwgdCArIDAuMSk7CiAgICAgICAgb3NjLmNvbm5lY3QoZmlsdGVyKTsKICAgICAgICBmaWx0ZXIuY29ubmVjdChnYWluKTsKICAgICAgICBnYWluLmNvbm5lY3QoZGVzdCk7CiAgICAgICAgb3NjLnN0YXJ0KHQpOwogICAgICAgIG9zYy5zdG9wKHQgKyAwLjEpOwogICAgfQogICAgc3RhdGljIHN0YXJ0QW1iaWVudEh1bSgpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8ICF0aGlzLm1hc3RlckdhaW4pCiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmN0eC5jdXJyZW50VGltZTsKICAgICAgICAvLyBDb21wbGV4IGxheWVyZWQgaHVtIC0gSW5kdXN0cmlhbCBEcm9uZQogICAgICAgIGNvbnN0IG9zYzEgPSB0aGlzLmN0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgY29uc3Qgb3NjMiA9IHRoaXMuY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICBjb25zdCBub2lzZU5vZGUgPSB0aGlzLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTsKICAgICAgICBjb25zdCBnYWluID0gdGhpcy5jdHguY3JlYXRlR2FpbigpOwogICAgICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuY3R4LmNyZWF0ZUJpcXVhZEZpbHRlcigpOwogICAgICAgIC8vIERlZXAgZHJvbmUKICAgICAgICBvc2MxLnR5cGUgPSAnc2F3dG9vdGgnOwogICAgICAgIG9zYzEuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDM1LCB0KTsKICAgICAgICAvLyBEZXR1bmVkIHN1YgogICAgICAgIG9zYzIudHlwZSA9ICdzaW5lJzsKICAgICAgICBvc2MyLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSgzNCwgdCk7CiAgICAgICAgLy8gUGluayBOb2lzZSBmb3IgYWlyIGFtYmllbmNlCiAgICAgICAgY29uc3QgYnVmZmVyU2l6ZSA9IHRoaXMuY3R4LnNhbXBsZVJhdGUgKiAyOwogICAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuY3R4LmNyZWF0ZUJ1ZmZlcigxLCBidWZmZXJTaXplLCB0aGlzLmN0eC5zYW1wbGVSYXRlKTsKICAgICAgICBjb25zdCBkYXRhID0gYnVmZmVyLmdldENoYW5uZWxEYXRhKDApOwogICAgICAgIGxldCBsYXN0T3V0ID0gMDsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlclNpemU7IGkrKykgewogICAgICAgICAgICBjb25zdCB3aGl0ZSA9IE1hdGgucmFuZG9tKCkgKiAyIC0gMTsKICAgICAgICAgICAgZGF0YVtpXSA9IChsYXN0T3V0ICsgKDAuMDIgKiB3aGl0ZSkpIC8gMS4wMjsKICAgICAgICAgICAgbGFzdE91dCA9IGRhdGFbaV07CiAgICAgICAgICAgIGRhdGFbaV0gKj0gMy41OwogICAgICAgIH0KICAgICAgICBub2lzZU5vZGUuYnVmZmVyID0gYnVmZmVyOwogICAgICAgIG5vaXNlTm9kZS5sb29wID0gdHJ1ZTsKICAgICAgICBmaWx0ZXIudHlwZSA9ICdsb3dwYXNzJzsKICAgICAgICBmaWx0ZXIuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDEyMCwgdCk7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIHQpOwogICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLjA0LCB0ICsgMyk7CiAgICAgICAgb3NjMS5jb25uZWN0KGZpbHRlcik7CiAgICAgICAgb3NjMi5jb25uZWN0KGZpbHRlcik7CiAgICAgICAgbm9pc2VOb2RlLmNvbm5lY3QoZmlsdGVyKTsKICAgICAgICBmaWx0ZXIuY29ubmVjdChnYWluKTsKICAgICAgICBnYWluLmNvbm5lY3QodGhpcy5tYXN0ZXJHYWluKTsKICAgICAgICBvc2MxLnN0YXJ0KHQpOwogICAgICAgIG9zYzIuc3RhcnQodCk7CiAgICAgICAgbm9pc2VOb2RlLnN0YXJ0KHQpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHN0b3A6ICgpID0+IHsKICAgICAgICAgICAgICAgIGlmICghdGhpcy5jdHgpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3Qgc3QgPSB0aGlzLmN0eC5jdXJyZW50VGltZTsKICAgICAgICAgICAgICAgIGdhaW4uZ2Fpbi5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoc3QpOwogICAgICAgICAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIHN0ICsgMik7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBvc2MxLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICBvc2MyLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICBub2lzZU5vZGUuc3RvcCgpOwogICAgICAgICAgICAgICAgfSwgMjEwMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfQogICAgc3RhdGljIHBsYXlTY2FuKCkgewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgIGlmICghdGhpcy5jdHggfHwgIXRoaXMubWFzdGVyR2FpbikKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmN0eC5jdXJyZW50VGltZTsKICAgICAgICBjb25zdCBvc2MgPSB0aGlzLmN0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgY29uc3QgZ2FpbiA9IHRoaXMuY3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAvLyBTY2ktZmkgcGluZwogICAgICAgIG9zYy50eXBlID0gJ3NpbmUnOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODAwLCB0KTsKICAgICAgICBvc2MuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMTIwMCwgdCArIDAuMSk7CiAgICAgICAgb3NjLmZyZXF1ZW5jeS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDQwMCwgdCArIDEuNSk7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIHQpOwogICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLjEsIHQgKyAwLjA1KTsKICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMSwgdCArIDEuNSk7CiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgb3NjLnN0YXJ0KHQpOwogICAgICAgIG9zYy5zdG9wKHQgKyAxLjUpOwogICAgfQogICAgc3RhdGljIHBsYXlUZXJtaW5hbEJvb3QoKSB7CiAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgaWYgKCF0aGlzLmN0eCB8fCAhdGhpcy5tYXN0ZXJHYWluKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgY29uc3QgdCA9IHRoaXMuY3R4LmN1cnJlbnRUaW1lOwogICAgICAgIC8vIEhhcmQgZHJpdmUgc3BpbiB1cCBzb3VuZCBzaW11bGF0aW9uCiAgICAgICAgY29uc3Qgb3NjID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgb3NjLnR5cGUgPSAnc2F3dG9vdGgnOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNTAsIHQpOwogICAgICAgIG9zYy5mcmVxdWVuY3kubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoNDAwLCB0ICsgMS4wKTsKICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4wNSwgdCk7CiAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIHQgKyAxLjIpOwogICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgIGdhaW4uY29ubmVjdCh0aGlzLm1hc3RlckdhaW4pOwogICAgICAgIG9zYy5zdGFydCh0KTsKICAgICAgICBvc2Muc3RvcCh0ICsgMS4yKTsKICAgIH0KICAgIHN0YXRpYyBwbGF5RHJpcCgpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8ICF0aGlzLm1hc3RlckdhaW4pCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCB0ID0gdGhpcy5jdHguY3VycmVudFRpbWU7CiAgICAgICAgY29uc3Qgb3NjID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgb3NjLnR5cGUgPSAnc2luZSc7CiAgICAgICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSgxMjAwICsgTWF0aC5yYW5kb20oKSAqIDgwMCwgdCk7CiAgICAgICAgb3NjLmZyZXF1ZW5jeS5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDgwMCwgdCArIDAuMDUpOwogICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLjA0LCB0KTsKICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMSwgdCArIDAuMik7CiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgb3NjLnN0YXJ0KHQpOwogICAgICAgIG9zYy5zdG9wKHQgKyAwLjIpOwogICAgfQogICAgc3RhdGljIHBsYXlDcmVhaygpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8ICF0aGlzLm1hc3RlckdhaW4pCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCB0ID0gdGhpcy5jdHguY3VycmVudFRpbWU7CiAgICAgICAgY29uc3Qgb3NjID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgY29uc3QgbGZvID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGxmb0dhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgb3NjLnR5cGUgPSAnc2F3dG9vdGgnOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODAgKyBNYXRoLnJhbmRvbSgpICogNDAsIHQpOwogICAgICAgIG9zYy5mcmVxdWVuY3kubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoNjAgKyBNYXRoLnJhbmRvbSgpICogMjAsIHQgKyAyKTsKICAgICAgICBsZm8uZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDIgKyBNYXRoLnJhbmRvbSgpICogNSwgdCk7CiAgICAgICAgbGZvR2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDEwLCB0KTsKICAgICAgICBsZm8uY29ubmVjdChsZm9HYWluKTsKICAgICAgICBsZm9HYWluLmNvbm5lY3Qob3NjLmZyZXF1ZW5jeSk7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAsIHQpOwogICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLjAzLCB0ICsgMC41KTsKICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgdCArIDIpOwogICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgIGdhaW4uY29ubmVjdCh0aGlzLm1hc3RlckdhaW4pOwogICAgICAgIGxmby5zdGFydCh0KTsKICAgICAgICBvc2Muc3RhcnQodCk7CiAgICAgICAgbGZvLnN0b3AodCArIDIpOwogICAgICAgIG9zYy5zdG9wKHQgKyAyKTsKICAgIH0KICAgIHN0YXRpYyBwbGF5RW5lbXlHcm93bChkaXN0YW5jZSkgewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgIGlmICghdGhpcy5jdHggfHwgIXRoaXMubWFzdGVyR2FpbikKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHZvbHVtZSA9IE1hdGgubWF4KDAsIDAuNCAtIChkaXN0YW5jZSAvIDMwKSk7CiAgICAgICAgaWYgKHZvbHVtZSA8PSAwKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgY29uc3QgdCA9IHRoaXMuY3R4LmN1cnJlbnRUaW1lOwogICAgICAgIGNvbnN0IG9zYyA9IHRoaXMuY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICBjb25zdCBnYWluID0gdGhpcy5jdHguY3JlYXRlR2FpbigpOwogICAgICAgIG9zYy50eXBlID0gJ3Nhd3Rvb3RoJzsKICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDQwICsgTWF0aC5yYW5kb20oKSAqIDIwLCB0KTsKICAgICAgICBvc2MuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMTAsIHQgKyAwLjgpOwogICAgICAgIGdhaW4uY29ubmVjdCh0aGlzLm1hc3RlckdhaW4pOwogICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSh2b2x1bWUsIHQpOwogICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCB0ICsgMC44KTsKICAgICAgICBvc2Muc3RhcnQodCk7CiAgICAgICAgb3NjLnN0b3AodCArIDAuOCk7CiAgICB9CiAgICBzdGF0aWMgcGxheUp1bXAoKSB7CiAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgaWYgKCF0aGlzLmN0eCB8fCAhdGhpcy5tYXN0ZXJHYWluKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgY29uc3QgdCA9IHRoaXMuY3R4LmN1cnJlbnRUaW1lOwogICAgICAgIGNvbnN0IG9zYyA9IHRoaXMuY3R4LmNyZWF0ZU9zY2lsbGF0b3IoKTsKICAgICAgICBjb25zdCBnYWluID0gdGhpcy5jdHguY3JlYXRlR2FpbigpOwogICAgICAgIG9zYy50eXBlID0gJ3NpbmUnOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoMTUwLCB0KTsKICAgICAgICBvc2MuZnJlcXVlbmN5LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDMwMCwgdCArIDAuMik7CiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAuMSwgdCk7CiAgICAgICAgZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIHQgKyAwLjMpOwogICAgICAgIG9zYy5zdGFydCh0KTsKICAgICAgICBvc2Muc3RvcCh0ICsgMC4zKTsKICAgIH0KICAgIHN0YXRpYyBwbGF5TGFuZCgpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8ICF0aGlzLm1hc3RlckdhaW4pCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCB0ID0gdGhpcy5jdHguY3VycmVudFRpbWU7CiAgICAgICAgY29uc3Qgb3NjID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgb3NjLnR5cGUgPSAnc2F3dG9vdGgnOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODAsIHQpOwogICAgICAgIG9zYy5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgxMCwgdCArIDAuMik7CiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAuMywgdCk7CiAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMDEsIHQgKyAwLjIpOwogICAgICAgIG9zYy5zdGFydCh0KTsKICAgICAgICBvc2Muc3RvcCh0ICsgMC4yKTsKICAgIH0KICAgIHN0YXRpYyBwbGF5S2V5KCkgewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgIGlmICghdGhpcy5jdHggfHwgIXRoaXMubWFzdGVyR2FpbikKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmN0eC5jdXJyZW50VGltZTsKICAgICAgICBjb25zdCBvc2MgPSB0aGlzLmN0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgY29uc3QgZ2FpbiA9IHRoaXMuY3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAvLyBNZWNoYW5pY2FsIHN3aXRjaCBzb3VuZAogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODAwICsgTWF0aC5yYW5kb20oKSAqIDIwMCwgdCk7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAuMDUsIHQpOwogICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCB0ICsgMC4wNSk7CiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgb3NjLnN0YXJ0KHQpOwogICAgICAgIG9zYy5zdG9wKHQgKyAwLjA1KTsKICAgIH0KICAgIHN0YXRpYyBwbGF5U3VjY2VzcygpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8ICF0aGlzLm1hc3RlckdhaW4pCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCB0ID0gdGhpcy5jdHguY3VycmVudFRpbWU7CiAgICAgICAgY29uc3Qgb3NjID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgb3NjLnR5cGUgPSAnc2luZSc7CiAgICAgICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSg0NDAsIHQpOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoODgwLCB0ICsgMC4xKTsKICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xLCB0KTsKICAgICAgICBnYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgdCArIDAuMyk7CiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgb3NjLnN0YXJ0KHQpOwogICAgICAgIG9zYy5zdG9wKHQgKyAwLjMpOwogICAgfQogICAgc3RhdGljIHBsYXlFcnJvcigpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8ICF0aGlzLm1hc3RlckdhaW4pCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCB0ID0gdGhpcy5jdHguY3VycmVudFRpbWU7CiAgICAgICAgY29uc3Qgb3NjID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgb3NjLnR5cGUgPSAnc2F3dG9vdGgnOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoMTUwLCB0KTsKICAgICAgICBvc2MuZnJlcXVlbmN5LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDEwMCwgdCArIDAuMik7CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKDAuMiwgdCk7CiAgICAgICAgZ2Fpbi5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMDEsIHQgKyAwLjMpOwogICAgICAgIG9zYy5jb25uZWN0KGdhaW4pOwogICAgICAgIGdhaW4uY29ubmVjdCh0aGlzLm1hc3RlckdhaW4pOwogICAgICAgIG9zYy5zdGFydCh0KTsKICAgICAgICBvc2Muc3RvcCh0ICsgMC4zKTsKICAgIH0KICAgIHN0YXRpYyBwbGF5Tm90aWZpY2F0aW9uKCkgewogICAgICAgIHRoaXMuaW5pdCgpOwogICAgICAgIGlmICghdGhpcy5jdHggfHwgIXRoaXMubWFzdGVyR2FpbikKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmN0eC5jdXJyZW50VGltZTsKICAgICAgICBjb25zdCBvc2MgPSB0aGlzLmN0eC5jcmVhdGVPc2NpbGxhdG9yKCk7CiAgICAgICAgY29uc3QgZ2FpbiA9IHRoaXMuY3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICBvc2MudHlwZSA9ICdzaW5lJzsKICAgICAgICBvc2MuZnJlcXVlbmN5LnNldFZhbHVlQXRUaW1lKDYwMCwgdCk7CiAgICAgICAgb3NjLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSgxMjAwLCB0ICsgMC4xKTsKICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMC4xLCB0KTsKICAgICAgICBnYWluLmdhaW4uZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZSgwLjAwMSwgdCArIDAuNCk7CiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgb3NjLnN0YXJ0KHQpOwogICAgICAgIG9zYy5zdG9wKHQgKyAwLjQpOwogICAgfQogICAgc3RhdGljIHBsYXlBbGFybSgpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgICBpZiAoIXRoaXMuY3R4IHx8ICF0aGlzLm1hc3RlckdhaW4pCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCB0ID0gdGhpcy5jdHguY3VycmVudFRpbWU7CiAgICAgICAgY29uc3Qgb3NjID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgb3NjLnR5cGUgPSAnc2F3dG9vdGgnOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoNDAwLCB0KTsKICAgICAgICBvc2MuZnJlcXVlbmN5LmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDgwMCwgdCArIDAuNSk7CiAgICAgICAgb3NjLmZyZXF1ZW5jeS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSg0MDAsIHQgKyAxLjApOwogICAgICAgIGdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLjIsIHQpOwogICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLjIsIHQgKyAxLjApOwogICAgICAgIGdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLCB0ICsgMS4xKTsKICAgICAgICBvc2MuY29ubmVjdChnYWluKTsKICAgICAgICBnYWluLmNvbm5lY3QodGhpcy5tYXN0ZXJHYWluKTsKICAgICAgICBvc2Muc3RhcnQodCk7CiAgICAgICAgb3NjLnN0b3AodCArIDEuMSk7CiAgICB9Cn0KU291bmRGWC5jdHggPSBudWxsOwpTb3VuZEZYLm1hc3RlckdhaW4gPSBudWxsOwpTb3VuZEZYLmFuYWx5c2VyID0gbnVsbDsKU291bmRGWC5taWNTdHJlYW0gPSBudWxsOwpTb3VuZEZYLmluaXRpYWxpemVkID0gZmFsc2U7Cg==","@/services/modelFactory":"data:application/javascript;base64,aW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnOwpjb25zdCBURVhUVVJFX0NBQ0hFID0ge307CmNvbnN0IE1BVEVSSUFMX0NBQ0hFID0ge307CmNvbnN0IEdFT01FVFJZX0NBQ0hFID0ge307Ci8vIEhlbHBlciBmb3Igbm9pc2UKY29uc3Qgbm9pc2UgPSAoY3R4LCB3aWR0aCwgaGVpZ2h0LCBhbHBoYSkgPT4gewogICAgY29uc3QgaWQgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgY29uc3QgZCA9IGlkLmRhdGE7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGQubGVuZ3RoOyBpICs9IDQpIHsKICAgICAgICBjb25zdCB2ID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogYWxwaGEgKiAyNTU7CiAgICAgICAgZFtpXSA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgZFtpXSArIHYpKTsKICAgICAgICBkW2kgKyAxXSA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgZFtpICsgMV0gKyB2KSk7CiAgICAgICAgZFtpICsgMl0gPSBNYXRoLm1pbigyNTUsIE1hdGgubWF4KDAsIGRbaSArIDJdICsgdikpOwogICAgfQogICAgY3R4LnB1dEltYWdlRGF0YShpZCwgMCwgMCk7Cn07Ci8vIFJlZHVjZWQgcmVzb2x1dGlvbiBmcm9tIDI1NiB0byAxMjggZm9yIDYwIEZQUyB0YXJnZXQKY29uc3QgVEVYX1NJWkUgPSAxMjg7CmV4cG9ydCBjb25zdCBnZW5lcmF0ZVRleHR1cmUgPSAodHlwZSkgPT4gewogICAgaWYgKFRFWFRVUkVfQ0FDSEVbdHlwZV0pCiAgICAgICAgcmV0dXJuIFRFWFRVUkVfQ0FDSEVbdHlwZV07CiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgIGNhbnZhcy53aWR0aCA9IFRFWF9TSVpFOwogICAgY2FudmFzLmhlaWdodCA9IFRFWF9TSVpFOwogICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAvLyBCYXNlIENvbG9yIC0gTGlnaHRlbmVkIGZvciB2aXNpYmlsaXR5CiAgICBpZiAodHlwZSA9PT0gJ2ZsZXNoJykKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM4NDQnOwogICAgZWxzZSBpZiAodHlwZSA9PT0gJ2dvbGQnKQogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2Q0YWYzNyc7CiAgICBlbHNlIGlmICh0eXBlID09PSAnZmxvb3InKQogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJhMmEyYSc7CiAgICBlbHNlIGlmICh0eXBlID09PSAnd2FsbCcpCiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjM2EzYTNhJzsKICAgIGVsc2UgaWYgKHR5cGUgPT09ICdmYWJyaWMnKQogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VlZWVlZSc7CiAgICBlbHNlIGlmICh0eXBlID09PSAndGVjaCcpCiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMzMzJzsKICAgIGVsc2UgaWYgKHR5cGUgPT09ICdydXN0JykKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM2ZDVhNGEnOwogICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NvbmNyZXRlJykKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM1NTUnOwogICAgZWxzZSBpZiAodHlwZSA9PT0gJ3dhcm5pbmcnKQogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmY2MwMCc7CiAgICBlbHNlIGlmICh0eXBlID09PSAncm9jaycpCiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNGE0YTRhJzsKICAgIGVsc2UgaWYgKHR5cGUgPT09ICd3b29kJykKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM1YTRhM2EnOwogICAgZWxzZSBpZiAodHlwZSA9PT0gJ3Nub3cnKQogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2YwZjBmMCc7CiAgICBlbHNlIGlmICh0eXBlID09PSAnaWNlJykKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNiZmVmZmYnOwogICAgZWxzZSBpZiAodHlwZSA9PT0gJ2NyYXRlX3NpZGUnKQogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzVhNGEzYSc7CiAgICBlbHNlIGlmICh0eXBlID09PSAnYmFycmVsX3NpZGUnKQogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzRhNWE2YSc7CiAgICBlbHNlCiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNjY2JzsKICAgIGN0eC5maWxsUmVjdCgwLCAwLCBURVhfU0laRSwgVEVYX1NJWkUpOwogICAgLy8gUGF0dGVybiBHZW5lcmF0aW9uIC0gU2ltcGxpZmllZCBmb3IgbG93ZXIgcmVzCiAgICBpZiAodHlwZSA9PT0gJ2Zsb29yJykgewogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzFhMWExYSc7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBURVhfU0laRTsgaSArPSAzMikgewogICAgICAgICAgICBjdHguZmlsbFJlY3QoaSwgMCwgMiwgVEVYX1NJWkUpOwogICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgaSwgVEVYX1NJWkUsIDIpOwogICAgICAgIH0KICAgICAgICBub2lzZShjdHgsIFRFWF9TSVpFLCBURVhfU0laRSwgMC4wOCk7CiAgICB9CiAgICBlbHNlIGlmICh0eXBlID09PSAnd2FsbCcgfHwgdHlwZSA9PT0gJ2NvbmNyZXRlJykgewogICAgICAgIG5vaXNlKGN0eCwgVEVYX1NJWkUsIFRFWF9TSVpFLCAwLjEyKTsKICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzIyMic7CiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7CiAgICAgICAgICAgIGN0eC5tb3ZlVG8oTWF0aC5yYW5kb20oKSAqIFRFWF9TSVpFLCBNYXRoLnJhbmRvbSgpICogVEVYX1NJWkUpOwogICAgICAgICAgICBjdHgubGluZVRvKE1hdGgucmFuZG9tKCkgKiBURVhfU0laRSwgTWF0aC5yYW5kb20oKSAqIFRFWF9TSVpFKTsKICAgICAgICB9CiAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgfQogICAgZWxzZSBpZiAodHlwZSA9PT0gJ3JvY2snKSB7CiAgICAgICAgbm9pc2UoY3R4LCBURVhfU0laRSwgVEVYX1NJWkUsIDAuNCk7CiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyMjInOwogICAgICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5tb3ZlVG8oTWF0aC5yYW5kb20oKSAqIFRFWF9TSVpFLCBNYXRoLnJhbmRvbSgpICogVEVYX1NJWkUpOwogICAgICAgICAgICBjdHgubGluZVRvKE1hdGgucmFuZG9tKCkgKiBURVhfU0laRSArIDIwLCBNYXRoLnJhbmRvbSgpICogVEVYX1NJWkUgKyAyMCk7CiAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlIGlmICh0eXBlID09PSAnd29vZCcgfHwgdHlwZSA9PT0gJ2NyYXRlX3NpZGUnKSB7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjM2EyYTFhJzsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IFRFWF9TSVpFOyBpICs9IDMyKSB7CiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCBpLCBURVhfU0laRSwgMik7CiAgICAgICAgfQogICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMmExYTBhJzsKICAgICAgICBjdHgubGluZVdpZHRoID0gNDsKICAgICAgICBjdHguc3Ryb2tlUmVjdCgwLCAwLCBURVhfU0laRSwgVEVYX1NJWkUpOwogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBjdHgubW92ZVRvKDAsIDApOwogICAgICAgIGN0eC5saW5lVG8oVEVYX1NJWkUsIFRFWF9TSVpFKTsKICAgICAgICBjdHgubW92ZVRvKFRFWF9TSVpFLCAwKTsKICAgICAgICBjdHgubGluZVRvKDAsIFRFWF9TSVpFKTsKICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgbm9pc2UoY3R4LCBURVhfU0laRSwgVEVYX1NJWkUsIDAuMSk7CiAgICB9CiAgICBlbHNlIGlmICh0eXBlID09PSAnd2FybmluZycpIHsKICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMxMTEnOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgVEVYX1NJWkU7IGkgKz0gMzIpIHsKICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICBjdHgubW92ZVRvKGksIDApOwogICAgICAgICAgICBjdHgubGluZVRvKGkgKyAxNiwgMCk7CiAgICAgICAgICAgIGN0eC5saW5lVG8oaSAtIDE2LCBURVhfU0laRSk7CiAgICAgICAgICAgIGN0eC5saW5lVG8oaSAtIDMyLCBURVhfU0laRSk7CiAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgfQogICAgICAgIG5vaXNlKGN0eCwgVEVYX1NJWkUsIFRFWF9TSVpFLCAwLjIpOwogICAgfQogICAgZWxzZSBpZiAodHlwZSA9PT0gJ3J1c3QnKSB7CiAgICAgICAgbm9pc2UoY3R4LCBURVhfU0laRSwgVEVYX1NJWkUsIDAuMyk7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNGUzNzIzJzsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE1OyBpKyspIHsKICAgICAgICAgICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCkgKiAyMDsKICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICBjdHguYXJjKE1hdGgucmFuZG9tKCkgKiBURVhfU0laRSwgTWF0aC5yYW5kb20oKSAqIFRFWF9TSVpFLCByLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSBpZiAodHlwZSA9PT0gJ3RlY2gnKSB7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNDQ0JzsKICAgICAgICBjdHguZmlsbFJlY3QoNSwgNSwgVEVYX1NJWkUgLSAxMCwgVEVYX1NJWkUgLSAxMCk7CiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMjIyJzsKICAgICAgICBmb3IgKGxldCB5ID0gMTA7IHkgPCBURVhfU0laRSAtIDEwOyB5ICs9IDEwKSB7CiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgxMCwgeSwgVEVYX1NJWkUgLSAyMCwgNCk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSBpZiAodHlwZSA9PT0gJ2JhcnJlbF9zaWRlJykgewogICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzNhNGE1YSc7CiAgICAgICAgZm9yIChsZXQgeSA9IDE2OyB5IDwgVEVYX1NJWkU7IHkgKz0gMzIpIHsKICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMmEzYTRhJzsKICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIHksIFRFWF9TSVpFLCA4KTsKICAgICAgICB9CiAgICAgICAgbm9pc2UoY3R4LCBURVhfU0laRSwgVEVYX1NJWkUsIDAuMTUpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgbm9pc2UoY3R4LCBURVhfU0laRSwgVEVYX1NJWkUsIDAuMDUpOwogICAgfQogICAgY29uc3QgdGV4ID0gbmV3IFRIUkVFLkNhbnZhc1RleHR1cmUoY2FudmFzKTsKICAgIHRleC53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nOwogICAgdGV4LndyYXBUID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7CiAgICB0ZXgubWluRmlsdGVyID0gVEhSRUUuTmVhcmVzdEZpbHRlcjsgLy8gUmV0cm8gcGl4ZWxhdGVkIGxvb2sKICAgIHRleC5tYWdGaWx0ZXIgPSBUSFJFRS5OZWFyZXN0RmlsdGVyOwogICAgVEVYVFVSRV9DQUNIRVt0eXBlXSA9IHRleDsKICAgIHJldHVybiB0ZXg7Cn07CmNvbnN0IGdldEdlb21ldHJ5ID0gKGtleSwgY3JlYXRvcikgPT4gewogICAgaWYgKEdFT01FVFJZX0NBQ0hFW2tleV0pCiAgICAgICAgcmV0dXJuIEdFT01FVFJZX0NBQ0hFW2tleV07CiAgICBjb25zdCBnZW8gPSBjcmVhdG9yKCk7CiAgICBHRU9NRVRSWV9DQUNIRVtrZXldID0gZ2VvOwogICAgcmV0dXJuIGdlbzsKfTsKZXhwb3J0IGNvbnN0IGNyZWF0ZVByb3BNZXNoID0gKHR5cGUpID0+IHsKICAgIGxldCBnZW87CiAgICBsZXQgbWF0OwogICAgaWYgKHR5cGUgPT09ICdjcmF0ZScpIHsKICAgICAgICBnZW8gPSBnZXRHZW9tZXRyeSgnY3JhdGUnLCAoKSA9PiBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMS41LCAxLjUsIDEuNSkpOwogICAgICAgIG1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgICAgICAgICAgIG1hcDogZ2VuZXJhdGVUZXh0dXJlKCdjcmF0ZV9zaWRlJyksCiAgICAgICAgICAgIGNvbG9yOiAweDg4Nzc2NiwKICAgICAgICAgICAgcm91Z2huZXNzOiAwLjgKICAgICAgICB9KTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICdiYXJyZWwnKSB7CiAgICAgICAgLy8gUmVkdWNlZCByYWRpYWwgc2VnbWVudHMgZnJvbSAxNiB0byA4CiAgICAgICAgZ2VvID0gZ2V0R2VvbWV0cnkoJ2JhcnJlbCcsICgpID0+IG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDAuNiwgMC42LCAxLjYsIDgpKTsKICAgICAgICBtYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoewogICAgICAgICAgICBtYXA6IGdlbmVyYXRlVGV4dHVyZSgnYmFycmVsX3NpZGUnKSwKICAgICAgICAgICAgY29sb3I6IDB4NTU2Njc3LAogICAgICAgICAgICByb3VnaG5lc3M6IDAuNSwKICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjQKICAgICAgICB9KTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICdwaWxsYXInKSB7CiAgICAgICAgZ2VvID0gZ2V0R2VvbWV0cnkoJ3BpbGxhcicsICgpID0+IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxLCA2LCAxKSk7CiAgICAgICAgbWF0ID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsKICAgICAgICAgICAgbWFwOiBnZW5lcmF0ZVRleHR1cmUoJ2NvbmNyZXRlJyksCiAgICAgICAgICAgIHJvdWdobmVzczogMC45LAogICAgICAgICAgICBjb2xvcjogMHg2NjY2NjYKICAgICAgICB9KTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICdwaXBlJykgewogICAgICAgIC8vIFJlZHVjZWQgcmFkaWFsIHNlZ21lbnRzCiAgICAgICAgZ2VvID0gZ2V0R2VvbWV0cnkoJ3BpcGVfbWVkJywgKCkgPT4gbmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMC4zLCAwLjMsIDYsIDYpKTsKICAgICAgICBtYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoewogICAgICAgICAgICBtYXA6IGdlbmVyYXRlVGV4dHVyZSgncnVzdCcpLAogICAgICAgICAgICBjb2xvcjogMHg4ODU1NDQsCiAgICAgICAgICAgIHJvdWdobmVzczogMC43CiAgICAgICAgfSk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgICAvLyBWZW50CiAgICAgICAgZ2VvID0gZ2V0R2VvbWV0cnkoJ3ZlbnRfYm94JywgKCkgPT4gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDEuNSwgMS41LCAwLjUpKTsKICAgICAgICBtYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoewogICAgICAgICAgICBtYXA6IGdlbmVyYXRlVGV4dHVyZSgndGVjaCcpLAogICAgICAgICAgICBjb2xvcjogMHg0NDQ0NDQsCiAgICAgICAgICAgIG1ldGFsbmVzczogMC42CiAgICAgICAgfSk7CiAgICB9CiAgICBjb25zdCBtZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvLCBtYXQpOwogICAgbWVzaC5jYXN0U2hhZG93ID0gdHJ1ZTsKICAgIG1lc2gucmVjZWl2ZVNoYWRvdyA9IHRydWU7CiAgICByZXR1cm4gbWVzaDsKfTsKZXhwb3J0IGNvbnN0IGdldFNjcmFwTWVzaCA9IChpdGVtKSA9PiB7CiAgICBjb25zdCBncm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpOwogICAgY29uc3QgbmFtZSA9IGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpOwogICAgbGV0IGdlbzsKICAgIGxldCBtYXQ7CiAgICAvLyBMb3cgcG9seSBjb3VudHMKICAgIGlmIChuYW1lLmluY2x1ZGVzKCdib3R0bGUnKSB8fCBuYW1lLmluY2x1ZGVzKCdqYXInKSB8fCBuYW1lLmluY2x1ZGVzKCdnbGFzcycpKSB7CiAgICAgICAgbWF0ID0gbmV3IFRIUkVFLk1lc2hQaHlzaWNhbE1hdGVyaWFsKHsKICAgICAgICAgICAgY29sb3I6IDB4YWFjY2ZmLAogICAgICAgICAgICByb3VnaG5lc3M6IDAuMiwKICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjEsCiAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgICBvcGFjaXR5OiAwLjcKICAgICAgICB9KTsKICAgICAgICBnZW8gPSBnZXRHZW9tZXRyeSgnY3lsX2dsYXNzJywgKCkgPT4gbmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMC4xLCAwLjE1LCAwLjQsIDYpKTsKICAgIH0KICAgIGVsc2UgaWYgKG5hbWUuaW5jbHVkZXMoJ2dvbGQnKSB8fCBuYW1lLmluY2x1ZGVzKCdiYXInKSkgewogICAgICAgIG1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgICAgICAgICAgIG1hcDogZ2VuZXJhdGVUZXh0dXJlKCdnb2xkJyksCiAgICAgICAgICAgIHJvdWdobmVzczogMC4zLAogICAgICAgICAgICBtZXRhbG5lc3M6IDEuMCwKICAgICAgICAgICAgY29sb3I6IDB4ZmZhYTAwCiAgICAgICAgfSk7CiAgICAgICAgZ2VvID0gZ2V0R2VvbWV0cnkoJ2JveF9nb2xkJywgKCkgPT4gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuNCwgMC4xLCAwLjIpKTsKICAgIH0KICAgIGVsc2UgaWYgKG5hbWUuaW5jbHVkZXMoJ2VuZ2luZScpIHx8IG5hbWUuaW5jbHVkZXMoJ21vdG9yJykpIHsKICAgICAgICBtYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoewogICAgICAgICAgICBtYXA6IGdlbmVyYXRlVGV4dHVyZSgncnVzdCcpLAogICAgICAgICAgICByb3VnaG5lc3M6IDAuOCwKICAgICAgICAgICAgbWV0YWxuZXNzOiAwLjYKICAgICAgICB9KTsKICAgICAgICBnZW8gPSBnZXRHZW9tZXRyeSgnYm94X2VuZ2luZScsICgpID0+IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgwLjQsIDAuNCwgMC40KSk7CiAgICAgICAgY29uc3QgY3lsaW5kZXIgPSBuZXcgVEhSRUUuTWVzaChnZXRHZW9tZXRyeSgnY3lsX2VuZ2luZScsICgpID0+IG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDAuMSwgMC4xLCAwLjUsIDYpKSwgbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3I6IDB4MzMzMzMzIH0pKTsKICAgICAgICBjeWxpbmRlci5yb3RhdGlvbi56ID0gTWF0aC5QSSAvIDI7CiAgICAgICAgZ3JvdXAuYWRkKGN5bGluZGVyKTsKICAgIH0KICAgIGVsc2UgaWYgKG5hbWUuaW5jbHVkZXMoJ3NoZWV0JykgfHwgbmFtZS5pbmNsdWRlcygnbWV0YWwnKSkgewogICAgICAgIG1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgICAgICAgICAgIG1hcDogZ2VuZXJhdGVUZXh0dXJlKCdydXN0JyksCiAgICAgICAgICAgIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUsCiAgICAgICAgICAgIHJvdWdobmVzczogMC43CiAgICAgICAgfSk7CiAgICAgICAgZ2VvID0gZ2V0R2VvbWV0cnkoJ3BsYW5lX3NoZWV0JywgKCkgPT4gbmV3IFRIUkVFLlBsYW5lR2VvbWV0cnkoMC42LCAwLjYpKTsKICAgICAgICBncm91cC5yb3RhdGlvbi54ID0gTWF0aC5QSSAvIDI7CiAgICB9CiAgICBlbHNlIGlmIChuYW1lLmluY2x1ZGVzKCdnZWFyJykgfHwgbmFtZS5pbmNsdWRlcygnYXhsZScpKSB7CiAgICAgICAgbWF0ID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsKICAgICAgICAgICAgbWFwOiBnZW5lcmF0ZVRleHR1cmUoJ3J1c3QnKSwKICAgICAgICAgICAgcm91Z2huZXNzOiAwLjYsCiAgICAgICAgICAgIG1ldGFsbmVzczogMC44CiAgICAgICAgfSk7CiAgICAgICAgZ2VvID0gZ2V0R2VvbWV0cnkoJ2N5bF9nZWFyJywgKCkgPT4gbmV3IFRIUkVFLkN5bGluZGVyR2VvbWV0cnkoMC4zLCAwLjMsIDAuMSwgOCkpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgbWF0ID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsKICAgICAgICAgICAgbWFwOiBnZW5lcmF0ZVRleHR1cmUoJ3RlY2gnKSwKICAgICAgICAgICAgcm91Z2huZXNzOiAwLjcsCiAgICAgICAgICAgIG1ldGFsbmVzczogMC41CiAgICAgICAgfSk7CiAgICAgICAgZ2VvID0gZ2V0R2VvbWV0cnkoJ2ljb19zY3JhcCcsICgpID0+IG5ldyBUSFJFRS5JY29zYWhlZHJvbkdlb21ldHJ5KDAuMjUsIDApKTsKICAgIH0KICAgIGNvbnN0IG1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW8sIG1hdCk7CiAgICBtZXNoLmNhc3RTaGFkb3cgPSB0cnVlOwogICAgbWVzaC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTsKICAgIGdyb3VwLmFkZChtZXNoKTsKICAgIC8vIFNpbXBsZSBnbG93LCBub24tc2hhZG93IGNhc3RpbmcKICAgIGNvbnN0IGdsb3cgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgweDAwZmYwMCwgMC41LCAxLjUpOwogICAgZ2xvdy5wb3NpdGlvbi55ID0gMC4yOwogICAgZ3JvdXAuYWRkKGdsb3cpOwogICAgcmV0dXJuIGdyb3VwOwp9Owpjb25zdCBnZXRNYXRlcmlhbCA9ICh0eXBlLCBjb2xvciwgaXNQaGFudG9tKSA9PiB7CiAgICBjb25zdCBrZXkgPSBgJHt0eXBlfV8ke2NvbG9yfV8ke2lzUGhhbnRvbX1gOwogICAgaWYgKE1BVEVSSUFMX0NBQ0hFW2tleV0pCiAgICAgICAgcmV0dXJuIE1BVEVSSUFMX0NBQ0hFW2tleV07CiAgICBpZiAoaXNQaGFudG9tKSB7CiAgICAgICAgY29uc3QgbWF0ID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsKICAgICAgICAgICAgY29sb3I6IGNvbG9yLAogICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSwKICAgICAgICAgICAgb3BhY2l0eTogMC4xNSwKICAgICAgICAgICAgcm91Z2huZXNzOiAwLjEsCiAgICAgICAgICAgIG1ldGFsbmVzczogMC44LAogICAgICAgICAgICBlbWlzc2l2ZTogY29sb3IsCiAgICAgICAgICAgIGVtaXNzaXZlSW50ZW5zaXR5OiAwLjgsCiAgICAgICAgICAgIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGUsCiAgICAgICAgICAgIGRlcHRoV3JpdGU6IGZhbHNlLAogICAgICAgICAgICBibGVuZGluZzogVEhSRUUuQWRkaXRpdmVCbGVuZGluZwogICAgICAgIH0pOwogICAgICAgIE1BVEVSSUFMX0NBQ0hFW2tleV0gPSBtYXQ7CiAgICAgICAgcmV0dXJuIG1hdDsKICAgIH0KICAgIGxldCB0ZXhUeXBlID0gJ3N0YW5kYXJkJzsKICAgIGxldCByb3VnaG5lc3MgPSAwLjc7CiAgICBsZXQgbWV0YWxuZXNzID0gMC4yOwogICAgaWYgKHR5cGUgPT09ICdQbGF5ZXInIHx8IHR5cGUgPT09ICdNaW1pYycpIHsKICAgICAgICB0ZXhUeXBlID0gJ2ZhYnJpYyc7CiAgICAgICAgcm91Z2huZXNzID0gMC45OwogICAgICAgIG1ldGFsbmVzcyA9IDAuMDU7CiAgICB9CiAgICBlbHNlIGlmICh0eXBlID09PSAnQnJ1dGUnKSB7CiAgICAgICAgdGV4VHlwZSA9ICdhcm1vcic7CiAgICAgICAgbWV0YWxuZXNzID0gMC43OwogICAgICAgIHJvdWdobmVzcyA9IDAuNDsKICAgIH0KICAgIGNvbnN0IHRleCA9IGdlbmVyYXRlVGV4dHVyZSh0ZXhUeXBlKTsKICAgIGNvbnN0IG1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgICAgICAgY29sb3I6IGNvbG9yLAogICAgICAgIG1hcDogdGV4LAogICAgICAgIHJvdWdobmVzczogcm91Z2huZXNzLAogICAgICAgIG1ldGFsbmVzczogbWV0YWxuZXNzLAogICAgICAgIGJ1bXBNYXA6IHRleCwKICAgICAgICBidW1wU2NhbGU6IDAuMDIKICAgIH0pOwogICAgTUFURVJJQUxfQ0FDSEVba2V5XSA9IG1hdDsKICAgIHJldHVybiBtYXQ7Cn07CmV4cG9ydCBjb25zdCBjcmVhdGVTdWl0TWVzaCA9ICh0eXBlLCBwcmltYXJ5Q29sb3IsIHNlY29uZGFyeUNvbG9yID0gJyMwMDAwMDAnLCBpc1BoYW50b20gPSBmYWxzZSwgYm9keVR5cGUgPSAnbWFsZScpID0+IHsKICAgIGNvbnN0IGdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7CiAgICBjb25zdCBtYWluTWF0ID0gZ2V0TWF0ZXJpYWwodHlwZSwgcHJpbWFyeUNvbG9yLCBpc1BoYW50b20pOwogICAgY29uc3QgaXNQbGF5ZXJUeXBlID0gKHR5cGUgPT09ICdQbGF5ZXInIHx8IHR5cGUgPT09ICdQaGFudG9tJyB8fCB0eXBlID09PSAnTWltaWMnKTsKICAgIGxldCBoaXBTY2FsZSA9IDEuMDsKICAgIGxldCB3YWlzdFNjYWxlID0gMS4wOwogICAgbGV0IGNoZXN0U2NhbGVYID0gMS4wOwogICAgbGV0IGNoZXN0U2NhbGVaID0gMS4wOwogICAgbGV0IGxpbWJTY2FsZSA9IDEuMDsKICAgIGxldCBhcm1TcGFjaW5nID0gMC4zNDsKICAgIGxldCBsZWdTcGFjaW5nID0gMC4xODsKICAgIGxldCBoZWFkU2NhbGUgPSAxLjA7CiAgICBpZiAoaXNQbGF5ZXJUeXBlKSB7CiAgICAgICAgaWYgKGJvZHlUeXBlID09PSAnZmVtYWxlJykgewogICAgICAgICAgICBoaXBTY2FsZSA9IDEuMTU7CiAgICAgICAgICAgIHdhaXN0U2NhbGUgPSAwLjg1OwogICAgICAgICAgICBjaGVzdFNjYWxlWCA9IDAuOTsKICAgICAgICAgICAgY2hlc3RTY2FsZVogPSAwLjk1OwogICAgICAgICAgICBsaW1iU2NhbGUgPSAwLjk7CiAgICAgICAgICAgIGFybVNwYWNpbmcgPSAwLjMxOwogICAgICAgICAgICBsZWdTcGFjaW5nID0gMC4xOTsKICAgICAgICAgICAgaGVhZFNjYWxlID0gMC45NTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGhpcFNjYWxlID0gMS4wMjsKICAgICAgICAgICAgd2Fpc3RTY2FsZSA9IDEuMTU7CiAgICAgICAgICAgIGNoZXN0U2NhbGVYID0gMS4yNTsKICAgICAgICAgICAgY2hlc3RTY2FsZVogPSAxLjE1OwogICAgICAgICAgICBsaW1iU2NhbGUgPSAxLjE1OwogICAgICAgICAgICBhcm1TcGFjaW5nID0gMC40OwogICAgICAgICAgICBsZWdTcGFjaW5nID0gMC4yOwogICAgICAgICAgICBoZWFkU2NhbGUgPSAxLjA7CiAgICAgICAgfQogICAgfQogICAgY29uc3QgYmxhY2tNYXQgPSBpc1BoYW50b20KICAgICAgICA/IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgICAgICAgICAgIGNvbG9yOiBzZWNvbmRhcnlDb2xvciwKICAgICAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsCiAgICAgICAgICAgIG9wYWNpdHk6IDAuMiwKICAgICAgICAgICAgZW1pc3NpdmU6IHNlY29uZGFyeUNvbG9yLAogICAgICAgICAgICBlbWlzc2l2ZUludGVuc2l0eTogMC41LAogICAgICAgICAgICBkZXB0aFdyaXRlOiBmYWxzZSwKICAgICAgICAgICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcKICAgICAgICB9KQogICAgICAgIDogbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3I6IDB4MWExYTFhLCByb3VnaG5lc3M6IDAuOSB9KTsKICAgIGNvbnN0IHNraW5NYXQgPSBpc1BoYW50b20KICAgICAgICA/IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7IGNvbG9yOiBzZWNvbmRhcnlDb2xvciwgdHJhbnNwYXJlbnQ6IHRydWUsIG9wYWNpdHk6IDAuOCwgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcgfSkKICAgICAgICA6IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiBzZWNvbmRhcnlDb2xvciwgcm91Z2huZXNzOiAwLjUgfSk7CiAgICBjb25zdCB0ZWNoTWF0ID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3I6IDB4NDQ0NDQ0LCBtYXA6IGdlbmVyYXRlVGV4dHVyZSgndGVjaCcpLCBtZXRhbG5lc3M6IDAuOCwgcm91Z2huZXNzOiAwLjQgfSk7CiAgICBjb25zdCB2aXNvck1hdCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgICAgICAgY29sb3I6IHNlY29uZGFyeUNvbG9yLAogICAgICAgIHJvdWdobmVzczogMC4xLAogICAgICAgIG1ldGFsbmVzczogMC45LAogICAgICAgIGVtaXNzaXZlOiBzZWNvbmRhcnlDb2xvciwKICAgICAgICBlbWlzc2l2ZUludGVuc2l0eTogaXNQaGFudG9tID8gMS4wIDogMC4xLAogICAgICAgIHRyYW5zcGFyZW50OiBpc1BoYW50b20sCiAgICAgICAgb3BhY2l0eTogaXNQaGFudG9tID8gMC40IDogMS4wLAogICAgICAgIGRlcHRoV3JpdGU6ICFpc1BoYW50b20sCiAgICAgICAgYmxlbmRpbmc6IGlzUGhhbnRvbSA/IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcgOiBUSFJFRS5Ob3JtYWxCbGVuZGluZwogICAgfSk7CiAgICBsZXQgcyA9IDEuMDsKICAgIGlmICh0eXBlID09PSAnQnJ1dGUnKQogICAgICAgIHMgPSAxLjU7CiAgICBpZiAodHlwZSA9PT0gJ0NyYXdsZXInKQogICAgICAgIHMgPSAwLjg7CiAgICBncm91cC5zY2FsZS5zZXQocywgcywgcyk7CiAgICBjb25zdCBib2R5Um9vdCA9IG5ldyBUSFJFRS5Hcm91cCgpOwogICAgYm9keVJvb3QubmFtZSA9ICdCb2R5Um9vdCc7CiAgICBncm91cC5hZGQoYm9keVJvb3QpOwogICAgY29uc3QgdG9yc29Hcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpOwogICAgYm9keVJvb3QuYWRkKHRvcnNvR3JvdXApOwogICAgLy8gUmVkdWNlZCBzZWdtZW50cyBmb3IgYm9keSBwYXJ0cwogICAgY29uc3QgcGVsdmlzR2VvID0gZ2V0R2VvbWV0cnkoYHBlbHZpc18ke2hpcFNjYWxlfV8ke2JvZHlUeXBlfWAsICgpID0+IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgwLjM2ICogaGlwU2NhbGUsIDAuMjUsIDAuMjIgKiAoaXNQbGF5ZXJUeXBlICYmIGJvZHlUeXBlID09PSAnbWFsZScgPyAxLjA1IDogMS4wKSkpOwogICAgY29uc3QgcGVsdmlzID0gbmV3IFRIUkVFLk1lc2gocGVsdmlzR2VvLCBtYWluTWF0KTsKICAgIHBlbHZpcy5wb3NpdGlvbi5zZXQoMCwgMC45LCAwKTsKICAgIHBlbHZpcy5jYXN0U2hhZG93ID0gIWlzUGhhbnRvbTsKICAgIHRvcnNvR3JvdXAuYWRkKHBlbHZpcyk7CiAgICBjb25zdCBzdG9tYWNoR2VvID0gZ2V0R2VvbWV0cnkoYHN0b21hY2hfJHt3YWlzdFNjYWxlfV8ke2hpcFNjYWxlfWAsICgpID0+IG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDAuMTYgKiB3YWlzdFNjYWxlLCAwLjE4ICogaGlwU2NhbGUsIDAuMjUsIDYpKTsKICAgIGNvbnN0IHN0b21hY2ggPSBuZXcgVEhSRUUuTWVzaChzdG9tYWNoR2VvLCBibGFja01hdCk7CiAgICBzdG9tYWNoLnBvc2l0aW9uLnNldCgwLCAxLjEsIDApOwogICAgdG9yc29Hcm91cC5hZGQoc3RvbWFjaCk7CiAgICBjb25zdCBjaGVzdEdlbyA9IGdldEdlb21ldHJ5KGBjaGVzdF8ke2NoZXN0U2NhbGVYfV8ke2NoZXN0U2NhbGVafWAsICgpID0+IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgwLjQyICogY2hlc3RTY2FsZVgsIDAuNDUsIDAuMjggKiBjaGVzdFNjYWxlWikpOwogICAgY29uc3QgY2hlc3QgPSBuZXcgVEhSRUUuTWVzaChjaGVzdEdlbywgbWFpbk1hdCk7CiAgICBjaGVzdC5wb3NpdGlvbi5zZXQoMCwgMS4zNSwgMCk7CiAgICBjaGVzdC5jYXN0U2hhZG93ID0gIWlzUGhhbnRvbTsKICAgIHRvcnNvR3JvdXAuYWRkKGNoZXN0KTsKICAgIGlmIChbJ1BsYXllcicsICdNaW1pYyddLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgY29uc3QgcGxhdGVHZW8gPSBnZXRHZW9tZXRyeShgcGxhdGVfJHtjaGVzdFNjYWxlWH1fJHtjaGVzdFNjYWxlWn1gLCAoKSA9PiBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMC4yOCAqIGNoZXN0U2NhbGVYLCAwLjIyLCAwLjA1ICsgKGNoZXN0U2NhbGVaID4gMS4wID8gMC4wMiA6IDApKSk7CiAgICAgICAgY29uc3QgcGxhdGUgPSBuZXcgVEhSRUUuTWVzaChwbGF0ZUdlbywgdGVjaE1hdCk7CiAgICAgICAgcGxhdGUucG9zaXRpb24uc2V0KDAsIDEuMzgsIDAuMTQ1ICogY2hlc3RTY2FsZVopOwogICAgICAgIHRvcnNvR3JvdXAuYWRkKHBsYXRlKTsKICAgICAgICBpZiAoaXNQaGFudG9tKSB7CiAgICAgICAgICAgIGNvbnN0IGNvcmUgPSBuZXcgVEhSRUUuTWVzaChnZXRHZW9tZXRyeSgnY29yZScsICgpID0+IG5ldyBUSFJFRS5TcGhlcmVHZW9tZXRyeSgwLjA4LCA4LCA4KSksIHNraW5NYXQpOwogICAgICAgICAgICBjb3JlLnBvc2l0aW9uLnNldCgwLCAxLjM4LCAwLjE4ICogY2hlc3RTY2FsZVopOwogICAgICAgICAgICB0b3Jzb0dyb3VwLmFkZChjb3JlKTsKICAgICAgICB9CiAgICB9CiAgICBjb25zdCBwYWNrR3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTsKICAgIHBhY2tHcm91cC5wb3NpdGlvbi5zZXQoMCwgMS4zNSwgLTAuMTYgKiBjaGVzdFNjYWxlWik7CiAgICB0b3Jzb0dyb3VwLmFkZChwYWNrR3JvdXApOwogICAgY29uc3QgcGFja1NjYWxlID0gYm9keVR5cGUgPT09ICdtYWxlJyA/IDEuMSA6IDEuMDsKICAgIGNvbnN0IHBhY2tNYWluR2VvID0gZ2V0R2VvbWV0cnkoYHBhY2tfJHtwYWNrU2NhbGV9YCwgKCkgPT4gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuMzQgKiBwYWNrU2NhbGUsIDAuNDUsIDAuMTIpKTsKICAgIGNvbnN0IHBhY2tNYWluID0gbmV3IFRIUkVFLk1lc2gocGFja01haW5HZW8sIGlzUGhhbnRvbSA/IG1haW5NYXQgOiB0ZWNoTWF0KTsKICAgIHBhY2tHcm91cC5hZGQocGFja01haW4pOwogICAgY29uc3QgdGFua0dlbyA9IGdldEdlb21ldHJ5KGB0YW5rXyR7cGFja1NjYWxlfWAsICgpID0+IG5ldyBUSFJFRS5DYXBzdWxlR2VvbWV0cnkoMC4wNyAqIHBhY2tTY2FsZSwgMC4zOCwgMiwgNikpOwogICAgY29uc3QgdGFua01hdCA9IGlzUGhhbnRvbSA/IGJsYWNrTWF0IDogbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3I6IDB4ZmZhYTAwLCBtZXRhbG5lc3M6IDAuNiwgcm91Z2huZXNzOiAwLjMgfSk7CiAgICBjb25zdCB0YW5rTCA9IG5ldyBUSFJFRS5NZXNoKHRhbmtHZW8sIHRhbmtNYXQpOwogICAgdGFua0wucG9zaXRpb24uc2V0KC0wLjEyICogcGFja1NjYWxlLCAwLCAtMC4wNSk7CiAgICBwYWNrR3JvdXAuYWRkKHRhbmtMKTsKICAgIGNvbnN0IHRhbmtSID0gdGFua0wuY2xvbmUoKTsKICAgIHRhbmtSLnBvc2l0aW9uLnNldCgwLjEyICogcGFja1NjYWxlLCAwLCAtMC4wNSk7CiAgICBwYWNrR3JvdXAuYWRkKHRhbmtSKTsKICAgIGNvbnN0IGhlYWRHcm91cCA9IG5ldyBUSFJFRS5Hcm91cCgpOwogICAgaGVhZEdyb3VwLm5hbWUgPSAnSGVhZCc7CiAgICBoZWFkR3JvdXAucG9zaXRpb24uc2V0KDAsIDEuNjIsIDApOyAvLyBQb3NpdGlvbiBhdCBuZWNrIGJhc2UKICAgIGhlYWRHcm91cC5zY2FsZS5zZXQoaGVhZFNjYWxlLCBoZWFkU2NhbGUsIGhlYWRTY2FsZSk7CiAgICBib2R5Um9vdC5hZGQoaGVhZEdyb3VwKTsKICAgIGNvbnN0IG5lY2tHZW8gPSBnZXRHZW9tZXRyeShgbmVja18ke2xpbWJTY2FsZX1gLCAoKSA9PiBuZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSgwLjA4ICogbGltYlNjYWxlLCAwLjEyICogbGltYlNjYWxlLCAwLjEyLCA2KSk7CiAgICBjb25zdCBuZWNrID0gbmV3IFRIUkVFLk1lc2gobmVja0dlbywgYmxhY2tNYXQpOwogICAgbmVjay5wb3NpdGlvbi55ID0gMC4wNjsKICAgIGhlYWRHcm91cC5hZGQobmVjayk7CiAgICBjb25zdCBoZWxtZXRWaXN1YWxzID0gbmV3IFRIUkVFLkdyb3VwKCk7CiAgICBoZWxtZXRWaXN1YWxzLnBvc2l0aW9uLnkgPSAwLjE4OwogICAgaGVhZEdyb3VwLmFkZChoZWxtZXRWaXN1YWxzKTsKICAgIGNvbnN0IGhlbG1ldEdlbyA9IGdldEdlb21ldHJ5KCdoZWxtZXQnLCAoKSA9PiBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC4yMywgMTIsIDEyKSk7CiAgICBjb25zdCBoZWxtZXQgPSBuZXcgVEhSRUUuTWVzaChoZWxtZXRHZW8sIG1haW5NYXQpOwogICAgaGVsbWV0VmlzdWFscy5hZGQoaGVsbWV0KTsKICAgIGNvbnN0IHZpc29yR2VvID0gZ2V0R2VvbWV0cnkoJ3Zpc29yJywgKCkgPT4gbmV3IFRIUkVFLlNwaGVyZUdlb21ldHJ5KDAuMTYsIDEyLCAxMikpOwogICAgY29uc3Qgdmlzb3IgPSBuZXcgVEhSRUUuTWVzaCh2aXNvckdlbywgdmlzb3JNYXQpOwogICAgdmlzb3Iuc2NhbGUuc2V0KDEuMiwgMC44LCAwLjYpOwogICAgdmlzb3IucG9zaXRpb24uc2V0KDAsIDAuMDIsIDAuMik7CiAgICBoZWxtZXRWaXN1YWxzLmFkZCh2aXNvcik7CiAgICBjb25zdCBjcmVhdGVMaW1iID0gKG5hbWUsIG94LCBveSwgb3osIGlzTGVnKSA9PiB7CiAgICAgICAgY29uc3QgbGltYiA9IG5ldyBUSFJFRS5Hcm91cCgpOwogICAgICAgIGxpbWIubmFtZSA9IG5hbWU7CiAgICAgICAgbGltYi5wb3NpdGlvbi5zZXQob3gsIG95LCBveik7CiAgICAgICAgaWYgKCFpc0xlZykgewogICAgICAgICAgICBjb25zdCBwYXVsZHJvbkdlbyA9IGdldEdlb21ldHJ5KGBwYXVsZHJvbl8ke2xpbWJTY2FsZX1gLCAoKSA9PiBuZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSgwLjEyICogbGltYlNjYWxlLCAwLjA4ICogbGltYlNjYWxlLCAwLjE1LCA2KSk7CiAgICAgICAgICAgIGNvbnN0IHBhdWxkcm9uID0gbmV3IFRIUkVFLk1lc2gocGF1bGRyb25HZW8sIG1haW5NYXQpOwogICAgICAgICAgICBwYXVsZHJvbi5yb3RhdGlvbi56ID0gb3ggPiAwID8gLU1hdGguUEkgLyAyIDogTWF0aC5QSSAvIDI7CiAgICAgICAgICAgIHBhdWxkcm9uLnBvc2l0aW9uLnggPSBveCA+IDAgPyAtMC4wOCA6IDAuMDg7CiAgICAgICAgICAgIGxpbWIuYWRkKHBhdWxkcm9uKTsKICAgICAgICB9CiAgICAgICAgY29uc3Qgam9pbnRSYWQgPSAoaXNMZWcgPyAwLjEzIDogMC4xMSkgKiBsaW1iU2NhbGU7CiAgICAgICAgY29uc3Qgam9pbnRHZW8gPSBnZXRHZW9tZXRyeShgam9pbnRfJHtqb2ludFJhZH1gLCAoKSA9PiBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoam9pbnRSYWQsIDgsIDgpKTsKICAgICAgICBjb25zdCBqb2ludCA9IG5ldyBUSFJFRS5NZXNoKGpvaW50R2VvLCBibGFja01hdCk7CiAgICAgICAgbGltYi5hZGQoam9pbnQpOwogICAgICAgIGNvbnN0IHVwcGVyTGVuID0gMC4zNTsKICAgICAgICBjb25zdCB1cHBlclJhZCA9IChpc0xlZyA/IDAuMTIgOiAwLjA5KSAqIGxpbWJTY2FsZTsKICAgICAgICBjb25zdCB1cHBlckdlbyA9IGdldEdlb21ldHJ5KGB1cHBlcl8ke3VwcGVyUmFkfWAsICgpID0+IG5ldyBUSFJFRS5DYXBzdWxlR2VvbWV0cnkodXBwZXJSYWQsIHVwcGVyTGVuLCAyLCA2KSk7CiAgICAgICAgY29uc3QgdXBwZXIgPSBuZXcgVEhSRUUuTWVzaCh1cHBlckdlbywgbWFpbk1hdCk7CiAgICAgICAgY29uc3QgdXBwZXJZID0gMC4wNSAtICh1cHBlckxlbiAvIDIgKyB1cHBlclJhZCk7CiAgICAgICAgdXBwZXIucG9zaXRpb24ueSA9IHVwcGVyWTsKICAgICAgICB1cHBlci5jYXN0U2hhZG93ID0gIWlzUGhhbnRvbTsKICAgICAgICBsaW1iLmFkZCh1cHBlcik7CiAgICAgICAgY29uc3QgbWlkSm9pbnRSYWQgPSB1cHBlclJhZCAqIDAuOTU7CiAgICAgICAgY29uc3QgbWlkSm9pbnRHZW8gPSBnZXRHZW9tZXRyeShgbWlkam9pbnRfJHttaWRKb2ludFJhZH1gLCAoKSA9PiBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkobWlkSm9pbnRSYWQsIDgsIDgpKTsKICAgICAgICBjb25zdCBtaWRKb2ludCA9IG5ldyBUSFJFRS5NZXNoKG1pZEpvaW50R2VvLCBibGFja01hdCk7CiAgICAgICAgY29uc3QgbWlkWSA9IHVwcGVyWSAtIHVwcGVyTGVuIC8gMiAtIDAuMDI7CiAgICAgICAgbWlkSm9pbnQucG9zaXRpb24ueSA9IG1pZFk7CiAgICAgICAgbGltYi5hZGQobWlkSm9pbnQpOwogICAgICAgIGNvbnN0IGxvd2VyTGVuID0gMC4zNTsKICAgICAgICBjb25zdCBsb3dlclJhZCA9IChpc0xlZyA/IDAuMTEgOiAwLjA4KSAqIGxpbWJTY2FsZTsKICAgICAgICBjb25zdCBsb3dlckdlbyA9IGdldEdlb21ldHJ5KGBsb3dlcl8ke2xvd2VyUmFkfWAsICgpID0+IG5ldyBUSFJFRS5DYXBzdWxlR2VvbWV0cnkobG93ZXJSYWQsIGxvd2VyTGVuLCAyLCA2KSk7CiAgICAgICAgY29uc3QgbG93ZXIgPSBuZXcgVEhSRUUuTWVzaChsb3dlckdlbywgbWFpbk1hdCk7CiAgICAgICAgY29uc3QgbG93ZXJZID0gbWlkWSAtIChsb3dlckxlbiAvIDIgKyBsb3dlclJhZCkgKyAwLjA1OwogICAgICAgIGxvd2VyLnBvc2l0aW9uLnkgPSBsb3dlclk7CiAgICAgICAgbGltYi5hZGQobG93ZXIpOwogICAgICAgIGNvbnN0IHRpcFkgPSBsb3dlclkgLSBsb3dlckxlbiAvIDIgLSBsb3dlclJhZDsKICAgICAgICBpZiAoaXNMZWcpIHsKICAgICAgICAgICAgY29uc3QgYm9vdEdlbyA9IGdldEdlb21ldHJ5KGBib290XyR7bGltYlNjYWxlfWAsICgpID0+IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgwLjI0ICogbGltYlNjYWxlLCAwLjE1LCAwLjMyICogbGltYlNjYWxlKSk7CiAgICAgICAgICAgIGNvbnN0IGJvb3QgPSBuZXcgVEhSRUUuTWVzaChib290R2VvLCBibGFja01hdCk7CiAgICAgICAgICAgIGJvb3QucG9zaXRpb24uc2V0KDAsIHRpcFksIDAuMDgpOwogICAgICAgICAgICBsaW1iLmFkZChib290KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IGdsb3ZlR2VvID0gZ2V0R2VvbWV0cnkoYGdsb3ZlXyR7bGltYlNjYWxlfWAsICgpID0+IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgwLjEyICogbGltYlNjYWxlLCAwLjE0ICogbGltYlNjYWxlLCAwLjEyICogbGltYlNjYWxlKSk7CiAgICAgICAgICAgIGNvbnN0IGdsb3ZlID0gbmV3IFRIUkVFLk1lc2goZ2xvdmVHZW8sIGJsYWNrTWF0KTsKICAgICAgICAgICAgZ2xvdmUucG9zaXRpb24ueSA9IHRpcFkgKyAwLjAyOwogICAgICAgICAgICBsaW1iLmFkZChnbG92ZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBsaW1iOwogICAgfTsKICAgIGNvbnN0IGFybUwgPSBjcmVhdGVMaW1iKCdBcm1MJywgLWFybVNwYWNpbmcsIDEuMzIsIDAsIGZhbHNlKTsKICAgIGJvZHlSb290LmFkZChhcm1MKTsKICAgIGNvbnN0IGFybVIgPSBjcmVhdGVMaW1iKCdBcm1SJywgYXJtU3BhY2luZywgMS4zMiwgMCwgZmFsc2UpOwogICAgYm9keVJvb3QuYWRkKGFybVIpOwogICAgY29uc3QgbGVnTCA9IGNyZWF0ZUxpbWIoJ0xlZ0wnLCAtbGVnU3BhY2luZywgMC45LCAwLCB0cnVlKTsKICAgIGJvZHlSb290LmFkZChsZWdMKTsKICAgIGNvbnN0IGxlZ1IgPSBjcmVhdGVMaW1iKCdMZWdSJywgbGVnU3BhY2luZywgMC45LCAwLCB0cnVlKTsKICAgIGJvZHlSb290LmFkZChsZWdSKTsKICAgIGlmIChpc1BoYW50b20pIHsKICAgICAgICBjb25zdCBzcGluZSA9IG5ldyBUSFJFRS5NZXNoKGdldEdlb21ldHJ5KCdzcGluZScsICgpID0+IG5ldyBUSFJFRS5DeWxpbmRlckdlb21ldHJ5KDAuMDQsIDAuMDQsIDAuNikpLCBza2luTWF0KTsKICAgICAgICBzcGluZS5wb3NpdGlvbi55ID0gMS4xOwogICAgICAgIGJvZHlSb290LmFkZChzcGluZSk7CiAgICB9CiAgICByZXR1cm4gZ3JvdXA7Cn07Cg==","@/components/ModelViewerModal":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7CmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJzsKaW1wb3J0IHsgY3JlYXRlU3VpdE1lc2ggfSBmcm9tICdAL3NlcnZpY2VzL21vZGVsRmFjdG9yeSc7CmltcG9ydCB7IFgsIENoZXZyb25MZWZ0LCBDaGV2cm9uUmlnaHQsIEJveCwgTW92ZUhvcml6b250YWwgfSBmcm9tICdsdWNpZGUtcmVhY3QnOwppbXBvcnQgeyBTb3VuZEZYIH0gZnJvbSAnQC9zZXJ2aWNlcy9hdWRpb0VuZ2luZSc7CmNvbnN0IE1PREVMUyA9IFsnUGxheWVyIChNYWxlKScsICdQbGF5ZXIgKEZlbWFsZSknLCAnQ3Jhd2xlcicsICdCcnV0ZScsICdQaGFudG9tJywgJ1dlZXBlcicsICdNaW1pYyddOwpleHBvcnQgY29uc3QgTW9kZWxWaWV3ZXJNb2RhbCA9ICh7IG9uQ2xvc2UgfSkgPT4gewogICAgY29uc3QgbW91bnRSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCBbY3VycmVudEluZGV4LCBzZXRDdXJyZW50SW5kZXhdID0gdXNlU3RhdGUoMCk7CiAgICAvLyBSZWZzIGZvciBUaHJlZS5qcyBvYmplY3RzIHRvIHBlcnNpc3QgYWNyb3NzIHJlbmRlcnMKICAgIGNvbnN0IHNjZW5lUmVmID0gdXNlUmVmKG51bGwpOwogICAgY29uc3QgbW9kZWxSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCByZW5kZXJlclJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IGNhbWVyYVJlZiA9IHVzZVJlZihudWxsKTsKICAgIGNvbnN0IGZyYW1lSWRSZWYgPSB1c2VSZWYoMCk7CiAgICBjb25zdCBjdXJyZW50TW9kZWxTdHIgPSBNT0RFTFNbY3VycmVudEluZGV4XTsKICAgIC8vIEluaXRpYWxpemUgU2NlbmUKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKCFtb3VudFJlZi5jdXJyZW50KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgLy8gMS4gU2V0dXAgU2NlbmUKICAgICAgICBjb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpOwogICAgICAgIHNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ29sb3IoMHgwYTBhMGEpOyAvLyBEYXJrIGdyZXkgYmFja2dyb3VuZAogICAgICAgIHNjZW5lUmVmLmN1cnJlbnQgPSBzY2VuZTsKICAgICAgICAvLyAyLiBTZXR1cCBDYW1lcmEKICAgICAgICBjb25zdCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNDUsIDEsIDAuMSwgMTAwKTsKICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KDAsIDEuNSwgNC41KTsKICAgICAgICBjYW1lcmEubG9va0F0KDAsIDAuOSwgMCk7CiAgICAgICAgY2FtZXJhUmVmLmN1cnJlbnQgPSBjYW1lcmE7CiAgICAgICAgLy8gMy4gU2V0dXAgUmVuZGVyZXIKICAgICAgICBjb25zdCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYW50aWFsaWFzOiB0cnVlLCBhbHBoYTogdHJ1ZSwgcG93ZXJQcmVmZXJlbmNlOiAnaGlnaC1wZXJmb3JtYW5jZScgfSk7CiAgICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyhNYXRoLm1pbih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgMikpOwogICAgICAgIHJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gdHJ1ZTsKICAgICAgICByZW5kZXJlci5zaGFkb3dNYXAudHlwZSA9IFRIUkVFLlBDRlNvZnRTaGFkb3dNYXA7CiAgICAgICAgbW91bnRSZWYuY3VycmVudC5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTsKICAgICAgICByZW5kZXJlclJlZi5jdXJyZW50ID0gcmVuZGVyZXI7CiAgICAgICAgLy8gNC4gTGlnaHRzCiAgICAgICAgY29uc3QgYW1iaWVudCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDAuNCk7CiAgICAgICAgc2NlbmUuYWRkKGFtYmllbnQpOwogICAgICAgIGNvbnN0IHNwb3QgPSBuZXcgVEhSRUUuU3BvdExpZ2h0KDB4ZmZmZmZmLCAyLjUpOwogICAgICAgIHNwb3QucG9zaXRpb24uc2V0KDMsIDUsIDQpOwogICAgICAgIHNwb3QuY2FzdFNoYWRvdyA9IHRydWU7CiAgICAgICAgc3BvdC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IDEwMjQ7CiAgICAgICAgc3BvdC5zaGFkb3cubWFwU2l6ZS5oZWlnaHQgPSAxMDI0OwogICAgICAgIHNjZW5lLmFkZChzcG90KTsKICAgICAgICBjb25zdCByaW0gPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweDAwZmZmZiwgMS4yKTsKICAgICAgICByaW0ucG9zaXRpb24uc2V0KC0zLCAyLCAtMyk7CiAgICAgICAgc2NlbmUuYWRkKHJpbSk7CiAgICAgICAgY29uc3QgZmlsbCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ZmZhYTAwLCAwLjUpOwogICAgICAgIGZpbGwucG9zaXRpb24uc2V0KDAsIDEsIDIpOwogICAgICAgIHNjZW5lLmFkZChmaWxsKTsKICAgICAgICAvLyA1LiBQbGF0Zm9ybQogICAgICAgIGNvbnN0IHBsYXRHZW8gPSBuZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSgxLjQsIDEuNCwgMC4wNSwgMzIpOwogICAgICAgIGNvbnN0IHBsYXRNYXQgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHgxYTFhMWEsIG1ldGFsbmVzczogMC44LCByb3VnaG5lc3M6IDAuMiB9KTsKICAgICAgICBjb25zdCBwbGF0ID0gbmV3IFRIUkVFLk1lc2gocGxhdEdlbywgcGxhdE1hdCk7CiAgICAgICAgcGxhdC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTsKICAgICAgICBwbGF0LnBvc2l0aW9uLnkgPSAtMC4wMjU7CiAgICAgICAgc2NlbmUuYWRkKHBsYXQpOwogICAgICAgIC8vIDYuIEdyaWQKICAgICAgICBjb25zdCBncmlkID0gbmV3IFRIUkVFLkdyaWRIZWxwZXIoMTAsIDEwLCAweDAwZmYwMCwgMHgxMTExMTEpOwogICAgICAgIGdyaWQucG9zaXRpb24ueSA9IC0wLjAzOwogICAgICAgIGdyaWQubWF0ZXJpYWwub3BhY2l0eSA9IDAuMjsKICAgICAgICBncmlkLm1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZTsKICAgICAgICBzY2VuZS5hZGQoZ3JpZCk7CiAgICAgICAgLy8gNy4gSGFuZGxlIFJlc2l6ZSAoQ3JpdGljYWwgZm9yIE1vZGFscykKICAgICAgICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7CiAgICAgICAgICAgIGlmICghbW91bnRSZWYuY3VycmVudCB8fCAhcmVuZGVyZXIgfHwgIWNhbWVyYSkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY29uc3Qgd2lkdGggPSBtb3VudFJlZi5jdXJyZW50LmNsaWVudFdpZHRoOwogICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBtb3VudFJlZi5jdXJyZW50LmNsaWVudEhlaWdodDsKICAgICAgICAgICAgaWYgKHdpZHRoID09PSAwIHx8IGhlaWdodCA9PT0gMCkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgY2FtZXJhLmFzcGVjdCA9IHdpZHRoIC8gaGVpZ2h0OwogICAgICAgICAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpOwogICAgICAgICAgICByZW5kZXJlci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpOwogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKCkgPT4gaGFuZGxlUmVzaXplKCkpOwogICAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUobW91bnRSZWYuY3VycmVudCk7CiAgICAgICAgaGFuZGxlUmVzaXplKCk7IC8vIEluaXRpYWwgY2FsbAogICAgICAgIC8vIEludGVyYWN0aW9uIFZhcmlhYmxlcwogICAgICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7CiAgICAgICAgbGV0IHByZXZpb3VzTW91c2VYID0gMDsKICAgICAgICBjb25zdCBzdGFydERyYWcgPSAoZSkgPT4gewogICAgICAgICAgICBpc0RyYWdnaW5nID0gdHJ1ZTsKICAgICAgICAgICAgcHJldmlvdXNNb3VzZVggPSAndG91Y2hlcycgaW4gZSA/IGUudG91Y2hlc1swXS5jbGllbnRYIDogZS5jbGllbnRYOwogICAgICAgICAgICBpZiAobW91bnRSZWYuY3VycmVudCkKICAgICAgICAgICAgICAgIG1vdW50UmVmLmN1cnJlbnQuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJzsKICAgICAgICB9OwogICAgICAgIGNvbnN0IG1vdmVEcmFnID0gKGUpID0+IHsKICAgICAgICAgICAgaWYgKCFpc0RyYWdnaW5nIHx8ICFtb2RlbFJlZi5jdXJyZW50KQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBjbGllbnRYID0gJ3RvdWNoZXMnIGluIGUgPyBlLnRvdWNoZXNbMF0uY2xpZW50WCA6IGUuY2xpZW50WDsKICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBjbGllbnRYIC0gcHJldmlvdXNNb3VzZVg7CiAgICAgICAgICAgIG1vZGVsUmVmLmN1cnJlbnQucm90YXRpb24ueSArPSBkZWx0YSAqIDAuMDE7CiAgICAgICAgICAgIHByZXZpb3VzTW91c2VYID0gY2xpZW50WDsKICAgICAgICB9OwogICAgICAgIGNvbnN0IGVuZERyYWcgPSAoKSA9PiB7CiAgICAgICAgICAgIGlzRHJhZ2dpbmcgPSBmYWxzZTsKICAgICAgICAgICAgaWYgKG1vdW50UmVmLmN1cnJlbnQpCiAgICAgICAgICAgICAgICBtb3VudFJlZi5jdXJyZW50LnN0eWxlLmN1cnNvciA9ICdncmFiJzsKICAgICAgICB9OwogICAgICAgIGNvbnN0IGVsID0gbW91bnRSZWYuY3VycmVudDsKICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydERyYWcpOwogICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzdGFydERyYWcsIHsgcGFzc2l2ZTogZmFsc2UgfSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVEcmFnKTsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgbW92ZURyYWcsIHsgcGFzc2l2ZTogZmFsc2UgfSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBlbmREcmFnKTsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBlbmREcmFnKTsKICAgICAgICAvLyA4LiBBbmltYXRpb24gTG9vcAogICAgICAgIGNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7CiAgICAgICAgICAgIGZyYW1lSWRSZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTsKICAgICAgICAgICAgaWYgKG1vZGVsUmVmLmN1cnJlbnQgJiYgIWlzRHJhZ2dpbmcpIHsKICAgICAgICAgICAgICAgIG1vZGVsUmVmLmN1cnJlbnQucm90YXRpb24ueSArPSAwLjAwMjsgLy8gU2xvdyBpZGxlIHJvdGF0aW9uCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpOwogICAgICAgIH07CiAgICAgICAgYW5pbWF0ZSgpOwogICAgICAgIC8vIENsZWFudXAKICAgICAgICByZXR1cm4gKCkgPT4gewogICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZUlkUmVmLmN1cnJlbnQpOwogICAgICAgICAgICByZXNpemVPYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHN0YXJ0RHJhZyk7CiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzdGFydERyYWcpOwogICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZURyYWcpOwogICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgbW92ZURyYWcpOwogICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGVuZERyYWcpOwogICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBlbmREcmFnKTsKICAgICAgICAgICAgaWYgKHJlbmRlcmVyICYmIG1vdW50UmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgICAgIG1vdW50UmVmLmN1cnJlbnQucmVtb3ZlQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7CiAgICAgICAgICAgICAgICByZW5kZXJlci5kaXNwb3NlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfSwgW10pOwogICAgLy8gVXBkYXRlIE1vZGVsIHdoZW4gc2VsZWN0aW9uIGNoYW5nZXMKICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgaWYgKCFzY2VuZVJlZi5jdXJyZW50KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKG1vZGVsUmVmLmN1cnJlbnQpIHsKICAgICAgICAgICAgc2NlbmVSZWYuY3VycmVudC5yZW1vdmUobW9kZWxSZWYuY3VycmVudCk7CiAgICAgICAgfQogICAgICAgIGxldCB0eXBlID0gY3VycmVudE1vZGVsU3RyOwogICAgICAgIGxldCBib2R5VHlwZSA9ICdtYWxlJzsKICAgICAgICBsZXQgaXNQaGFudG9tID0gZmFsc2U7CiAgICAgICAgaWYgKGN1cnJlbnRNb2RlbFN0ciA9PT0gJ1BsYXllciAoTWFsZSknKSB7CiAgICAgICAgICAgIHR5cGUgPSAnUGxheWVyJzsKICAgICAgICAgICAgYm9keVR5cGUgPSAnbWFsZSc7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGN1cnJlbnRNb2RlbFN0ciA9PT0gJ1BsYXllciAoRmVtYWxlKScpIHsKICAgICAgICAgICAgdHlwZSA9ICdQbGF5ZXInOwogICAgICAgICAgICBib2R5VHlwZSA9ICdmZW1hbGUnOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChjdXJyZW50TW9kZWxTdHIgPT09ICdQaGFudG9tJykgewogICAgICAgICAgICB0eXBlID0gJ1BoYW50b20nOwogICAgICAgICAgICBpc1BoYW50b20gPSB0cnVlOwogICAgICAgIH0KICAgICAgICBjb25zdCBjb2xvciA9IHR5cGUgPT09ICdQbGF5ZXInID8gJyMwMGZmZmYnIDogJyNmZjAwMDAnOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IG1lc2ggPSBjcmVhdGVTdWl0TWVzaCh0eXBlLCBjb2xvciwgJyMwMDAwMDAnLCBpc1BoYW50b20sIGJvZHlUeXBlKTsKICAgICAgICAgICAgbWVzaC5wb3NpdGlvbi55ID0gMDsKICAgICAgICAgICAgLy8gRW5zdXJlIHNoYWRvdyBjYXN0aW5nCiAgICAgICAgICAgIG1lc2gudHJhdmVyc2UoKGNoaWxkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7CiAgICAgICAgICAgICAgICAgICAgY2hpbGQuY2FzdFNoYWRvdyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgY2hpbGQucmVjZWl2ZVNoYWRvdyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzY2VuZVJlZi5jdXJyZW50LmFkZChtZXNoKTsKICAgICAgICAgICAgbW9kZWxSZWYuY3VycmVudCA9IG1lc2g7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBsb2FkIG1vZGVsIiwgZSk7CiAgICAgICAgfQogICAgfSwgW2N1cnJlbnRNb2RlbFN0cl0pOwogICAgY29uc3QgaGFuZGxlTmV4dCA9ICgpID0+IHsKICAgICAgICBTb3VuZEZYLnBsYXlLZXkoKTsKICAgICAgICBzZXRDdXJyZW50SW5kZXgoKHByZXYpID0+IChwcmV2ICsgMSkgJSBNT0RFTFMubGVuZ3RoKTsKICAgIH07CiAgICBjb25zdCBoYW5kbGVQcmV2ID0gKCkgPT4gewogICAgICAgIFNvdW5kRlgucGxheUtleSgpOwogICAgICAgIHNldEN1cnJlbnRJbmRleCgocHJldikgPT4gKHByZXYgLSAxICsgTU9ERUxTLmxlbmd0aCkgJSBNT0RFTFMubGVuZ3RoKTsKICAgIH07CiAgICByZXR1cm4gKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiZml4ZWQgaW5zZXQtMCB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWJsYWNrLzgwIGJhY2tkcm9wLWJsdXItc20gYW5pbWF0ZS1mYWRlLWluIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImJnLWJsYWNrIGJvcmRlci0yIGJvcmRlci1ncmVlbi01MDAgcm91bmRlZC1sZyB3LWZ1bGwgbWF4LXctNHhsIGgtWzgwdmhdIGZsZXggZmxleC1jb2wgcmVsYXRpdmUgc2hhZG93LVswXzBfNTBweF9yZ2JhKDAsMjU1LDAsMC4yKV0gb3ZlcmZsb3ctaGlkZGVuIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgdy1mdWxsIHAtNCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgei0xMCBiZy1ncmFkaWVudC10by1iIGZyb20tYmxhY2svODAgdG8tdHJhbnNwYXJlbnQiLCBjaGlsZHJlbjogW19qc3hzKCJoMiIsIHsgY2xhc3NOYW1lOiAidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JlZW4tNTAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGZvbnQtdnQzMjMiLCBjaGlsZHJlbjogW19qc3goQm94LCB7fSksICIgRU5USVRZIERBVEFCQVNFIC8vICIsIGN1cnJlbnRNb2RlbFN0ci50b1VwcGVyQ2FzZSgpXSB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBvbkNsb3NlLCBjbGFzc05hbWU6ICJ0ZXh0LXJlZC01MDAgaG92ZXI6dGV4dC1yZWQtMzAwIGJvcmRlciBib3JkZXItcmVkLTkwMCBiZy1ibGFjay81MCBwLTIgcm91bmRlZCB6LTUwIHBvaW50ZXItZXZlbnRzLWF1dG8iLCBjaGlsZHJlbjogX2pzeChYLCB7IHNpemU6IDI0IH0pIH0pXSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleC0xIHctZnVsbCBoLWZ1bGwgcmVsYXRpdmUgYmctZ3JhZGllbnQtdG8tYiBmcm9tLVsjMGEwYTBhXSB0by1ibGFjayIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyByZWY6IG1vdW50UmVmLCBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIHctZnVsbCBoLWZ1bGwgY3Vyc29yLWdyYWIgYWN0aXZlOmN1cnNvci1ncmFiYmluZyIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGJvdHRvbS0yNCBsZWZ0LTEvMiAtdHJhbnNsYXRlLXgtMS8yIHRleHQtZ3JlZW4tNTAwLzUwIHRleHQteHMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgcG9pbnRlci1ldmVudHMtbm9uZSBhbmltYXRlLXB1bHNlIiwgY2hpbGRyZW46IFtfanN4KE1vdmVIb3Jpem9udGFsLCB7IHNpemU6IDE0IH0pLCAiIERSQUcgVE8gUk9UQVRFIl0gfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBib3R0b20tMCBsZWZ0LTAgdy1mdWxsIHAtNiBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgYmctZ3JhZGllbnQtdG8tdCBmcm9tLWJsYWNrLzkwIHRvLXRyYW5zcGFyZW50IHotMTAiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlUHJldiwgY2xhc3NOYW1lOiAidGV4dC1ncmVlbi01MDAgaG92ZXI6dGV4dC1ncmVlbi0zMDAgYmctYmxhY2svNTAgYm9yZGVyIGJvcmRlci1ncmVlbi04MDAgcC0yIHJvdW5kZWQgaG92ZXI6YmctZ3JlZW4tOTAwLzMwIHRyYW5zaXRpb24tYWxsIHotNTAgcG9pbnRlci1ldmVudHMtYXV0byIsIGNoaWxkcmVuOiBfanN4KENoZXZyb25MZWZ0LCB7IHNpemU6IDQ4IH0pIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBwb2ludGVyLWV2ZW50cy1ub25lIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtZ3JlZW4tNDAwIGZvbnQtbW9ubyB0ZXh0LXNtIG1iLTEgb3BhY2l0eS03MCIsIGNoaWxkcmVuOiAiU1VCSkVDVCBDTEFTUyIgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC00eGwgZm9udC1ib2xkIHRleHQtd2hpdGUgdHJhY2tpbmctd2lkZXN0IHRleHQtZ2xvdyB1cHBlcmNhc2UiLCBjaGlsZHJlbjogY3VycmVudE1vZGVsU3RyIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTIgbXQtMiIsIGNoaWxkcmVuOiBNT0RFTFMubWFwKChtLCBpKSA9PiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6IGB3LTIgaC0yIHJvdW5kZWQtZnVsbCAke2kgPT09IGN1cnJlbnRJbmRleCA/ICdiZy1ncmVlbi01MDAgc2hhZG93LVswXzBfNXB4XyMwZjBdJyA6ICdiZy1ncmVlbi05MDAnfWAgfSwgbSkpKSB9KV0gfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlTmV4dCwgY2xhc3NOYW1lOiAidGV4dC1ncmVlbi01MDAgaG92ZXI6dGV4dC1ncmVlbi0zMDAgYmctYmxhY2svNTAgYm9yZGVyIGJvcmRlci1ncmVlbi04MDAgcC0yIHJvdW5kZWQgaG92ZXI6YmctZ3JlZW4tOTAwLzMwIHRyYW5zaXRpb24tYWxsIHotNTAgcG9pbnRlci1ldmVudHMtYXV0byIsIGNoaWxkcmVuOiBfanN4KENoZXZyb25SaWdodCwgeyBzaXplOiA0OCB9KSB9KV0gfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBwb2ludGVyLWV2ZW50cy1ub25lIGJnLVt1cmwoJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQVFBQUFBRUNBWUFBQUNwOFo1K0FBQUFJa2xFUVZRSVcyTmtRQUtyVnEzNnp3ampnemhoWldHTXlhOS9rQ0o0aUkwSUFBQnk0aFkzNVRFTzBBQUFBQUJKUlU1RXJrSmdnZz09JyldIG9wYWNpdHktMTAiIH0pXSB9KSB9KSk7Cn07Cg==","@/components/VoteModal":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBYLCBCb3QsIFVzZXIsIEJhckNoYXJ0MyB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7CmltcG9ydCB7IFNvdW5kRlggfSBmcm9tICdAL3NlcnZpY2VzL2F1ZGlvRW5naW5lJzsKZXhwb3J0IGNvbnN0IFZvdGVNb2RhbCA9ICh7IHZvdGVzLCBvblZvdGUsIG9uQ2xvc2UgfSkgPT4gewogICAgY29uc3QgW2hhc1ZvdGVkLCBzZXRIYXNWb3RlZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdMRVRIQUxfSEFTX1ZPVEVEJyk7CiAgICAgICAgaWYgKHN0b3JlZCkKICAgICAgICAgICAgc2V0SGFzVm90ZWQodHJ1ZSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBoYW5kbGVWb3RlID0gKG9wdGlvbikgPT4gewogICAgICAgIGlmIChoYXNWb3RlZCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIFNvdW5kRlgucGxheVN1Y2Nlc3MoKTsKICAgICAgICBvblZvdGUob3B0aW9uKTsKICAgICAgICBzZXRIYXNWb3RlZCh0cnVlKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnTEVUSEFMX0hBU19WT1RFRCcsICd0cnVlJyk7CiAgICB9OwogICAgcmV0dXJuIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZpeGVkIGluc2V0LTAgei1bMTAwXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibGFjay84MCBiYWNrZHJvcC1ibHVyLXNtIGFuaW1hdGUtZmFkZS1pbiBmb250LXZ0MzIzIiwgY2hpbGRyZW46IF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInJlbGF0aXZlIHctZnVsbCBtYXgtdy1sZyBiZy1ibGFjayBib3JkZXItNCBib3JkZXIteWVsbG93LTYwMCBzaGFkb3ctWzBfMF80MHB4X3JnYmEoMjU1LDE2NSwwLDAuMyldIHAtMSIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmcteWVsbG93LTkwMC8zMCBwLTQgYm9yZGVyLWIgYm9yZGVyLXllbGxvdy03MDAgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIiwgY2hpbGRyZW46IFtfanN4cygiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtMnhsIHRleHQteWVsbG93LTUwMCBmb250LWJvbGQgdHJhY2tpbmctd2lkZXN0IGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIiwgY2hpbGRyZW46IFtfanN4KEJhckNoYXJ0Mywge30pLCAiIENPTU1VTklUWSBQT0xMIFVQTElOSyJdIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHsgU291bmRGWC5wbGF5S2V5KCk7IG9uQ2xvc2UoKTsgfSwgY2xhc3NOYW1lOiAidGV4dC15ZWxsb3ctNzAwIGhvdmVyOnRleHQteWVsbG93LTQwMCIsIGNoaWxkcmVuOiBfanN4KFgsIHsgc2l6ZTogMjQgfSkgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJwLTYgc3BhY2UteS02IGJnLWdyYWRpZW50LXRvLWIgZnJvbS1ibGFjayB0by15ZWxsb3ctOTUwLzEwIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWNlbnRlciBzcGFjZS15LTIiLCBjaGlsZHJlbjogW19qc3goInAiLCB7IGNsYXNzTmFtZTogInRleHQteWVsbG93LTEwMCB0ZXh0LWxnIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciIsIGNoaWxkcmVuOiAiVGhlIENvbXBhbnkgcmVxdWVzdHMgeW91ciBpbnB1dC4iIH0pLCBfanN4KCJoMyIsIHsgY2xhc3NOYW1lOiAidGV4dC15ZWxsb3ctNTAwIGZvbnQtYm9sZCB0ZXh0LTJ4bCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0IiwgY2hpbGRyZW46ICJORVcgUExBWUVSIE1PREVMUyBWUyBTQU1FIE9ORSIgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJncmlkIGdyaWQtY29scy0yIGdhcC02IG10LTQiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYGJvcmRlci0yIHAtNCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0cmFuc2l0aW9uLWNvbG9ycyAke2hhc1ZvdGVkID8gJ2JvcmRlci15ZWxsb3ctOTAwLzUwIG9wYWNpdHktODAnIDogJ2JvcmRlci15ZWxsb3ctNjAwIGJnLXllbGxvdy05MDAvMTAnfWAsIGNoaWxkcmVuOiBbX2pzeChCb3QsIHsgc2l6ZTogNDgsIGNsYXNzTmFtZTogInRleHQteWVsbG93LTUwMCBtYi0yIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXllbGxvdy01MDAgZm9udC1ib2xkIHRleHQteGwgbWItMSIsIGNoaWxkcmVuOiAiUk9CT1QgTU9ERUxTIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTV4bCB0ZXh0LXllbGxvdy0zMDAgZm9udC1ib2xkIG1iLTQgdHJhY2tpbmctdGlnaHRlciIsIGNoaWxkcmVuOiB2b3Rlcy5yb2JvdHMgfSksICFoYXNWb3RlZCA/IChfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IGhhbmRsZVZvdGUoJ3JvYm90cycpLCBjbGFzc05hbWU6ICJ3LWZ1bGwgcHktMyBiZy15ZWxsb3ctOTAwLzQwIGJvcmRlciBib3JkZXIteWVsbG93LTUwMCB0ZXh0LXllbGxvdy00MDAgaG92ZXI6YmcteWVsbG93LTUwMCBob3Zlcjp0ZXh0LWJsYWNrIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtYm9sZCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0IHRleHQteGwgc2hhZG93LVswXzBfMTVweF9yZ2JhKDIzNCwxNzksOCwwLjIpXSBob3ZlcjpzaGFkb3ctWzBfMF8yMHB4X3JnYmEoMjM0LDE3OSw4LDAuNildIiwgY2hpbGRyZW46ICJWT1RFIiB9KSkgOiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXllbGxvdy03MDAgdGV4dC1zbSB0cmFja2luZy13aWRlc3QgYm9yZGVyIGJvcmRlci15ZWxsb3ctOTAwIHB4LTMgcHktMSByb3VuZGVkIiwgY2hpbGRyZW46ICJMT0NLRUQiIH0pKV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogYGJvcmRlci0yIHAtNCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0cmFuc2l0aW9uLWNvbG9ycyAke2hhc1ZvdGVkID8gJ2JvcmRlci1ncmVlbi05MDAvNTAgb3BhY2l0eS04MCcgOiAnYm9yZGVyLWdyZWVuLTYwMCBiZy1ncmVlbi05MDAvMTAnfWAsIGNoaWxkcmVuOiBbX2pzeChVc2VyLCB7IHNpemU6IDQ4LCBjbGFzc05hbWU6ICJ0ZXh0LWdyZWVuLTUwMCBtYi0yIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWdyZWVuLTUwMCBmb250LWJvbGQgdGV4dC14bCBtYi0xIiwgY2hpbGRyZW46ICJTVEFOREFSRCIgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC01eGwgdGV4dC1ncmVlbi0zMDAgZm9udC1ib2xkIG1iLTQgdHJhY2tpbmctdGlnaHRlciIsIGNoaWxkcmVuOiB2b3Rlcy5zYW1lIH0pLCAhaGFzVm90ZWQgPyAoX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBoYW5kbGVWb3RlKCdzYW1lJyksIGNsYXNzTmFtZTogInctZnVsbCBweS0zIGJnLWdyZWVuLTkwMC80MCBib3JkZXIgYm9yZGVyLWdyZWVuLTUwMCB0ZXh0LWdyZWVuLTQwMCBob3ZlcjpiZy1ncmVlbi01MDAgaG92ZXI6dGV4dC1ibGFjayB0cmFuc2l0aW9uLWNvbG9ycyBmb250LWJvbGQgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCB0ZXh0LXhsIHNoYWRvdy1bMF8wXzE1cHhfcmdiYSgzNCwxOTcsOTQsMC4yKV0gaG92ZXI6c2hhZG93LVswXzBfMjBweF9yZ2JhKDM0LDE5Nyw5NCwwLjYpXSIsIGNoaWxkcmVuOiAiVk9URSIgfSkpIDogKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1ncmVlbi03MDAgdGV4dC1zbSB0cmFja2luZy13aWRlc3QgYm9yZGVyIGJvcmRlci1ncmVlbi05MDAgcHgtMyBweS0xIHJvdW5kZWQiLCBjaGlsZHJlbjogIkxPQ0tFRCIgfSkpXSB9KV0gfSksIGhhc1ZvdGVkICYmIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtY2VudGVyIHRleHQtZ3JlZW4tNDAwIGJnLWdyZWVuLTkwMC8yMCBwLTMgYm9yZGVyIGJvcmRlci1ncmVlbi04MDAgYW5pbWF0ZS1wdWxzZSBtdC00IHRleHQteGwiLCBjaGlsZHJlbjogIlZPVEUgUkVHSVNURVJFRC4gVEhBTksgWU9VIEZPUiBZT1VSIENPTVBMSUFOQ0UuIiB9KSksICFoYXNWb3RlZCAmJiAoX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGp1c3RpZnktY2VudGVyIG10LTQiLCBjaGlsZHJlbjogX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiB7IFNvdW5kRlgucGxheUtleSgpOyBvbkNsb3NlKCk7IH0sIGNsYXNzTmFtZTogInRleHQteWVsbG93LTgwMCBob3Zlcjp0ZXh0LXllbGxvdy01MDAgZm9udC1ib2xkIHRyYWNraW5nLXdpZGVzdCB0ZXh0LXNtIGJvcmRlci1iIGJvcmRlci10cmFuc3BhcmVudCBob3Zlcjpib3JkZXIteWVsbG93LTUwMCB0cmFuc2l0aW9uLWNvbG9ycyB1cHBlcmNhc2UiLCBjaGlsZHJlbjogIlsgU0tJUCBUUkFOU01JU1NJT04gXSIgfSkgfSkpXSB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgdy0yIGgtMiBiZy15ZWxsb3ctNTAwIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSB0b3AtMCByaWdodC0wIHctMiBoLTIgYmcteWVsbG93LTUwMCIgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgYm90dG9tLTAgbGVmdC0wIHctMiBoLTIgYmcteWVsbG93LTUwMCIgfSksIF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgYm90dG9tLTAgcmlnaHQtMCB3LTIgaC0yIGJnLXllbGxvdy01MDAiIH0pXSB9KSB9KSk7Cn07Cg=="}}</script>
        <script>
          window.APPLET_FILES = ["index.tsx","metadata.json","index.html","types.ts","services/gameMaster.ts","components/Layout.tsx","components/Terminal.tsx","components/Exploration.tsx","App.tsx","components/Lobby.tsx","services/audioEngine.ts","services/modelFactory.ts","components/ModelViewerModal.tsx","components/VoteModal.tsx"];
          </script>
        <script type="module">
        (() => {
  if (window.self === window.top) {
    // Do not run the shim in the main window, only in iframes.
    return;
  }

  window.API_KEY = 'GEMINI_API_KEY';
  window.GEMINI_API_KEY = 'GEMINI_API_KEY';
  window.process = window.process || {};
  window.process.env = window.process.env || {};
  window.process.env.API_KEY = window.API_KEY;
  window.process.env.GEMINI_API_KEY = window.GEMINI_API_KEY;

  const bootstrapChannel = new Promise((resolve) => {
    window.addEventListener('message', (event) => {
      if (event.origin !== 'https://aistudio.google.com') {
        return;
      }

      if (event.data.type === 'bootstrap') {
        resolve({
          port: event.ports[0],
          urlPatterns:
              event.data.urlPatterns.map((pattern) => new RegExp(pattern)),
        });
      }
    });
  });

  window.aistudio = window.aistudio || {
    handleFullscreenEsc: true,
    getHostUrl: async function() {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'get_host_url'},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data.url);
        };
      });
    },
    hasSelectedApiKey: async function() {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'has_selected_api_key'},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data);
        };
      });
    },
    openSelectKey: async function() {
      const hostPort = (await bootstrapChannel).port;
      const channel = new MessageChannel();
      hostPort.postMessage(
          {type: 'open_select_key'},
          [channel.port2]);
    },
    getModelQuota: async function(model) {
      const hostPort = (await bootstrapChannel).port;
      return new Promise((resolve) => {
        const channel = new MessageChannel();
        hostPort.postMessage(
            {type: 'get_model_quota', model},
            [channel.port2]);
        const port = channel.port1;
        port.onmessage = (message) => {
          resolve(message.data.modelQuota);
        };
      });
    },
  };

  const nativeFetch = window.fetch;

  /**
   * @param {string | URL | Request} resource The resource of the fetch request.
   * @param {RequestInit} options The options of the fetch request.
   * @return {Promise!} The promise of the fetch request.
   */
  async function fetch(resource, options) {
    const config = await bootstrapChannel;

    const request = resource instanceof Request ?
      resource.clone() :
      new Request(resource, options);

    if (!config.urlPatterns.some((pattern) => request.url.match(pattern))) {
      return nativeFetch(resource, options);
    }
    const hostPort = config.port;

    const channel = new MessageChannel();
    const port = channel.port1;
    let bodyBytes;
    const transfer = [channel.port2];
    const parts = [];
    const buffer = await request.arrayBuffer();
    if (buffer.byteLength) {
      bodyBytes = buffer;
      transfer.push(bodyBytes);
    }
    hostPort.postMessage(
        {
          type: 'fetch',
          url: request.url,
          method: request.method,
          headers: [...request.headers.entries()],
          body: bodyBytes,
        },
        transfer);

    let streamController;
    const body = new ReadableStream({
      start(controller) {
        streamController = controller;
      },
    });
    let resolveReceive;
    const receivePromise = new Promise((resolve) => {
      resolveReceive = resolve;
    });
    port.onmessage = (message) => {
      switch (message.data.type) {
        case 'response':
          resolveReceive(new Response(body, {
            status: message.data.status,
            statusText: message.data.statusText,
            headers: new Headers(message.data.headers),
          }));
          break;
        case 'body':
          streamController.enqueue(message.data.data);
          break;
        case 'body_done':
          streamController.close();
          break;
      }
    };
    return receivePromise;
  }

  Object.defineProperty(window, 'fetch', {
    get: function() {
      return fetch;
    },
  });

  // See details in: https://github.com/angular/angular/issues/63064.
  function patchHistoryStateFunctionForAngular(originalFn, baseHref) {
    return (state, unused, url) => {
      if (typeof url === 'string' && !url.startsWith('blob:')) {
        url = baseHref + url;
      }
      return originalFn.apply(window.history, [state, unused, url]);
    };
  }

  if (false) {
    const baseHref = window.location.href;
    window.history.replaceState = patchHistoryStateFunctionForAngular(window.history.replaceState, baseHref);
    window.history.pushState = patchHistoryStateFunctionForAngular(window.history.pushState, baseHref);
  }

  const originalWebSocket = window.WebSocket;
  class ProxiedWebSocket extends EventTarget {
    /**
     * @param {string} url The url of the websocket.
     * @param {Object!} protocols The protocols of the websocket.
     */
    constructor(url, protocols) {
      super();
      this.url = url;
      this.protocols = protocols;

      this.open();
    }

    /** Opens the websocket. */
    async open() {
      const hostPort = (await bootstrapChannel).port;
      const channel = new MessageChannel();
      hostPort.postMessage(
          {type: 'websocket_open', url: this.url, protocols: this.protocols},
          [channel.port2]);
      this.port = channel.port1;
      this.port.onmessage = (message) => {
        if (message.data.type === 'close') {
          const event = new CloseEvent('close', {
            code: message.data.code,
            reason: message.data.reason,
            wasClean: message.data.wasClean,
          });
          if (this.onclose) {
            this.onclose(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'open') {
          const event = new Event('open');
          if (this.onopen) {
            this.onopen(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'message') {
          let data = message.data.data;
          if (message.data.messageType === 'text' || message.data.messageType === 'message') {
            data = new TextDecoder().decode(data);
          }
          const event = new MessageEvent('message', {
            data,
            type: message.data.messageType,
          });
          if (this.onmessage) {
            this.onmessage(event);
          }
          this.dispatchEvent(event);
          return;
        } else if (message.data.type === 'error') {
          const event = new ErrorEvent('error', {
            message: message.data.message,
          });
          if (this.onerror) {
            this.onerror(event);
          }
          this.dispatchEvent(event);
          return;
        }
        console.error('received unknown message in frame', event.data);
      };
    }
    /**
     * @param {string|ArrayBuffer!} data The data to send.
     */
    send(data) {
      if (typeof data === 'string') {
        this.port.postMessage({type: 'send', data});
      } else {
        this.port.postMessage({type: 'send', data}, [data.buffer]);
      }
    }

    /**
     * @param {number} code The code of the close event.
     * @param {string} reason The reason of the close event.
     */
    close(code, reason) {
      this.port.postMessage({type: 'close', code, reason});
    }
  }

  /**
   * @param {string} url The url of the websocket.
   * @param {Object!} protocols The protocols of the websocket.
   * @return {WebSocket!} The websocket.
   */
  function createWebSocket(url, protocols) {
    // This should come from the bootstrap channel, but we want this to
    // work for the synchronous constructor here.
    if (url.startsWith('wss://generativelanguage.googleapis.com/')) {
      return Reflect.construct(ProxiedWebSocket, [url, protocols]);
    }
    return Reflect.construct(originalWebSocket, [url, protocols]);
  }

  Object.defineProperty(window, 'WebSocket', {
    get: function() {
      return createWebSocket;
    },
  });

  async function instrumentErrorReporting() {
    const errors = [];
    let hostPort;

    function reportError(message) {
      if (!hostPort) {
        errors.push(message);
      } else {
        hostPort.postMessage({type: 'error', message: message}, message);
      }
    }

    function serialize(args) {
      return args.map((a) => {
        if (a instanceof Error || a instanceof ErrorEvent) {
          return a.message;
        }
        if(a instanceof CloseEvent) {
          return {code: a.code, reason: a.reason, wasClean: a.wasClean};
        }
        if( a instanceof Map) {
          return JSON.parse(JSON.stringify([...a.entries()]));
        }
        if( a instanceof Set) {
          return JSON.parse(JSON.stringify([...a.values()]));
        }
        if (a instanceof Object) {
          return JSON.parse(JSON.stringify(a));
        }
        return a;
      });
    }

    const originalConsole = window.console;
    const originalConsoleLog = window.console.log;
    const originalConsoleError = window.console.error;
    const originalConsoleWarn = window.console.warn;
    const originalConsoleDebug = window.console.debug;
    window.console = {
      ...originalConsole,
      log: (message, ...args) => {
        originalConsoleLog.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_log', message: combined });
      },
      debug: (message, ...args) => {
        originalConsoleDebug.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_debug', message: combined });
      },
      error: (message, ...args) => {
        originalConsoleError.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_error', message: combined });
      },
      warn: (message, ...args) => {
        originalConsoleWarn.apply(window.console, [message, ...args]);
        const combined = serialize([message, ...args]);
        reportError({type: 'console_warn', message: combined });
      },
    };

    window.onerror = (message, source, lineno, colno, error) => {
      reportError({type: 'error', message: serialize([message]), source, lineno, colno, error});
    };

    window.onunhandledrejection = (event) => {
      reportError({type: 'unhandledrejection', message: serialize([event.reason])});
    };

    window.alert = (message) => {
      reportError({type: 'alert', message: serialize([message]) });
    };

    hostPort = (await bootstrapChannel).port;
    for(const error of errors) {
      hostPort.postMessage({type: 'error', message: error});
    }
  }

  const availableFiles = new Set(window.APPLET_FILES || []);

  instrumentErrorReporting();

  if (false) {
    const notifyLocationChange = async () => {
      const hostPort = (await bootstrapChannel).port;
      hostPort.postMessage({type: 'locationchange', href: location.href});
    };

    // Send initial state on load.
    notifyLocationChange();

    const originalPushState = history.pushState;
    history.pushState = (...args) => {
      originalPushState.apply(history, args);
      notifyLocationChange();
    };

    const originalReplaceState = history.replaceState;
    history.replaceState = (...args) => {
      originalReplaceState.apply(history, args);
      notifyLocationChange();
    };
    window.addEventListener('popstate', (e) => {
      notifyLocationChange();
    });
  }

  window.addEventListener('hashchange', async (e) =>{
    const config = await bootstrapChannel;
    const hostPort = config.port;
    hostPort.postMessage({type: 'hashchange', hash: window.location.hash});
    if (false) {
      hostPort.postMessage({
        type: 'locationchange',
        href: location.href,
      });
    }
  });

  if (true) {
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/html2canvas-pro';
    script.onload = () => {
      window.addEventListener('message', async (event) => {
        if (event.data?.type === 'capture-screenshot') {
          try {
            const canvas = await html2canvas(document.documentElement, {
              logging: false,
              useCORS: true,
              backgroundColor: null,
              scale: 1,
            });
            const hostPort = (await bootstrapChannel).port;
            hostPort.postMessage(
              {
                type: 'screenshot-result',
                dataUrl: canvas.toDataURL('image/png'),
                requestId: event.data.requestId,
                scrollX: document.body.scrollLeft,
                scrollY: document.body.scrollTop,
              },
            );
          } catch (e) {
            const hostPort = (await bootstrapChannel).port;
            hostPort.postMessage(
              {
                type: 'screenshot-error',
                error: e.message,
                requestId: event.data.requestId,
              });
          }
        }
      });
    };
    document.head.appendChild(script);
  }

  if (false) {
    const MAX_ANCESTOR_LEVEL = 3;
    const MAX_DESCENDANT_LEVEL = 3;

    function getElementSelector(el) {
      if (!el || el.nodeType !== 1) {
        return '';
      }
      const parts = [];
      while(el && el.nodeType === 1 && el.tagName.toLowerCase() !== 'body') {
        let part = el.tagName.toLowerCase();
        if (el.id) {
          part += '#' + CSS.escape(el.id);
        }

        const parent = el.parentElement;
        if (parent) {
          let nth = 1;
          let prev = el.previousElementSibling;
          while(prev) {
            if (prev.tagName === el.tagName) {
              nth++;
            }
            prev = prev.previousElementSibling;
          }
          part += ':nth-of-type(' + nth + ')';
        }

        parts.unshift(part);
        el = el.parentElement;
      }
      return parts.join(' > ');
    }

    function getDomTreeAsString(element, depth, maxDepth) {
      if (!element || element.nodeType !== 1 || depth > maxDepth) {
        return '';
      }
      const tagName = element.tagName.toLowerCase();
      let attrs = [];
      if (element.id) {
        attrs.push('id="' + element.id + '"');
      }
      if (element.classList.length > 0) {
        attrs.push('class="' + element.classList.value + '"');
      }
      const attrString = attrs.length > 0 ? ' ' + attrs.join(' ') : '';

      let content = '';
      for (const node of element.childNodes) {
        if (node.nodeType === 1) { // Element node
          content += getDomTreeAsString(node, depth + 1, maxDepth);
        } else if (node.nodeType === 3) { // Text node
          content += node.textContent;
        }
      }

      return '<' + tagName + attrString + '>' + content + '</' + tagName + '>';
    }

    const style = document.createElement('style');
    style.textContent =
      '.aistudio-focus-mode-highlight { box-shadow: inset 0 0 0 0.5px white, inset 0 0 0 1.5px #87a9ff !important; }' +
      '#aistudio-focus-mode-tag { position: absolute; display: none; background: #87a9ff; border-radius: 4px; border: 0.5px solid white; z-index: 10000; text-transform: lowercase; padding: 2px 4px; color: #32302c; font-family: Inter, sans-serif; font-size: 12px; font-style: normal; font-weight: 400; line-height: 16px; pointer-events: none; }';
    document.head.appendChild(style);

    let highlightedElement = null;
    let focusTag = null;
    let resizeObserver = null;
    let iframeLoaded = false;

    function positionFocusTag() {
      if (!highlightedElement || !focusTag) return;
      requestAnimationFrame(() => {
        focusTag.style.display = 'inline-flex';
        const rect = highlightedElement.getBoundingClientRect();
        focusTag.style.top =
          rect.top + window.scrollY - focusTag.offsetHeight - 5 + 'px';
        focusTag.style.left = rect.left + window.scrollX + 'px';
      });
    }

    if (window.ResizeObserver) {
      resizeObserver = new ResizeObserver(() => {
        positionFocusTag();
      });
    }

    function highlight(element) {
      if (!iframeLoaded) return; // Do not highlight if iframe is not loaded
      if (!focusTag) {
        focusTag = document.createElement('div');
        focusTag.id = 'aistudio-focus-mode-tag';
        document.body.appendChild(focusTag);
      }

      const hadHighlightedElement = !!highlightedElement;
      if (highlightedElement) {
        highlightedElement.classList.remove('aistudio-focus-mode-highlight');
        highlightedElement.removeAttribute('data-aistudio-tag-name');
        if (resizeObserver) {
          resizeObserver.unobserve(highlightedElement);
        }
      }
      focusTag.style.display = 'none';
      highlightedElement = element;
      const hasHighlightedElement = !!highlightedElement;

      if (!hadHighlightedElement && hasHighlightedElement) {
        window.addEventListener('resize', positionFocusTag);
        window.addEventListener('scroll', positionFocusTag, true);
      } else if (hadHighlightedElement && !hasHighlightedElement) {
        window.removeEventListener('resize', positionFocusTag);
        window.removeEventListener('scroll', positionFocusTag, true);
      }

      if (highlightedElement) {
        highlightedElement.setAttribute(
          'data-aistudio-tag-name',
          highlightedElement.tagName,
        );
        highlightedElement.classList.add('aistudio-focus-mode-highlight');
        focusTag.textContent = highlightedElement.tagName.toLowerCase();
        positionFocusTag();
        if (resizeObserver) {
          resizeObserver.observe(highlightedElement);
        }
      }
    }

    window.addEventListener('load', () => {
      iframeLoaded = true;
    });

    window.addEventListener('message', async (event) => {
      if (event.data?.type === 'highlight-element-at-point') {
        try {
          const element = document.elementFromPoint(
            event.data.x,
            event.data.y,
          );
          highlight(element);
        } catch (e) {
          highlight(null);
        }
      } else if (event.data?.type === 'highlight-element-by-selector') {
        try {
          const selector = event.data.selector;
          if (selector) {
            const element = document.querySelector(selector);
            highlight(element);
          } else {
            highlight(null);
          }
        } catch (e) {
          highlight(null);
        }
      } else if (event.data?.type === 'get-element-at-point') {
        try {
          const element = document.elementFromPoint(
            event.data.x,
            event.data.y,
          );
          const hostPort = (await bootstrapChannel).port;
          if (!element) {
            hostPort.postMessage({
              type: 'element-at-point-error',
              error: 'No element found at point',
              requestId: event.data.requestId,
            });
            return;
          }
          const selector = getElementSelector(element);

          let levelsUp = 0;
          let root = element;
          while(levelsUp < MAX_ANCESTOR_LEVEL && root.parentElement && root.parentElement.tagName.toLowerCase() !== 'html') {
            root = root.parentElement;
            levelsUp++;
          }
          const domString = getDomTreeAsString(root, 0, levelsUp + MAX_DESCENDANT_LEVEL);

          const styles = window.getComputedStyle(element);
          const css = {};
          for (let i = 0; i < styles.length; i++) {
            const key = styles[i];
            css[key] = styles.getPropertyValue(key);
          }
          hostPort.postMessage({
            type: 'element-at-point-result',
            element: {
              selector: selector,
              domString: domString,
              css: css,
              x: event.data.x,
              y: event.data.y,
            },
            requestId: event.data.requestId,
          });
        } catch (e) {
          const hostPort = (await bootstrapChannel).port;
          hostPort.postMessage({
            type: 'element-at-point-error',
            error: e.message,
            requestId: event.data.requestId,
          });
        }
      } else if (event.data?.type === 'change-element-style') {
        try {
          const selector = event.data.selector;
          if (selector) {
            const element = document.querySelector(selector);
            if (element) {
              element.style.setProperty(
                event.data.property,
                event.data.value,
                'important',
              );
              positionFocusTag();
            }
          }
        } catch (e) {}
      }
    });
  }

  window.addEventListener('keydown', async (event) => {
    if (event.key === 'Escape' && window.aistudio?.handleFullscreenEsc) {
      const hostPort = (await bootstrapChannel).port;
      hostPort.postMessage({type: 'exit-fullscreen'});
    }
  });
})();
// # sourceURL=iframe_shim.js
        </script>
        <base href="https://ai.studio">



  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lethal Scavenger</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2333ff00' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M2 9a10 10 0 0 1 20 0v2a10 10 0 0 1-20 0V9z'%3E%3C/path%3E%3Ccircle cx='8' cy='11' r='3' fill='%23050505'%3E%3C/circle%3E%3Ccircle cx='16' cy='11' r='3' fill='%23050505'%3E%3C/circle%3E%3Crect x='9' y='16' width='6' height='5' rx='1' fill='%23050505'%3E%3C/rect%3E%3Cpath d='M12 16v5'%3E%3C/path%3E%3Cpath d='M10 16v5'%3E%3C/path%3E%3Cpath d='M14 16v5'%3E%3C/path%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&amp;family=Share+Tech+Mono&amp;display=swap" rel="stylesheet">
    <script>
      // Polyfill process for browser environment
      window.process = {
        env: {
          API_KEY: '' 
        }
      };
    </script>
    <style>
      html, body, #root {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        background-color: #050505;
        color: #33ff00;
        font-family: 'Share Tech Mono', monospace;
        overflow: hidden; /* Critical for Google Sites embed */
        touch-action: none;
        user-select: none;
        -webkit-user-select: none;
      }
      
      /* Custom Scrollbar for Terminals */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #001100; 
      }
      ::-webkit-scrollbar-thumb {
        background: #004400; 
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #006600; 
      }
      
      .text-glow {
        text-shadow: 0 0 5px rgba(50, 255, 50, 0.5), 0 0 10px rgba(50, 255, 50, 0.3);
      }
      
      .text-glow-red {
        text-shadow: 0 0 5px rgba(255, 50, 50, 0.8), 0 0 10px rgba(255, 0, 0, 0.5);
      }

      .scanlines {
        background: linear-gradient(
          to bottom,
          rgba(255,255,255,0),
          rgba(255,255,255,0) 50%,
          rgba(0,0,0,0.1) 50%,
          rgba(0,0,0,0.1)
        );
        background-size: 100% 4px;
        animation: scanline 10s linear infinite;
        pointer-events: none;
      }

      .crt-flicker {
        animation: flicker 0.15s infinite;
        pointer-events: none;
      }

      @keyframes scanline {
        0% { background-position: 0 0; }
        100% { background-position: 0 100%; }
      }

      @keyframes flicker {
        0% { opacity: 0.97; }
        5% { opacity: 0.95; }
        10% { opacity: 0.97; }
        15% { opacity: 0.99; }
        20% { opacity: 0.96; }
        50% { opacity: 0.98; }
        55% { opacity: 0.95; }
        60% { opacity: 0.99; }
        100% { opacity: 0.97; }
      }

      #crosshair {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 4px;
        height: 4px;
        background-color: rgba(0, 255, 0, 0.5);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
        z-index: 100;
      }
      
      /* Force focus outline removal for game immersion */
      :focus {
        outline: none;
      }
    </style>
  <style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.right-6{right:1.5rem}.top-6{top:1.5rem}.z-0{z-index:0}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.flex{display:flex}.h-full{height:100%}.min-h-0{min-height:0px}.w-full{width:100%}.max-w-md{max-width:28rem}.flex-1{flex:1 1 0%}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:0.5rem}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-8 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.border{border-width:1px}.border-2{border-width:2px}.border-green-700{--tw-border-opacity:1;border-color:rgb(21 128 61 / var(--tw-border-opacity, 1))}.border-green-900{--tw-border-opacity:1;border-color:rgb(20 83 45 / var(--tw-border-opacity, 1))}.border-green-900\/50{border-color:rgb(20 83 45 / 0.5)}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.bg-black\/50{background-color:rgb(0 0 0 / 0.5)}.bg-green-800{--tw-bg-opacity:1;background-color:rgb(22 101 52 / var(--tw-bg-opacity, 1))}.bg-green-900\/50{background-color:rgb(20 83 45 / 0.5)}.bg-\[radial-gradient\(circle_at_center\2c transparent_40\%\2c rgba\(0\2c 0\2c 0\2c 0\.9\)_90\%\)\]{background-image:radial-gradient(circle at center,transparent 40%,rgba(0,0,0,0.9) 90%)}.p-10{padding:2.5rem}.p-2{padding:0.5rem}.p-4{padding:1rem}.p-8{padding:2rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}.text-9xl{font-size:8rem;line-height:1}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.uppercase{text-transform:uppercase}.tracking-tighter{letter-spacing:-0.05em}.tracking-widest{letter-spacing:0.1em}.text-black{--tw-text-opacity:1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity:1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity:1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity:1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity:1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-green-900\/50{color:rgb(20 83 45 / 0.5)}.opacity-30{opacity:0.3}.opacity-\[0\.12\]{opacity:0.12}.mix-blend-screen{mix-blend-mode:screen}.mix-blend-overlay{mix-blend-mode:overlay}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.hover\:border-green-500:hover{--tw-border-opacity:1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.hover\:bg-green-600:hover{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.hover\:bg-green-900:hover{--tw-bg-opacity:1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.hover\:text-green-400:hover{--tw-text-opacity:1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.focus\:border-green-400:focus{--tw-border-opacity:1;border-color:rgb(74 222 128 / var(--tw-border-opacity, 1))}.group:hover .group-hover\:scale-110{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes bounce{0%, 100%{transform:translateY(-25%);animation-timing-function:cubic-bezier(0.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,0.2,1)}}.group:hover .group-hover\:animate-bounce{animation:bounce 1s infinite}</style><script src="https://cdn.jsdelivr.net/npm/html2canvas-pro"></script></head>
  <body>
    <div id="root"><div class="fixed inset-0 w-full h-full bg-black overflow-hidden font-vt323 flex flex-col "><div class="absolute inset-0 opacity-[0.12] pointer-events-none z-0 mix-blend-overlay" style="background-image: url(&quot;data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E&quot;);"></div><div class="absolute inset-0 pointer-events-none z-10 bg-[radial-gradient(circle_at_center,transparent_40%,rgba(0,0,0,0.9)_90%)]"></div><div class="absolute inset-0 pointer-events-none z-50 opacity-30 mix-blend-screen" style="background: linear-gradient(90deg, rgba(255, 0, 0, 0.05), rgba(0, 255, 0, 0.05), rgba(0, 0, 255, 0.05)); transform: scale(1.02);"></div><div class="relative z-20 flex-1 w-full flex flex-col min-h-0"><div class="flex flex-col items-center justify-center h-full space-y-8 p-10 relative"><div class="absolute top-6 right-6 flex flex-col items-end gap-2 z-50"><div class="flex items-center gap-2 text-green-900/50 text-xs font-mono tracking-widest"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-globe" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path><path d="M2 12h20"></path></svg> NET_STATUS: <span class="text-green-600 animate-pulse">ONLINE</span></div><button class="border border-green-900/50 text-green-800 hover:text-green-400 hover:border-green-500 bg-black/50 px-3 py-1 text-xs font-mono tracking-widest transition-all uppercase flex items-center gap-2 group"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize group-hover:scale-110" aria-hidden="true"><path d="M8 3H5a2 2 0 0 0-2 2v3"></path><path d="M21 8V5a2 2 0 0 0-2-2h-3"></path><path d="M3 16v3a2 2 0 0 0 2 2h3"></path><path d="M16 21h3a2 2 0 0 0 2-2v-3"></path></svg> [ FULLSCREEN ]</button><button class="border border-green-900/50 text-green-800 hover:text-green-400 hover:border-green-500 bg-black/50 px-3 py-1 text-xs font-mono tracking-widest transition-all uppercase flex items-center gap-2 group"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-download group-hover:animate-bounce" aria-hidden="true"><path d="M12 15V3"></path><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><path d="m7 10 5 5 5-5"></path></svg> [ DOWNLOAD HTML ]</button></div><h1 class="text-9xl font-bold text-green-500 text-glow uppercase tracking-tighter text-center">Lethal<br>Scavenger</h1><div class="bg-black border-2 border-green-900 p-8 space-y-4 w-full max-w-md shadow-2xl relative"><input class="w-full bg-black border border-green-700 p-4 text-green-500 font-mono text-xl focus:border-green-400 outline-none" placeholder="EMPLOYEE ID" value=""><div class="flex gap-2"><button class="flex-1 bg-green-800 text-black p-4 font-bold hover:bg-green-600 transition-colors">HOST</button><button class="flex-1 bg-green-900/50 text-green-400 p-4 border border-green-700 hover:bg-green-900 transition-colors">JOIN</button></div><input class="w-full bg-black border border-green-700 p-2 text-green-500 uppercase focus:border-green-400 outline-none" placeholder="ROOM CODE" value=""></div></div></div><div class="absolute inset-0 pointer-events-none z-50 scanlines opacity-30 mix-blend-overlay"></div></div></div>
    <script type="module" src="./index.tsx"></script>
  


        <script type="module" onerror="console.warn('Failed to load the app. Try reloading it.')">import '@/index';</script>
        </body></html>